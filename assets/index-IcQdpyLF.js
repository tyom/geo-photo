(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function r(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=r(u);fetch(u.href,f)}})();const Gf=!1;var jn=Array.isArray,bo=Array.from,Hf=Object.defineProperty,ni=Object.getOwnPropertyDescriptor,Ka=Object.getOwnPropertyDescriptors,Wf=Object.prototype,jf=Array.prototype,On=Object.getPrototypeOf;const Yr=()=>{};function Vf(e){return e()}function Kr(e){for(var n=0;n<e.length;n++)e[n]()}const le=2,Xa=4,Wi=8,Po=16,$t=32,ji=64,Be=128,kn=256,It=512,we=1024,ui=2048,ue=4096,li=8192,qf=16384,Lo=32768,$f=65536,Yf=1<<18,Ja=1<<19,ri=Symbol("$state"),Kf=Symbol("");function Qa(e){return e===this.v}function Xf(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function So(e){return!Xf(e,this.v)}function Jf(e){throw new Error("effect_in_teardown")}function Qf(){throw new Error("effect_in_unowned_derived")}function tc(e){throw new Error("effect_orphan")}function ec(){throw new Error("effect_update_depth_exceeded")}function ic(e){throw new Error("props_invalid_value")}function nc(){throw new Error("state_descriptors_fixed")}function rc(){throw new Error("state_prototype_fixed")}function oc(){throw new Error("state_unsafe_local_read")}function sc(){throw new Error("state_unsafe_mutation")}function Mt(e){return{f:0,v:e,reactions:null,equals:Qa,version:0}}function ac(e){return tu(Mt(e))}function Vn(e,n=!1){var a;const r=Mt(e);return n||(r.equals=So),ut!==null&&ut.l!==null&&((a=ut.l).s??(a.s=[])).push(r),r}function Oi(e,n=!1){return tu(Vn(e,n))}function tu(e){return rt!==null&&rt.f&le&&(ee===null?Ec([e]):ee.push(e)),e}function gt(e,n){return rt!==null&&Oo()&&rt.f&(le|Po)&&(ee===null||!ee.includes(e))&&sc(),eu(e,n)}function eu(e,n){return e.equals(n)||(e.v=n,e.version=vu(),iu(e,we),Oo()&&J!==null&&J.f&It&&!(J.f&$t)&&(Tt!==null&&Tt.includes(e)?(Yt(J,we),Xn(J)):ye===null?Ic([e]):ye.push(e))),n}function iu(e,n){var r=e.reactions;if(r!==null)for(var a=Oo(),u=r.length,f=0;f<u;f++){var h=r[f],m=h.f;m&we||!a&&h===J||(Yt(h,n),m&(It|Be)&&(m&le?iu(h,ui):Xn(h)))}}const uc=1,lc=2,fc=16,cc=1,hc=2,nu=4,dc=8,pc=16,mc=1,_c=2,Dt=Symbol();let gc=!1;function Je(e,n=null,r){if(typeof e!="object"||e===null||ri in e)return e;const a=On(e);if(a!==Wf&&a!==jf)return e;var u=new Map,f=jn(e),h=Mt(0);f&&u.set("length",Mt(e.length));var m;return new Proxy(e,{defineProperty(_,d,g){(!("value"in g)||g.configurable===!1||g.enumerable===!1||g.writable===!1)&&nc();var v=u.get(d);return v===void 0?(v=Mt(g.value),u.set(d,v)):gt(v,Je(g.value,m)),!0},deleteProperty(_,d){var g=u.get(d);if(g===void 0)d in _&&u.set(d,Mt(Dt));else{if(f&&typeof d=="string"){var v=u.get("length"),w=Number(d);Number.isInteger(w)&&w<v.v&&gt(v,w)}gt(g,Dt),Gs(h)}return!0},get(_,d,g){var E;if(d===ri)return e;var v=u.get(d),w=d in _;if(v===void 0&&(!w||(E=ni(_,d))!=null&&E.writable)&&(v=Mt(Je(w?_[d]:Dt,m)),u.set(d,v)),v!==void 0){var P=B(v);return P===Dt?void 0:P}return Reflect.get(_,d,g)},getOwnPropertyDescriptor(_,d){var g=Reflect.getOwnPropertyDescriptor(_,d);if(g&&"value"in g){var v=u.get(d);v&&(g.value=B(v))}else if(g===void 0){var w=u.get(d),P=w==null?void 0:w.v;if(w!==void 0&&P!==Dt)return{enumerable:!0,configurable:!0,value:P,writable:!0}}return g},has(_,d){var P;if(d===ri)return!0;var g=u.get(d),v=g!==void 0&&g.v!==Dt||Reflect.has(_,d);if(g!==void 0||J!==null&&(!v||(P=ni(_,d))!=null&&P.writable)){g===void 0&&(g=Mt(v?Je(_[d],m):Dt),u.set(d,g));var w=B(g);if(w===Dt)return!1}return v},set(_,d,g,v){var O;var w=u.get(d),P=d in _;if(f&&d==="length")for(var E=g;E<w.v;E+=1){var A=u.get(E+"");A!==void 0?gt(A,Dt):E in _&&(A=Mt(Dt),u.set(E+"",A))}w===void 0?(!P||(O=ni(_,d))!=null&&O.writable)&&(w=Mt(void 0),gt(w,Je(g,m)),u.set(d,w)):(P=w.v!==Dt,gt(w,Je(g,m)));var M=Reflect.getOwnPropertyDescriptor(_,d);if(M!=null&&M.set&&M.set.call(v,g),!P){if(f&&typeof d=="string"){var U=u.get("length"),N=Number(d);Number.isInteger(N)&&N>=U.v&&gt(U,N+1)}Gs(h)}return!0},ownKeys(_){B(h);var d=Reflect.ownKeys(_).filter(w=>{var P=u.get(w);return P===void 0||P.v!==Dt});for(var[g,v]of u)v.v!==Dt&&!(g in _)&&d.push(g);return d},setPrototypeOf(){rc()}})}function Gs(e,n=1){gt(e,e.v+n)}var Ri,ru,ou;function vc(){if(Ri===void 0){Ri=window;var e=Element.prototype,n=Node.prototype;ru=ni(n,"firstChild").get,ou=ni(n,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__e=void 0,Text.prototype.__t=void 0}}function To(e=""){return document.createTextNode(e)}function Dn(e){return ru.call(e)}function qn(e){return ou.call(e)}function ae(e){return Dn(e)}function yc(e,n){{var r=Dn(e);return r instanceof Comment&&r.data===""?qn(r):r}}function Oe(e,n=1,r=!1){let a=e;for(;n--;)a=qn(a);return a}function wc(e){e.textContent=""}function Ut(e){var n=le|we;J===null?n|=Be:J.f|=Ja;const r={children:null,deps:null,equals:Qa,f:n,fn:e,reactions:null,v:null,version:0,parent:J};if(rt!==null&&rt.f&le){var a=rt;(a.children??(a.children=[])).push(r)}return r}function xc(e){const n=Ut(e);return n.equals=So,n}function su(e){var n=e.children;if(n!==null){e.children=null;for(var r=0;r<n.length;r+=1){var a=n[r];a.f&le?Co(a):Ne(a)}}}function au(e){var n,r=J;xe(e.parent);try{su(e),n=yu(e)}finally{xe(r)}return n}function uu(e){var n=au(e),r=(ii||e.f&Be)&&e.deps!==null?ui:It;Yt(e,r),e.equals(n)||(e.v=n,e.version=vu())}function Co(e){su(e),Zi(e,0),Yt(e,li),e.v=e.children=e.deps=e.reactions=null}function lu(e){J===null&&rt===null&&tc(),rt!==null&&rt.f&Be&&Qf(),Mo&&Jf()}function bc(e,n){var r=n.last;r===null?n.last=n.first=e:(r.next=e,e.prev=r,n.last=e)}function fi(e,n,r,a=!0){var u=(e&ji)!==0,f=J,h={ctx:ut,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|we,first:null,fn:n,last:null,next:null,parent:u?null:f,prev:null,teardown:null,transitions:null,version:0};if(r){var m=oi;try{Hs(!0),Vi(h),h.f|=qf}catch(g){throw Ne(h),g}finally{Hs(m)}}else n!==null&&Xn(h);var _=r&&h.deps===null&&h.first===null&&h.nodes_start===null&&h.teardown===null&&(h.f&Ja)===0;if(!_&&!u&&a&&(f!==null&&bc(h,f),rt!==null&&rt.f&le)){var d=rt;(d.children??(d.children=[])).push(h)}return h}function fu(e){const n=fi(Wi,null,!1);return Yt(n,It),n.teardown=e,n}function Xr(e){lu();var n=J!==null&&(J.f&$t)!==0&&ut!==null&&!ut.m;if(n){var r=ut;(r.e??(r.e=[])).push({fn:e,effect:J,reaction:rt})}else{var a=$n(e);return a}}function Pc(e){return lu(),Yn(e)}function Lc(e){const n=fi(ji,e,!0);return()=>{Ne(n)}}function $n(e){return fi(Xa,e,!1)}function wn(e,n){var r=ut,a={effect:null,ran:!1};r.l.r1.push(a),a.effect=Yn(()=>{e(),!a.ran&&(a.ran=!0,gt(r.l.r2,!0),ze(n))})}function Sc(){var e=ut;Yn(()=>{if(B(e.l.r2)){for(var n of e.l.r1){var r=n.effect;r.f&It&&Yt(r,ui),ci(r)&&Vi(r),n.ran=!1}e.l.r2.v=!1}})}function Yn(e){return fi(Wi,e,!0)}function In(e){return Eo(e)}function Eo(e,n=0){return fi(Wi|Po|n,e,!0)}function Ui(e,n=!0){return fi(Wi|$t,e,!0,n)}function cu(e){var n=e.teardown;if(n!==null){const r=Mo,a=rt;Ws(!0),si(null);try{n.call(null)}finally{Ws(r),si(a)}}}function hu(e){var n=e.deriveds;if(n!==null){e.deriveds=null;for(var r=0;r<n.length;r+=1)Co(n[r])}}function du(e,n=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var a=r.next;Ne(r,n),r=a}}function Tc(e){for(var n=e.first;n!==null;){var r=n.next;n.f&$t||Ne(n),n=r}}function Ne(e,n=!0){var r=!1;if((n||e.f&Yf)&&e.nodes_start!==null){var a=e.nodes_start,u=e.nodes_end,f=rt,h=J;si(null),xe(null);try{for(;a!==null;){var m=a===u?null:qn(a);a.remove(),a=m}}finally{si(f),xe(h)}r=!0}hu(e),du(e,n&&!r),Zi(e,0),Yt(e,li);var _=e.transitions;if(_!==null)for(const g of _)g.stop();cu(e);var d=e.parent;d!==null&&d.first!==null&&pu(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes_start=e.nodes_end=null}function pu(e){var n=e.parent,r=e.prev,a=e.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),n!==null&&(n.first===e&&(n.first=a),n.last===e&&(n.last=r))}function Jr(e,n){var r=[];Io(e,r,!0),mu(r,()=>{Ne(e),n&&n()})}function mu(e,n){var r=e.length;if(r>0){var a=()=>--r||n();for(var u of e)u.out(a)}else n()}function Io(e,n,r){if(!(e.f&ue)){if(e.f^=ue,e.transitions!==null)for(const h of e.transitions)(h.is_global||r)&&n.push(h);for(var a=e.first;a!==null;){var u=a.next,f=(a.f&Lo)!==0||(a.f&$t)!==0;Io(a,n,f?r:!1),a=u}}}function Bn(e){_u(e,!0)}function _u(e,n){if(e.f&ue){e.f^=ue,ci(e)&&Vi(e);for(var r=e.first;r!==null;){var a=r.next,u=(r.f&Lo)!==0||(r.f&$t)!==0;_u(r,u?n:!1),r=a}if(e.transitions!==null)for(const f of e.transitions)(f.is_global||n)&&f.in()}}let Qr=!1,to=[];function Cc(){Qr=!1;const e=to.slice();to=[],Kr(e)}function Kn(e){Qr||(Qr=!0,queueMicrotask(Cc)),to.push(e)}function Ao(e){throw new Error("lifecycle_outside_component")}let Nn=!1,oi=!1,Mo=!1;function Hs(e){oi=e}function Ws(e){Mo=e}let eo=[],Fi=0;let rt=null;function si(e){rt=e}let J=null;function xe(e){J=e}let ee=null;function Ec(e){ee=e}let Tt=null,Nt=0,ye=null;function Ic(e){ye=e}let gu=0,ii=!1,ut=null;function vu(){return++gu}function Oo(){return ut!==null&&ut.l===null}function ci(e){var h,m;var n=e.f;if(n&we)return!0;if(n&ui){var r=e.deps,a=(n&Be)!==0;if(r!==null){var u;if(n&kn){for(u=0;u<r.length;u++)((h=r[u]).reactions??(h.reactions=[])).push(e);e.f^=kn}for(u=0;u<r.length;u++){var f=r[u];if(ci(f)&&uu(f),a&&J!==null&&!ii&&!((m=f==null?void 0:f.reactions)!=null&&m.includes(e))&&(f.reactions??(f.reactions=[])).push(e),f.version>e.version)return!0}}a||Yt(e,It)}return!1}function Ac(e,n,r){throw e}function yu(e){var v;var n=Tt,r=Nt,a=ye,u=rt,f=ii,h=ee,m=e.f;Tt=null,Nt=0,ye=null,rt=m&($t|ji)?null:e,ii=!oi&&(m&Be)!==0,ee=null;try{var _=(0,e.fn)(),d=e.deps;if(Tt!==null){var g;if(Zi(e,Nt),d!==null&&Nt>0)for(d.length=Nt+Tt.length,g=0;g<Tt.length;g++)d[Nt+g]=Tt[g];else e.deps=d=Tt;if(!ii)for(g=Nt;g<d.length;g++)((v=d[g]).reactions??(v.reactions=[])).push(e)}else d!==null&&Nt<d.length&&(Zi(e,Nt),d.length=Nt);return _}finally{Tt=n,Nt=r,ye=a,rt=u,ii=f,ee=h}}function Mc(e,n){let r=n.reactions;if(r!==null){var a=r.indexOf(e);if(a!==-1){var u=r.length-1;u===0?r=n.reactions=null:(r[a]=r[u],r.pop())}}r===null&&n.f&le&&(Tt===null||!Tt.includes(n))&&(Yt(n,ui),n.f&(Be|kn)||(n.f^=kn),Zi(n,0))}function Zi(e,n){var r=e.deps;if(r!==null)for(var a=n;a<r.length;a++)Mc(e,r[a])}function Vi(e){var n=e.f;if(!(n&li)){Yt(e,It);var r=J,a=ut;J=e,ut=e.ctx;try{hu(e),n&Po?Tc(e):du(e),cu(e);var u=yu(e);e.teardown=typeof u=="function"?u:null,e.version=gu}catch(f){Ac(f)}finally{J=r,ut=a}}}function Oc(){Fi>1e3&&(Fi=0,ec()),Fi++}function kc(e){var n=e.length;if(n!==0){Oc();var r=oi;oi=!0;try{for(var a=0;a<n;a++){var u=e[a];u.f&It||(u.f^=It);var f=[];wu(u,f),Dc(f)}}finally{oi=r}}}function Dc(e){var n=e.length;if(n!==0)for(var r=0;r<n;r++){var a=e[r];!(a.f&(li|ue))&&ci(a)&&(Vi(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?pu(a):a.fn=null))}}function Bc(){if(Nn=!1,Fi>1001)return;const e=eo;eo=[],kc(e),Nn||(Fi=0)}function Xn(e){Nn||(Nn=!0,queueMicrotask(Bc));for(var n=e;n.parent!==null;){n=n.parent;var r=n.f;if(r&(ji|$t)){if(!(r&It))return;n.f^=It}}eo.push(n)}function wu(e,n){var r=e.first,a=[];t:for(;r!==null;){var u=r.f,f=(u&$t)!==0,h=f&&(u&It)!==0;if(!h&&!(u&ue))if(u&Wi){f?r.f^=It:ci(r)&&Vi(r);var m=r.first;if(m!==null){r=m;continue}}else u&Xa&&a.push(r);var _=r.next;if(_===null){let v=r.parent;for(;v!==null;){if(e===v)break t;var d=v.next;if(d!==null){r=d;continue t}v=v.parent}}r=_}for(var g=0;g<a.length;g++)m=a[g],n.push(m),wu(m,n)}function B(e){var m;var n=e.f,r=(n&le)!==0;if(r&&n&li){var a=au(e);return Co(e),a}if(rt!==null){ee!==null&&ee.includes(e)&&oc();var u=rt.deps;Tt===null&&u!==null&&u[Nt]===e?Nt++:Tt===null?Tt=[e]:Tt.push(e),ye!==null&&J!==null&&J.f&It&&!(J.f&$t)&&ye.includes(e)&&(Yt(J,we),Xn(J))}else if(r&&e.deps===null){var f=e,h=f.parent;h!==null&&!((m=h.deriveds)!=null&&m.includes(f))&&(h.deriveds??(h.deriveds=[])).push(f)}return r&&(f=e,ci(f)&&uu(f)),e.v}function ze(e){const n=rt;try{return rt=null,e()}finally{rt=n}}const Nc=~(we|ui|It);function Yt(e,n){e.f=e.f&Nc|n}function js(e,n=1){var r=+B(e);return gt(e,r+n),r}function Jn(e,n=!1,r){ut={p:ut,c:null,e:null,m:!1,s:e,x:null,l:null},n||(ut.l={s:null,u:null,r1:[],r2:Mt(!1)})}function Qn(e){const n=ut;if(n!==null){const h=n.e;if(h!==null){var r=J,a=rt;n.e=null;try{for(var u=0;u<h.length;u++){var f=h[u];xe(f.effect),si(f.reaction),$n(f.fn)}}finally{xe(r),si(a)}}ut=n.p,n.m=!0}return{}}function Bi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ri in e)io(e);else if(!Array.isArray(e))for(let n in e){const r=e[n];typeof r=="object"&&r&&ri in r&&io(r)}}}function io(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let a in e)try{io(e[a],n)}catch{}const r=On(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=Ka(r);for(let u in a){const f=a[u].get;if(f)try{f.call(e)}catch{}}}}}const xu=new Set,no=new Set;function ro(e,n,r,a){function u(f){if(a.capture||Ni.call(n,f),!f.cancelBubble)return r.call(this,f)}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Kn(()=>{n.addEventListener(e,u,a)}):n.addEventListener(e,u,a),u}function Bt(e,n,r,a,u){var f={capture:a,passive:u},h=ro(e,n,r,f);(n===document.body||n===window||n===document)&&fu(()=>{n.removeEventListener(e,h,f)})}function bu(e){for(var n=0;n<e.length;n++)xu.add(e[n]);for(var r of no)r(e)}function Ni(e){var M;var n=this,r=n.ownerDocument,a=e.type,u=((M=e.composedPath)==null?void 0:M.call(e))||[],f=u[0]||e.target,h=0,m=e.__root;if(m){var _=u.indexOf(m);if(_!==-1&&(n===document||n===window)){e.__root=n;return}var d=u.indexOf(n);if(d===-1)return;_<=d&&(h=_)}if(f=u[h]||e.target,f!==n){Hf(e,"currentTarget",{configurable:!0,get(){return f||r}});try{for(var g,v=[];f!==null;){var w=f.assignedSlot||f.parentNode||f.host||null;try{var P=f["__"+a];if(P!==void 0&&!f.disabled)if(jn(P)){var[E,...A]=P;E.apply(f,[e,...A])}else P.call(f,e)}catch(U){g?v.push(U):g=U}if(e.cancelBubble||w===n||w===null)break;f=w}if(g){for(let U of v)queueMicrotask(()=>{throw U});throw g}}finally{e.__root=n,delete e.currentTarget}}}function zc(e){var n=document.createElement("template");return n.innerHTML=e,n.content}function oo(e,n){var r=J;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=n)}function be(e,n){var r=(n&mc)!==0,a=(n&_c)!==0,u,f=!e.startsWith("<!>");return()=>{u===void 0&&(u=zc(f?e:"<!>"+e),r||(u=Dn(u)));var h=a?document.importNode(u,!0):u.cloneNode(!0);if(r){var m=Dn(h),_=h.lastChild;oo(m,_)}else oo(h,h);return h}}function Vs(e=""){{var n=To(e+"");return oo(n,n),n}}function te(e,n){e!==null&&e.before(n)}function Rc(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Fc=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Uc(e){return Fc.includes(e)}const Zc={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"};function Gc(e){return e=e.toLowerCase(),Zc[e]??e}const Hc=["touchstart","touchmove"];function Wc(e){return Hc.includes(e)}function jc(e,n){var r=n==null?"":typeof n=="object"?n+"":n;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function Vc(e,n){return qc(e,n)}const Ye=new Map;function qc(e,{target:n,anchor:r,props:a={},events:u,context:f,intro:h=!0}){vc();var m=new Set,_=v=>{for(var w=0;w<v.length;w++){var P=v[w];if(!m.has(P)){m.add(P);var E=Wc(P);n.addEventListener(P,Ni,{passive:E});var A=Ye.get(P);A===void 0?(document.addEventListener(P,Ni,{passive:E}),Ye.set(P,1)):Ye.set(P,A+1)}}};_(bo(xu)),no.add(_);var d=void 0,g=Lc(()=>{var v=r??n.appendChild(To());return Ui(()=>{if(f){Jn({});var w=ut;w.c=f}u&&(a.$$events=u),d=e(v,a)||{},f&&Qn()}),()=>{var E;for(var w of m){n.removeEventListener(w,Ni);var P=Ye.get(w);--P===0?(document.removeEventListener(w,Ni),Ye.delete(w)):Ye.set(w,P)}no.delete(_),qs.delete(d),v!==r&&((E=v.parentNode)==null||E.removeChild(v))}});return qs.set(d,g),d}let qs=new WeakMap;function Fr(e,n,r,a=null,u=!1){var f=e,h=null,m=null,_=null,d=u?Lo:0;Eo(()=>{_!==(_=!!n())&&(_?(h?Bn(h):h=Ui(()=>r(f)),m&&Jr(m,()=>{m=null})):(m?Bn(m):a&&(m=Ui(()=>a(f))),h&&Jr(h,()=>{h=null})))},d)}let Ur=null;function $c(e,n){return n}function Yc(e,n,r,a){for(var u=[],f=n.length,h=0;h<f;h++)Io(n[h].e,u,!0);var m=f>0&&u.length===0&&r!==null;if(m){var _=r.parentNode;wc(_),_.append(r),a.clear(),ge(e,n[0].prev,n[f-1].next)}mu(u,()=>{for(var d=0;d<f;d++){var g=n[d];m||(a.delete(g.k),ge(e,g.prev,g.next)),Ne(g.e,!m)}})}function Kc(e,n,r,a,u,f=null){var h=e,m={flags:n,items:new Map,first:null};{var _=e;h=_.appendChild(To())}var d=null,g=!1;Eo(()=>{var v=r(),w=jn(v)?v:v==null?[]:bo(v),P=w.length;g&&P===0||(g=P===0,Xc(w,m,h,u,n,a),f!==null&&(P===0?d?Bn(d):d=Ui(()=>f(h)):d!==null&&Jr(d,()=>{d=null})),r())})}function Xc(e,n,r,a,u,f){var h=e.length,m=n.items,_=n.first,d=_,g,v=null,w=[],P=[],E,A,M,U;for(U=0;U<h;U+=1){if(E=e[U],A=f(E,U),M=m.get(A),M===void 0){var N=d?d.e.nodes_start:r;v=Qc(N,n,v,v===null?n.first:v.next,E,A,U,a,u),m.set(A,v),w=[],P=[],d=v.next;continue}if(Jc(M,E,U),M.e.f&ue&&Bn(M.e),M!==d){if(g!==void 0&&g.has(M)){if(w.length<P.length){var O=P[0],q;v=O.prev;var it=w[0],z=w[w.length-1];for(q=0;q<w.length;q+=1)$s(w[q],O,r);for(q=0;q<P.length;q+=1)g.delete(P[q]);ge(n,it.prev,z.next),ge(n,v,it),ge(n,z,O),d=O,v=z,U-=1,w=[],P=[]}else g.delete(M),$s(M,d,r),ge(n,M.prev,M.next),ge(n,M,v===null?n.first:v.next),ge(n,v,M),v=M;continue}for(w=[],P=[];d!==null&&d.k!==A;)d.e.f&ue||(g??(g=new Set)).add(d),P.push(d),d=d.next;if(d===null)continue;M=d}w.push(M),v=M,d=M.next}if(d!==null||g!==void 0){for(var b=g===void 0?[]:bo(g);d!==null;)d.e.f&ue||b.push(d),d=d.next;var Y=b.length;if(Y>0){var et=h===0?r:null;Yc(n,b,et,m)}}J.first=n.first&&n.first.e,J.last=v&&v.e}function Jc(e,n,r,a){eu(e.v,n),e.i=r}function Qc(e,n,r,a,u,f,h,m,_){var d=Ur;try{var g=(_&uc)!==0,v=(_&fc)===0,w=g?v?Vn(u):Mt(u):u,P=_&lc?Mt(h):h,E={i:P,v:w,k:f,a:null,e:null,prev:r,next:a};return Ur=E,E.e=Ui(()=>m(e,w,P),gc),E.e.prev=r&&r.e,E.e.next=a&&a.e,r===null?n.first=E:(r.next=E,r.e.next=E.e),a!==null&&(a.prev=E,a.e.prev=E.e),E}finally{Ur=d}}function $s(e,n,r){for(var a=e.next?e.next.e.nodes_start:r,u=n?n.e.nodes_start:r,f=e.e.nodes_start;f!==a;){var h=qn(f);u.before(f),f=h}}function ge(e,n,r){n===null?e.first=r:(n.next=r,n.e.next=r&&r.e),r!==null&&(r.prev=n,r.e.prev=n&&n.e)}function th(e,n,r,a,u){var m;var f=(m=n.$$slots)==null?void 0:m[r],h=!1;f===!0&&(f=n.children,h=!0),f===void 0?u!==null&&u(e):f(e,h?()=>a:a)}function eh(e,n,r){$n(()=>{var a=ze(()=>n(e,r==null?void 0:r())||{});if(a!=null&&a.destroy)return()=>a.destroy()})}function ih(e,n){if(n){const r=document.body;e.autofocus=!0,Kn(()=>{document.activeElement===r&&e.focus()})}}function zn(e,n,r,a){var u=e.__attributes??(e.__attributes={});u[n]!==(u[n]=r)&&(n==="loading"&&(e[Kf]=r),r==null?e.removeAttribute(n):typeof r!="string"&&Pu(e).includes(n)?e[n]=r:e.setAttribute(n,r))}function nh(e,n,r,a,u=!1,f=!1,h=!1){var m=n||{},_=e.tagName==="OPTION";for(var d in n)d in r||(r[d]=null);r.class=r.class?r.class+" "+a:a;var g=Pu(e),v=e.__attributes??(e.__attributes={}),w=[];for(const N in r){let O=r[N];if(_&&N==="value"&&O==null){e.value=e.__value="",m[N]=O;continue}var P=m[N];if(O!==P){m[N]=O;var E=N[0]+N[1];if(E!=="$$")if(E==="on"){const q={},it="$$"+N;let z=N.slice(2);var A=Uc(z);if(Rc(z)&&(z=z.slice(0,-7),q.capture=!0),!A&&P){if(O!=null)continue;e.removeEventListener(z,m[it],q),m[it]=null}if(O!=null)if(A)e[`__${z}`]=O,bu([z]);else{let b=function(Y){m[N].call(this,Y)};var U=b;n?m[it]=ro(z,e,b,q):w.push([N,O,()=>m[it]=ro(z,e,b,q)])}}else if(N==="style"&&O!=null)e.style.cssText=O+"";else if(N==="autofocus")ih(e,!!O);else if(N==="__value"||N==="value"&&O!=null)e.value=e[N]=e.__value=O;else{var M=N;u||(M=Gc(M)),O==null&&!f?(v[N]=null,e.removeAttribute(N)):g.includes(M)&&(f||typeof O!="string")?e[M]=O:typeof O!="function"&&zn(e,M,O)}}}return n||Kn(()=>{if(e.isConnected)for(const[N,O,q]of w)m[N]===O&&q()}),m}var Ys=new Map;function Pu(e){var n=Ys.get(e.nodeName);if(n)return n;Ys.set(e.nodeName,n=[]);for(var r,a=On(e);a.constructor.name!=="Element";){r=Ka(a);for(var u in r)r[u].set&&n.push(u);a=On(a)}return n}function Ks(e,n){return e===n||(e==null?void 0:e[ri])===n}function Xs(e={},n,r,a){return $n(()=>{var u,f;return Yn(()=>{u=f,f=[],ze(()=>{e!==r(...f)&&(n(e,...f),u&&Ks(r(...u),e)&&n(null,...u))})}),()=>{Kn(()=>{f&&Ks(r(...f),e)&&n(null,...f)})}}),e}function Lu(e=!1){const n=ut,r=n.l.u;if(!r)return;let a=()=>Bi(n.s);if(e){let u=0,f={};const h=Ut(()=>{let m=!1;const _=n.s;for(const d in _)_[d]!==f[d]&&(f[d]=_[d],m=!0);return m&&u++,u});a=()=>B(h)}r.b.length&&Pc(()=>{Js(n,a),Kr(r.b)}),Xr(()=>{const u=ze(()=>r.m.map(Vf));return()=>{for(const f of u)typeof f=="function"&&f()}}),r.a.length&&Xr(()=>{Js(n,a),Kr(r.a)})}function Js(e,n){if(e.l.s)for(const r of e.l.s)B(r);n()}const rh={get(e,n){if(!e.exclude.includes(n))return B(e.version),n in e.special?e.special[n]():e.props[n]},set(e,n,r){return n in e.special||(e.special[n]=yt({get[n](){return e.props[n]}},n,nu)),e.special[n](r),js(e.version),!0},getOwnPropertyDescriptor(e,n){if(!e.exclude.includes(n)&&n in e.props)return{enumerable:!0,configurable:!0,value:e.props[n]}},deleteProperty(e,n){return e.exclude.includes(n)||(e.exclude.push(n),js(e.version)),!0},has(e,n){return e.exclude.includes(n)?!1:n in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(n=>!e.exclude.includes(n))}};function Qs(e,n){return new Proxy({props:e,exclude:n,special:{},version:Mt(0)},rh)}function ta(e){for(var n=J,r=J;n!==null&&!(n.f&($t|ji));)n=n.parent;try{return xe(n),e()}finally{xe(r)}}function yt(e,n,r,a){var it;var u=(r&cc)!==0,f=(r&hc)!==0,h=(r&dc)!==0,m=(r&pc)!==0,_=e[n],d=(it=ni(e,n))==null?void 0:it.set,g=a,v=!0,w=!1,P=()=>(w=!0,v&&(v=!1,m?g=ze(a):g=a),g);_===void 0&&a!==void 0&&(d&&f&&ic(),_=P(),d&&d(_));var E;if(f)E=()=>{var z=e[n];return z===void 0?P():(v=!0,w=!1,z)};else{var A=ta(()=>(u?Ut:xc)(()=>e[n]));A.f|=$f,E=()=>{var z=B(A);return z!==void 0&&(g=void 0),z===void 0?g:z}}if(!(r&nu))return E;if(d){var M=e.$$legacy;return function(z,b){return arguments.length>0?((!f||!b||M)&&d(b?E():z),z):E()}}var U=!1,N=!1,O=Vn(_),q=ta(()=>Ut(()=>{var z=E(),b=B(O),Y=rt;return U||z===void 0&&Y.f&li?(U=!1,N=!0,b):(N=!1,O.v=z)}));return u||(q.equals=So),function(z,b){var Y=B(q);if(arguments.length>0){const et=b?B(q):f&&h?Je(z):z;return q.equals(et)||(U=!0,gt(O,et),w&&g!==void 0&&(g=et),B(q)),z}return Y}}function oh(e,n,r){if(e==null)return n(void 0),Yr;const a=e.subscribe(n,r);return a.unsubscribe?()=>a.unsubscribe():a}function sh(e,n,r){const a=r[n]??(r[n]={store:null,source:Vn(void 0),unsubscribe:Yr});if(a.store!==e)if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=Yr;else{var u=!0;a.unsubscribe=oh(e,f=>{u?a.source.v=f:gt(a.source,f)}),u=!1}return B(a.source)}function ah(){const e={};return fu(()=>{for(var n in e)e[n].unsubscribe()}),e}function uh(e){ut===null&&Ao(),ut.l!==null?hh(ut).m.push(e):Xr(()=>{const n=ze(e);if(typeof n=="function")return n})}function lh(e){ut===null&&Ao(),uh(()=>()=>ze(e))}function fh(e,n,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(e,{detail:n,bubbles:r,cancelable:a})}function ch(){const e=ut;return e===null&&Ao(),(n,r,a)=>{var f;const u=(f=e.s.$$events)==null?void 0:f[n];if(u){const h=jn(u)?u.slice():[u],m=fh(n,r,a);for(const _ of h)_.call(e.x,m);return!m.defaultPrevented}return!0}}function hh(e){var n=e.l;return n.u??(n.u={a:[],b:[],m:[]})}const dh="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(dh);let Vt=[],pe=0;const xn=4;let An=0,ko=e=>{let n=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(a){return r.lc=n.push(a),()=>{for(let f=pe+xn;f<Vt.length;)Vt[f]===a?Vt.splice(f,xn):f+=xn;let u=n.indexOf(a);~u&&(n.splice(u,1),--r.lc||r.off())}},notify(a,u){An++;let f=!Vt.length;for(let h of n)Vt.push(h,r.value,a,u);if(f){for(pe=0;pe<Vt.length;pe+=xn)Vt[pe](Vt[pe+1],Vt[pe+2],Vt[pe+3]);Vt.length=0}},off(){},set(a){let u=r.value;u!==a&&(r.value=a,r.notify(u))},subscribe(a){let u=r.listen(a);return a(r.value),u},value:e};return r};const ph=5,bn=6,Pn=10;let mh=(e,n,r,a)=>(e.events=e.events||{},e.events[r+Pn]||(e.events[r+Pn]=a(u=>{e.events[r].reduceRight((f,h)=>(h(f),f),{shared:{},...u})})),e.events[r]=e.events[r]||[],e.events[r].push(n),()=>{let u=e.events[r],f=u.indexOf(n);u.splice(f,1),u.length||(delete e.events[r],e.events[r+Pn](),delete e.events[r+Pn])}),_h=1e3,gh=(e,n)=>mh(e,a=>{let u=n(a);u&&e.events[bn].push(u)},ph,a=>{let u=e.listen;e.listen=(...h)=>(!e.lc&&!e.active&&(e.active=!0,a()),u(...h));let f=e.off;return e.events[bn]=[],e.off=()=>{f(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let h of e.events[bn])h();e.events[bn]=[]}},_h)},()=>{e.listen=u,e.off=f}}),vh=(e,n,r)=>{Array.isArray(e)||(e=[e]);let a,u,f=()=>{if(u===An)return;u=An;let d=e.map(g=>g.get());if(!a||d.some((g,v)=>g!==a[v])){a=d;let g=n(...d);g&&g.then&&g.t?g.then(v=>{a===d&&h.set(v)}):(h.set(g),u=An)}},h=ko(void 0),m=h.get;h.get=()=>(f(),m());let _=f;return gh(h,()=>{let d=e.map(g=>g.listen(_));return f(),()=>{for(let g of d)g()}}),h},yh=(e,n)=>vh(e,n);var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var so={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(r,a){a(n)})(wh,function(r){var a="1.9.4";function u(t){var i,o,s,l;for(o=1,s=arguments.length;o<s;o++){l=arguments[o];for(i in l)t[i]=l[i]}return t}var f=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function h(t,i){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var s=o.call(arguments,2);return function(){return t.apply(i,s.length?s.concat(o.call(arguments)):arguments)}}var m=0;function _(t){return"_leaflet_id"in t||(t._leaflet_id=++m),t._leaflet_id}function d(t,i,o){var s,l,c,p;return p=function(){s=!1,l&&(c.apply(o,l),l=!1)},c=function(){s?l=arguments:(t.apply(o,arguments),setTimeout(p,i),s=!0)},c}function g(t,i,o){var s=i[1],l=i[0],c=s-l;return t===s&&o?t:((t-l)%c+c)%c+l}function v(){return!1}function w(t,i){if(i===!1)return t;var o=Math.pow(10,i===void 0?6:i);return Math.round(t*o)/o}function P(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function E(t){return P(t).split(/\s+/)}function A(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?f(t.options):{});for(var o in i)t.options[o]=i[o];return t.options}function M(t,i,o){var s=[];for(var l in t)s.push(encodeURIComponent(o?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!i||i.indexOf("?")===-1?"?":"&")+s.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function N(t,i){return t.replace(U,function(o,s){var l=i[s];if(l===void 0)throw new Error("No value provided for variable "+o);return typeof l=="function"&&(l=l(i)),l})}var O=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function q(t,i){for(var o=0;o<t.length;o++)if(t[o]===i)return o;return-1}var it="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function Y(t){var i=+new Date,o=Math.max(0,16-(i-b));return b=i+o,window.setTimeout(t,o)}var et=window.requestAnimationFrame||z("RequestAnimationFrame")||Y,ft=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ot(t,i,o){if(o&&et===Y)t.call(i);else return et.call(window,h(t,i))}function wt(t){t&&ft.call(window,t)}var Le={__proto__:null,extend:u,create:f,bind:h,get lastId(){return m},stamp:_,throttle:d,wrapNum:g,falseFn:v,formatNum:w,trim:P,splitWords:E,setOptions:A,getParamString:M,template:N,isArray:O,indexOf:q,emptyImageUrl:it,requestFn:et,cancelFn:ft,requestAnimFrame:ot,cancelAnimFrame:wt};function Ot(){}Ot.extend=function(t){var i=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,s=f(o);s.constructor=i,i.prototype=s;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(i[l]=this[l]);return t.statics&&u(i,t.statics),t.includes&&(sr(t.includes),u.apply(null,[s].concat(t.includes))),u(s,t),delete s.statics,delete s.includes,s.options&&(s.options=o.options?f(o.options):{},u(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var c=0,p=s._initHooks.length;c<p;c++)s._initHooks[c].call(this)}},i},Ot.include=function(t){var i=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},Ot.mergeOptions=function(t){return u(this.prototype.options,t),this},Ot.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function sr(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=O(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ct={on:function(t,i,o){if(typeof t=="object")for(var s in t)this._on(s,t[s],i);else{t=E(t);for(var l=0,c=t.length;l<c;l++)this._on(t[l],i,o)}return this},off:function(t,i,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],i);else{t=E(t);for(var l=arguments.length===1,c=0,p=t.length;c<p;c++)l?this._off(t[c]):this._off(t[c],i,o)}return this},_on:function(t,i,o,s){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,o)===!1){o===this&&(o=void 0);var l={fn:i,ctx:o};s&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,i,o){var s,l,c;if(this._events&&(s=this._events[t],!!s)){if(arguments.length===1){if(this._firingCount)for(l=0,c=s.length;l<c;l++)s[l].fn=v;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var p=this._listens(t,i,o);if(p!==!1){var y=s[p];this._firingCount&&(y.fn=v,this._events[t]=s=s.slice()),s.splice(p,1)}}},fire:function(t,i,o){if(!this.listens(t,o))return this;var s=u({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var c=0,p=l.length;c<p;c++){var y=l[c],x=y.fn;y.once&&this.off(t,x,y.ctx),x.call(y.ctx||this,s)}this._firingCount--}}return o&&this._propagateEvent(s),this},listens:function(t,i,o,s){typeof t!="string"&&console.warn('"string" type argument expected');var l=i;typeof i!="function"&&(s=!!i,l=void 0,o=void 0);var c=this._events&&this._events[t];if(c&&c.length&&this._listens(t,l,o)!==!1)return!0;if(s){for(var p in this._eventParents)if(this._eventParents[p].listens(t,i,o,s))return!0}return!1},_listens:function(t,i,o){if(!this._events)return!1;var s=this._events[t]||[];if(!i)return!!s.length;o===this&&(o=void 0);for(var l=0,c=s.length;l<c;l++)if(s[l].fn===i&&s[l].ctx===o)return l;return!1},once:function(t,i,o){if(typeof t=="object")for(var s in t)this._on(s,t[s],i,!0);else{t=E(t);for(var l=0,c=t.length;l<c;l++)this._on(t[l],i,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[_(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[_(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};Ct.addEventListener=Ct.on,Ct.removeEventListener=Ct.clearAllEventListeners=Ct.off,Ct.addOneTimeEventListener=Ct.once,Ct.fireEvent=Ct.fire,Ct.hasEventListeners=Ct.listens;var Se=Ot.extend(Ct);function F(t,i,o){this.x=o?Math.round(t):t,this.y=o?Math.round(i):i}var $i=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new F(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new F(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$i(this.x),this.y=$i(this.y),this},distanceTo:function(t){t=R(t);var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},equals:function(t){return t=R(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function R(t,i,o){return t instanceof F?t:O(t)?new F(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new F(t.x,t.y):new F(t,i,o)}function st(t,i){if(t)for(var o=i?[t,i]:t,s=0,l=o.length;s<l;s++)this.extend(o[s])}st.prototype={extend:function(t){var i,o;if(!t)return this;if(t instanceof F||typeof t[0]=="number"||"x"in t)i=o=R(t);else if(t=_t(t),i=t.min,o=t.max,!i||!o)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=o.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,o;return typeof t[0]=="number"||t instanceof F?t=R(t):t=_t(t),t instanceof st?(i=t.min,o=t.max):i=o=t,i.x>=this.min.x&&o.x<=this.max.x&&i.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=_t(t);var i=this.min,o=this.max,s=t.min,l=t.max,c=l.x>=i.x&&s.x<=o.x,p=l.y>=i.y&&s.y<=o.y;return c&&p},overlaps:function(t){t=_t(t);var i=this.min,o=this.max,s=t.min,l=t.max,c=l.x>i.x&&s.x<o.x,p=l.y>i.y&&s.y<o.y;return c&&p},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,o=this.max,s=Math.abs(i.x-o.x)*t,l=Math.abs(i.y-o.y)*t;return _t(R(i.x-s,i.y-l),R(o.x+s,o.y+l))},equals:function(t){return t?(t=_t(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function _t(t,i){return!t||t instanceof st?t:new st(t,i)}function Pt(t,i){if(t)for(var o=i?[t,i]:t,s=0,l=o.length;s<l;s++)this.extend(o[s])}Pt.prototype={extend:function(t){var i=this._southWest,o=this._northEast,s,l;if(t instanceof tt)s=t,l=t;else if(t instanceof Pt){if(s=t._southWest,l=t._northEast,!s||!l)return this}else return t?this.extend($(t)||nt(t)):this;return!i&&!o?(this._southWest=new tt(s.lat,s.lng),this._northEast=new tt(l.lat,l.lng)):(i.lat=Math.min(s.lat,i.lat),i.lng=Math.min(s.lng,i.lng),o.lat=Math.max(l.lat,o.lat),o.lng=Math.max(l.lng,o.lng)),this},pad:function(t){var i=this._southWest,o=this._northEast,s=Math.abs(i.lat-o.lat)*t,l=Math.abs(i.lng-o.lng)*t;return new Pt(new tt(i.lat-s,i.lng-l),new tt(o.lat+s,o.lng+l))},getCenter:function(){return new tt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new tt(this.getNorth(),this.getWest())},getSouthEast:function(){return new tt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof tt||"lat"in t?t=$(t):t=nt(t);var i=this._southWest,o=this._northEast,s,l;return t instanceof Pt?(s=t.getSouthWest(),l=t.getNorthEast()):s=l=t,s.lat>=i.lat&&l.lat<=o.lat&&s.lng>=i.lng&&l.lng<=o.lng},intersects:function(t){t=nt(t);var i=this._southWest,o=this._northEast,s=t.getSouthWest(),l=t.getNorthEast(),c=l.lat>=i.lat&&s.lat<=o.lat,p=l.lng>=i.lng&&s.lng<=o.lng;return c&&p},overlaps:function(t){t=nt(t);var i=this._southWest,o=this._northEast,s=t.getSouthWest(),l=t.getNorthEast(),c=l.lat>i.lat&&s.lat<o.lat,p=l.lng>i.lng&&s.lng<o.lng;return c&&p},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=nt(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(t,i){return t instanceof Pt?t:new Pt(t,i)}function tt(t,i,o){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,o!==void 0&&(this.alt=+o)}tt.prototype={equals:function(t,i){if(!t)return!1;t=$(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+w(this.lat,t)+", "+w(this.lng,t)+")"},distanceTo:function(t){return ct.distance(this,$(t))},wrap:function(){return ct.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,o=i/Math.cos(Math.PI/180*this.lat);return nt([this.lat-i,this.lng-o],[this.lat+i,this.lng+o])},clone:function(){return new tt(this.lat,this.lng,this.alt)}};function $(t,i,o){return t instanceof tt?t:O(t)&&typeof t[0]!="object"?t.length===3?new tt(t[0],t[1],t[2]):t.length===2?new tt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new tt(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new tt(t,i,o)}var Gt={latLngToPoint:function(t,i){var o=this.projection.project(t),s=this.scale(i);return this.transformation._transform(o,s)},pointToLatLng:function(t,i){var o=this.scale(i),s=this.transformation.untransform(t,o);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,o=this.scale(t),s=this.transformation.transform(i.min,o),l=this.transformation.transform(i.max,o);return new st(s,l)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?g(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?g(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new tt(o,i,s)},wrapLatLngBounds:function(t){var i=t.getCenter(),o=this.wrapLatLng(i),s=i.lat-o.lat,l=i.lng-o.lng;if(s===0&&l===0)return t;var c=t.getSouthWest(),p=t.getNorthEast(),y=new tt(c.lat-s,c.lng-l),x=new tt(p.lat-s,p.lng-l);return new Pt(y,x)}},ct=u({},Gt,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var o=Math.PI/180,s=t.lat*o,l=i.lat*o,c=Math.sin((i.lat-t.lat)*o/2),p=Math.sin((i.lng-t.lng)*o/2),y=c*c+Math.cos(s)*Math.cos(l)*p*p,x=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return this.R*x}}),Yi=6378137,mi={R:Yi,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,o=this.MAX_LATITUDE,s=Math.max(Math.min(o,t.lat),-o),l=Math.sin(s*i);return new F(this.R*t.lng*i,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var i=180/Math.PI;return new tt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=Yi*Math.PI;return new st([-t,-t],[t,t])}()};function _i(t,i,o,s){if(O(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=o,this._d=s}_i.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new F((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function Te(t,i,o,s){return new _i(t,i,o,s)}var gi=u({},ct,{code:"EPSG:3857",projection:mi,transformation:function(){var t=.5/(Math.PI*mi.R);return Te(t,.5,-t,.5)}()}),ar=u({},gi,{code:"EPSG:900913"});function Ki(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Xi(t,i){var o="",s,l,c,p,y,x;for(s=0,c=t.length;s<c;s++){for(y=t[s],l=0,p=y.length;l<p;l++)x=y[l],o+=(l?"L":"M")+x.x+" "+x.y;o+=i?k.svg?"z":"x":""}return o||"M0 0"}var Fe=document.documentElement.style,kt="ActiveXObject"in window,ur=kt&&!document.addEventListener,C="msLaunchUri"in navigator&&!("documentMode"in document),j=Kt("webkit"),Lt=Kt("android"),Ht=Kt("android 2")||Kt("android 3"),ce=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lr=Lt&&Kt("Google")&&ce<537&&!("AudioNode"in window),vi=!!window.opera,Ji=!C&&Kt("chrome"),Qi=Kt("gecko")&&!j&&!vi&&!kt,fr=!Ji&&Kt("safari"),tn=Kt("phantom"),Zo="OTransition"in Fe,bl=navigator.platform.indexOf("Win")===0,Go=kt&&"transition"in Fe,cr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ht,Ho="MozPerspective"in Fe,Pl=!window.L_DISABLE_3D&&(Go||cr||Ho)&&!Zo&&!tn,yi=typeof orientation<"u"||Kt("mobile"),Ll=yi&&j,Sl=yi&&cr,Wo=!window.PointerEvent&&window.MSPointerEvent,jo=!!(window.PointerEvent||Wo),Vo="ontouchstart"in window||!!window.TouchEvent,Tl=!window.L_NO_TOUCH&&(Vo||jo),Cl=yi&&vi,El=yi&&Qi,Il=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Al=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,i),window.removeEventListener("testPassiveEventSupport",v,i)}catch{}return t}(),Ml=function(){return!!document.createElement("canvas").getContext}(),hr=!!(document.createElementNS&&Ki("svg").createSVGRect),Ol=!!hr&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),kl=!hr&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),Dl=navigator.platform.indexOf("Mac")===0,Bl=navigator.platform.indexOf("Linux")===0;function Kt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var k={ie:kt,ielt9:ur,edge:C,webkit:j,android:Lt,android23:Ht,androidStock:lr,opera:vi,chrome:Ji,gecko:Qi,safari:fr,phantom:tn,opera12:Zo,win:bl,ie3d:Go,webkit3d:cr,gecko3d:Ho,any3d:Pl,mobile:yi,mobileWebkit:Ll,mobileWebkit3d:Sl,msPointer:Wo,pointer:jo,touch:Tl,touchNative:Vo,mobileOpera:Cl,mobileGecko:El,retina:Il,passiveEvents:Al,canvas:Ml,svg:hr,vml:kl,inlineSvg:Ol,mac:Dl,linux:Bl},qo=k.msPointer?"MSPointerDown":"pointerdown",$o=k.msPointer?"MSPointerMove":"pointermove",Yo=k.msPointer?"MSPointerUp":"pointerup",Ko=k.msPointer?"MSPointerCancel":"pointercancel",dr={touchstart:qo,touchmove:$o,touchend:Yo,touchcancel:Ko},Xo={touchstart:Zl,touchmove:en,touchend:en,touchcancel:en},Ue={},Jo=!1;function Nl(t,i,o){return i==="touchstart"&&Ul(),Xo[i]?(o=Xo[i].bind(this,o),t.addEventListener(dr[i],o,!1),o):(console.warn("wrong event specified:",i),v)}function zl(t,i,o){if(!dr[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(dr[i],o,!1)}function Rl(t){Ue[t.pointerId]=t}function Fl(t){Ue[t.pointerId]&&(Ue[t.pointerId]=t)}function Qo(t){delete Ue[t.pointerId]}function Ul(){Jo||(document.addEventListener(qo,Rl,!0),document.addEventListener($o,Fl,!0),document.addEventListener(Yo,Qo,!0),document.addEventListener(Ko,Qo,!0),Jo=!0)}function en(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var o in Ue)i.touches.push(Ue[o]);i.changedTouches=[i],t(i)}}function Zl(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&xt(i),en(t,i)}function Gl(t){var i={},o,s;for(s in t)o=t[s],i[s]=o&&o.bind?o.bind(t):o;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var Hl=200;function Wl(t,i){t.addEventListener("dblclick",i);var o=0,s;function l(c){if(c.detail!==1){s=c.detail;return}if(!(c.pointerType==="mouse"||c.sourceCapabilities&&!c.sourceCapabilities.firesTouchEvents)){var p=rs(c);if(!(p.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!p.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var y=Date.now();y-o<=Hl?(s++,s===2&&i(Gl(c))):s=1,o=y}}}return t.addEventListener("click",l),{dblclick:i,simDblclick:l}}function jl(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var pr=on(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wi=on(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ts=wi==="webkitTransition"||wi==="OTransition"?wi+"End":"transitionend";function es(t){return typeof t=="string"?document.getElementById(t):t}function xi(t,i){var o=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!o||o==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);o=s?s[i]:null}return o==="auto"?null:o}function Q(t,i,o){var s=document.createElement(t);return s.className=i||"",o&&o.appendChild(s),s}function lt(t){var i=t.parentNode;i&&i.removeChild(t)}function nn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ze(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function Ge(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function mr(t,i){if(t.classList!==void 0)return t.classList.contains(i);var o=rn(t);return o.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(o)}function W(t,i){if(t.classList!==void 0)for(var o=E(i),s=0,l=o.length;s<l;s++)t.classList.add(o[s]);else if(!mr(t,i)){var c=rn(t);_r(t,(c?c+" ":"")+i)}}function ht(t,i){t.classList!==void 0?t.classList.remove(i):_r(t,P((" "+rn(t)+" ").replace(" "+i+" "," ")))}function _r(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function rn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function zt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&Vl(t,i)}function Vl(t,i){var o=!1,s="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(s)}catch{if(i===1)return}i=Math.round(i*100),o?(o.Enabled=i!==100,o.Opacity=i):t.style.filter+=" progid:"+s+"(opacity="+i+")"}function on(t){for(var i=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in i)return t[o];return!1}function Ce(t,i,o){var s=i||new F(0,0);t.style[pr]=(k.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(o?" scale("+o+")":"")}function dt(t,i){t._leaflet_pos=i,k.any3d?Ce(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function Ee(t){return t._leaflet_pos||new F(0,0)}var bi,Pi,gr;if("onselectstart"in document)bi=function(){H(window,"selectstart",xt)},Pi=function(){at(window,"selectstart",xt)};else{var Li=on(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);bi=function(){if(Li){var t=document.documentElement.style;gr=t[Li],t[Li]="none"}},Pi=function(){Li&&(document.documentElement.style[Li]=gr,gr=void 0)}}function vr(){H(window,"dragstart",xt)}function yr(){at(window,"dragstart",xt)}var sn,wr;function xr(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(an(),sn=t,wr=t.style.outlineStyle,t.style.outlineStyle="none",H(window,"keydown",an))}function an(){sn&&(sn.style.outlineStyle=wr,sn=void 0,wr=void 0,at(window,"keydown",an))}function is(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function br(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var ql={__proto__:null,TRANSFORM:pr,TRANSITION:wi,TRANSITION_END:ts,get:es,getStyle:xi,create:Q,remove:lt,empty:nn,toFront:Ze,toBack:Ge,hasClass:mr,addClass:W,removeClass:ht,setClass:_r,getClass:rn,setOpacity:zt,testProp:on,setTransform:Ce,setPosition:dt,getPosition:Ee,get disableTextSelection(){return bi},get enableTextSelection(){return Pi},disableImageDrag:vr,enableImageDrag:yr,preventOutline:xr,restoreOutline:an,getSizedParentNode:is,getScale:br};function H(t,i,o,s){if(i&&typeof i=="object")for(var l in i)Lr(t,l,i[l],o);else{i=E(i);for(var c=0,p=i.length;c<p;c++)Lr(t,i[c],o,s)}return this}var Xt="_leaflet_events";function at(t,i,o,s){if(arguments.length===1)ns(t),delete t[Xt];else if(i&&typeof i=="object")for(var l in i)Sr(t,l,i[l],o);else if(i=E(i),arguments.length===2)ns(t,function(y){return q(i,y)!==-1});else for(var c=0,p=i.length;c<p;c++)Sr(t,i[c],o,s);return this}function ns(t,i){for(var o in t[Xt]){var s=o.split(/\d/)[0];(!i||i(s))&&Sr(t,s,null,null,o)}}var Pr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Lr(t,i,o,s){var l=i+_(o)+(s?"_"+_(s):"");if(t[Xt]&&t[Xt][l])return this;var c=function(y){return o.call(s||t,y||window.event)},p=c;!k.touchNative&&k.pointer&&i.indexOf("touch")===0?c=Nl(t,i,c):k.touch&&i==="dblclick"?c=Wl(t,c):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(Pr[i]||i,c,k.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(c=function(y){y=y||window.event,Cr(t,y)&&p(y)},t.addEventListener(Pr[i],c,!1)):t.addEventListener(i,p,!1):t.attachEvent("on"+i,c),t[Xt]=t[Xt]||{},t[Xt][l]=c}function Sr(t,i,o,s,l){l=l||i+_(o)+(s?"_"+_(s):"");var c=t[Xt]&&t[Xt][l];if(!c)return this;!k.touchNative&&k.pointer&&i.indexOf("touch")===0?zl(t,i,c):k.touch&&i==="dblclick"?jl(t,c):"removeEventListener"in t?t.removeEventListener(Pr[i]||i,c,!1):t.detachEvent("on"+i,c),t[Xt][l]=null}function Ie(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Tr(t){return Lr(t,"wheel",Ie),this}function Si(t){return H(t,"mousedown touchstart dblclick contextmenu",Ie),t._leaflet_disable_click=!0,this}function xt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ae(t){return xt(t),Ie(t),this}function rs(t){if(t.composedPath)return t.composedPath();for(var i=[],o=t.target;o;)i.push(o),o=o.parentNode;return i}function os(t,i){if(!i)return new F(t.clientX,t.clientY);var o=br(i),s=o.boundingClientRect;return new F((t.clientX-s.left)/o.x-i.clientLeft,(t.clientY-s.top)/o.y-i.clientTop)}var $l=k.linux&&k.chrome?window.devicePixelRatio:k.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ss(t){return k.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/$l:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Cr(t,i){var o=i.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var Yl={__proto__:null,on:H,off:at,stopPropagation:Ie,disableScrollPropagation:Tr,disableClickPropagation:Si,preventDefault:xt,stop:Ae,getPropagationPath:rs,getMousePosition:os,getWheelDelta:ss,isExternalTarget:Cr,addListener:H,removeListener:at},as=Se.extend({run:function(t,i,o,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=Ee(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ot(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,o=this._duration*1e3;i<o?this._runFrame(this._easeOut(i/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var o=this._startPos.add(this._offset.multiplyBy(t));i&&o._round(),dt(this._el,o),this.fire("step")},_complete:function(){wt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),X=Se.extend({options:{crs:gi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=A(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView($(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wi&&k.any3d&&!k.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),H(this._proxy,ts,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,o){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter($(t),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=u({animate:o.animate},o.zoom),o.pan=u({animate:o.animate,duration:o.duration},o.pan));var s=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,o.zoom):this._tryAnimatedPan(t,o.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(k.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(k.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,o){var s=this.getZoomScale(i),l=this.getSize().divideBy(2),c=t instanceof F?t:this.latLngToContainerPoint(t),p=c.subtract(l).multiplyBy(1-1/s),y=this.containerPointToLatLng(l.add(p));return this.setView(y,i,{zoom:o})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():nt(t);var o=R(i.paddingTopLeft||i.padding||[0,0]),s=R(i.paddingBottomRight||i.padding||[0,0]),l=this.getBoundsZoom(t,!1,o.add(s));if(l=typeof i.maxZoom=="number"?Math.min(i.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var c=s.subtract(o).divideBy(2),p=this.project(t.getSouthWest(),l),y=this.project(t.getNorthEast(),l),x=this.unproject(p.add(y).divideBy(2).add(c),l);return{center:x,zoom:l}},fitBounds:function(t,i){if(t=nt(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,i);return this.setView(o.center,o.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=R(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new as,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){W(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,o){if(o=o||{},o.animate===!1||!k.any3d)return this.setView(t,i,o);this._stop();var s=this.project(this.getCenter()),l=this.project(t),c=this.getSize(),p=this._zoom;t=$(t),i=i===void 0?p:i;var y=Math.max(c.x,c.y),x=y*this.getZoomScale(p,i),S=l.distanceTo(s)||1,I=1.42,D=I*I;function V(pt){var yn=pt?-1:1,Rf=pt?x:y,Ff=x*x-y*y+yn*D*D*S*S,Uf=2*Rf*D*S,Rr=Ff/Uf,Zs=Math.sqrt(Rr*Rr+1)-Rr,Zf=Zs<1e-9?-18:Math.log(Zs);return Zf}function Et(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function vt(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function Ft(pt){return Et(pt)/vt(pt)}var At=V(0);function $e(pt){return y*(vt(At)/vt(At+I*pt))}function Df(pt){return y*(vt(At)*Ft(At+I*pt)-Et(At))/D}function Bf(pt){return 1-Math.pow(1-pt,1.5)}var Nf=Date.now(),Fs=(V(1)-At)/I,zf=o.duration?1e3*o.duration:1e3*Fs*.8;function Us(){var pt=(Date.now()-Nf)/zf,yn=Bf(pt)*Fs;pt<=1?(this._flyToFrame=ot(Us,this),this._move(this.unproject(s.add(l.subtract(s).multiplyBy(Df(yn)/S)),p),this.getScaleZoom(y/$e(yn),p),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),Us.call(this),this},flyToBounds:function(t,i){var o=this._getBoundsCenterZoom(t,i);return this.flyTo(o.center,o.zoom,i)},setMaxBounds:function(t){return t=nt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var o=this.getCenter(),s=this._limitCenter(o,this._zoom,nt(t));return o.equals(s)||this.panTo(s,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var o=R(i.paddingTopLeft||i.padding||[0,0]),s=R(i.paddingBottomRight||i.padding||[0,0]),l=this.project(this.getCenter()),c=this.project(t),p=this.getPixelBounds(),y=_t([p.min.add(o),p.max.subtract(s)]),x=y.getSize();if(!y.contains(c)){this._enforcingBounds=!0;var S=c.subtract(y.getCenter()),I=y.extend(c).getSize().subtract(x);l.x+=S.x<0?-I.x:I.x,l.y+=S.y<0?-I.y:I.y,this.panTo(this.unproject(l),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),s=i.divideBy(2).round(),l=o.divideBy(2).round(),c=s.subtract(l);return!c.x&&!c.y?this:(t.animate&&t.pan?this.panBy(c):(t.pan&&this._rawPanBy(c),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=h(this._handleGeolocationResponse,this),o=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,o=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,o=t.coords.longitude,s=new tt(i,o),l=s.toBounds(t.coords.accuracy*2),c=this._locateOptions;if(c.setView){var p=this.getBoundsZoom(l);this.setView(s,c.maxZoom?Math.min(p,c.maxZoom):p)}var y={latlng:s,bounds:l,timestamp:t.timestamp};for(var x in t.coords)typeof t.coords[x]=="number"&&(y[x]=t.coords[x]);this.fire("locationfound",y)}},addHandler:function(t,i){if(!i)return this;var o=this[t]=new i(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(wt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)lt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=Q("div",o,i||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new Pt(i,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,o){t=nt(t),o=R(o||[0,0]);var s=this.getZoom()||0,l=this.getMinZoom(),c=this.getMaxZoom(),p=t.getNorthWest(),y=t.getSouthEast(),x=this.getSize().subtract(o),S=_t(this.project(y,s),this.project(p,s)).getSize(),I=k.any3d?this.options.zoomSnap:1,D=x.x/S.x,V=x.y/S.y,Et=i?Math.max(D,V):Math.min(D,V);return s=this.getScaleZoom(Et,s),I&&(s=Math.round(s/(I/100))*(I/100),s=i?Math.ceil(s/I)*I:Math.floor(s/I)*I),Math.max(l,Math.min(c,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var o=this._getTopLeftPoint(t,i);return new st(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var o=this.options.crs;return i=i===void 0?this._zoom:i,o.scale(t)/o.scale(i)},getScaleZoom:function(t,i){var o=this.options.crs;i=i===void 0?this._zoom:i;var s=o.zoom(t*o.scale(i));return isNaN(s)?1/0:s},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint($(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(R(t),i)},layerPointToLatLng:function(t){var i=R(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project($(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng($(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(nt(t))},distance:function(t,i){return this.options.crs.distance($(t),$(i))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint($(t)))},mouseEventToContainerPoint:function(t){return os(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=es(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");H(i,"scroll",this._onScroll,this),this._containerId=_(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&k.any3d,W(t,"leaflet-container"+(k.touch?" leaflet-touch":"")+(k.retina?" leaflet-retina":"")+(k.ielt9?" leaflet-oldie":"")+(k.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=xi(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),dt(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(W(t.markerPane,"leaflet-zoom-hide"),W(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,o){dt(this._mapPane,new F(0,0));var s=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var l=this._zoom!==i;this._moveStart(l,o)._move(t,i)._moveEnd(l),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,o,s){i===void 0&&(i=this._zoom);var l=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),s?o&&o.pinch&&this.fire("zoom",o):((l||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return wt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){dt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[_(this._container)]=this;var i=t?at:H;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),k.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){wt(this._resizeRequest),this._resizeRequest=ot(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var o=[],s,l=i==="mouseout"||i==="mouseover",c=t.target||t.srcElement,p=!1;c;){if(s=this._targets[_(c)],s&&(i==="click"||i==="preclick")&&this._draggableMoved(s)){p=!0;break}if(s&&s.listens(i,!0)&&(l&&!Cr(c,t)||(o.push(s),l))||c===this._container)break;c=c.parentNode}return!o.length&&!p&&!l&&this.listens(i,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var o=t.type;o==="mousedown"&&xr(i),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,o){if(t.type==="click"){var s=u({},t);s.type="preclick",this._fireDOMEvent(s,s.type,o)}var l=this._findEventTargets(t,i);if(o){for(var c=[],p=0;p<o.length;p++)o[p].listens(i,!0)&&c.push(o[p]);l=c.concat(l)}if(l.length){i==="contextmenu"&&xt(t);var y=l[0],x={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var S=y.getLatLng&&(!y._radius||y._radius<=10);x.containerPoint=S?this.latLngToContainerPoint(y.getLatLng()):this.mouseEventToContainerPoint(t),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=S?y.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(p=0;p<l.length;p++)if(l[p].fire(i,x,!0),x.originalEvent._stopped||l[p].options.bubblingMouseEvents===!1&&q(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return Ee(this._mapPane)||new F(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var o=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var o=this.getSize()._divideBy(2);return this.project(t,i)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,o){var s=this._getNewPixelOrigin(o,i);return this.project(t,i)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,i,o){var s=this._getNewPixelOrigin(o,i);return _t([this.project(t.getSouthWest(),i)._subtract(s),this.project(t.getNorthWest(),i)._subtract(s),this.project(t.getSouthEast(),i)._subtract(s),this.project(t.getNorthEast(),i)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,o){if(!o)return t;var s=this.project(t,i),l=this.getSize().divideBy(2),c=new st(s.subtract(l),s.add(l)),p=this._getBoundsOffset(c,o,i);return Math.abs(p.x)<=1&&Math.abs(p.y)<=1?t:this.unproject(s.add(p),i)},_limitOffset:function(t,i){if(!i)return t;var o=this.getPixelBounds(),s=new st(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(s,i))},_getBoundsOffset:function(t,i,o){var s=_t(this.project(i.getNorthEast(),o),this.project(i.getSouthWest(),o)),l=s.min.subtract(t.min),c=s.max.subtract(t.max),p=this._rebound(l.x,-c.x),y=this._rebound(l.y,-c.y);return new F(p,y)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),o=this.getMaxZoom(),s=k.any3d?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(i,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var o=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,i),!0)},_createAnimProxy:function(){var t=this._proxy=Q("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var o=pr,s=this._proxy.style[o];Ce(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),s===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();Ce(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(i),l=this._getCenterOffset(t)._divideBy(1-1/s);return o.animate!==!0&&!this.getSize().contains(l)?!1:(ot(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,o,s){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,W(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Kl(t,i){return new X(t,i)}var Wt=Ot.extend({options:{position:"topright"},initialize:function(t){A(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),o=this.getPosition(),s=t._controlCorners[o];return W(i,"leaflet-control"),o.indexOf("bottom")!==-1?s.insertBefore(i,s.firstChild):s.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ti=function(t){return new Wt(t)};X.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",o=this._controlContainer=Q("div",i+"control-container",this._container);function s(l,c){var p=i+l+" "+i+c;t[l+c]=Q("div",p,o)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)lt(this._controlCorners[t]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var us=Wt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,o,s){return o<s?-1:s<o?1:0}},initialize:function(t,i,o){A(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in i)this._addLayer(i[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Wt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(_(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){W(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(W(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=Q("div",t),o=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Si(i),Tr(i);var s=this._section=Q("section",t+"-list");o&&(this._map.on("click",this.collapse,this),H(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=Q("a",t+"-toggle",i);l.href="#",l.title="Layers",l.setAttribute("role","button"),H(l,{keydown:function(c){c.keyCode===13&&this._expandSafely()},click:function(c){xt(c),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=Q("div",t+"-base",s),this._separator=Q("div",t+"-separator",s),this._overlaysList=Q("div",t+"-overlays",s),i.appendChild(s)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&_(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:o}),this.options.sortLayers&&this._layers.sort(h(function(s,l){return this.options.sortFunction(s.layer,l.layer,s.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;nn(this._baseLayersList),nn(this._overlaysList),this._layerControlInputs=[];var t,i,o,s,l=0;for(o=0;o<this._layers.length;o++)s=this._layers[o],this._addItem(s),i=i||s.overlay,t=t||!s.overlay,l+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(_(t.target)),o=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,i)},_createRadioElement:function(t,i){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=o,s.firstChild},_addItem:function(t){var i=document.createElement("label"),o=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=o):s=this._createRadioElement("leaflet-base-layers_"+_(this),o),this._layerControlInputs.push(s),s.layerId=_(t.layer),H(s,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var c=document.createElement("span");i.appendChild(c),c.appendChild(s),c.appendChild(l);var p=t.overlay?this._overlaysList:this._baseLayersList;return p.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,o,s=[],l=[];this._handlingClick=!0;for(var c=t.length-1;c>=0;c--)i=t[c],o=this._getLayer(i.layerId).layer,i.checked?s.push(o):i.checked||l.push(o);for(c=0;c<l.length;c++)this._map.hasLayer(l[c])&&this._map.removeLayer(l[c]);for(c=0;c<s.length;c++)this._map.hasLayer(s[c])||this._map.addLayer(s[c]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,o,s=this._map.getZoom(),l=t.length-1;l>=0;l--)i=t[l],o=this._getLayer(i.layerId).layer,i.disabled=o.options.minZoom!==void 0&&s<o.options.minZoom||o.options.maxZoom!==void 0&&s>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,H(t,"click",xt),this.expand();var i=this;setTimeout(function(){at(t,"click",xt),i._preventClick=!1})}}),Xl=function(t,i,o){return new us(t,i,o)},Er=Wt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",o=Q("div",i+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,i+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,i+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,o,s,l){var c=Q("a",o,s);return c.innerHTML=t,c.href="#",c.title=i,c.setAttribute("role","button"),c.setAttribute("aria-label",i),Si(c),H(c,"click",Ae),H(c,"click",l,this),H(c,"click",this._refocusOnMap,this),c},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";ht(this._zoomInButton,i),ht(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(W(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(W(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});X.mergeOptions({zoomControl:!0}),X.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Er,this.addControl(this.zoomControl))});var Jl=function(t){return new Er(t)},ls=Wt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",o=Q("div",i),s=this.options;return this._addScales(s,i+"-line",o),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,o){t.metric&&(this._mScale=Q("div",i,o)),t.imperial&&(this._iScale=Q("div",i,o))},_update:function(){var t=this._map,i=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),o=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,o,i/t)},_updateImperial:function(t){var i=t*3.2808399,o,s,l;i>5280?(o=i/5280,s=this._getRoundNum(o),this._updateScale(this._iScale,s+" mi",s/o)):(l=this._getRoundNum(i),this._updateScale(this._iScale,l+" ft",l/i))},_updateScale:function(t,i,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),o=t/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}}),Ql=function(t){return new ls(t)},tf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ir=Wt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(k.inlineSvg?tf+" ":"")+"Leaflet</a>"},initialize:function(t){A(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Q("div","leaflet-control-attribution"),Si(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});X.mergeOptions({attributionControl:!0}),X.addInitHook(function(){this.options.attributionControl&&new Ir().addTo(this)});var ef=function(t){return new Ir(t)};Wt.Layers=us,Wt.Zoom=Er,Wt.Scale=ls,Wt.Attribution=Ir,Ti.layers=Xl,Ti.zoom=Jl,Ti.scale=Ql,Ti.attribution=ef;var Jt=Ot.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Jt.addTo=function(t,i){return t.addHandler(i,this),this};var nf={Events:Ct},fs=k.touch?"touchstart mousedown":"mousedown",he=Se.extend({options:{clickTolerance:3},initialize:function(t,i,o,s){A(this,s),this._element=t,this._dragStartTarget=i||t,this._preventOutline=o},enable:function(){this._enabled||(H(this._dragStartTarget,fs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(he._dragging===this&&this.finishDrag(!0),at(this._dragStartTarget,fs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!mr(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){he._dragging===this&&this.finishDrag();return}if(!(he._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(he._dragging=this,this._preventOutline&&xr(this._element),vr(),bi(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,o=is(this._element);this._startPoint=new F(i.clientX,i.clientY),this._startPos=Ee(this._element),this._parentScale=br(o);var s=t.type==="mousedown";H(document,s?"mousemove":"touchmove",this._onMove,this),H(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,o=new F(i.clientX,i.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,xt(t),this._moved||(this.fire("dragstart"),this._moved=!0,W(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),W(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),dt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),at(document,"mousemove touchmove",this._onMove,this),at(document,"mouseup touchend touchcancel",this._onUp,this),yr(),Pi();var i=this._moved&&this._moving;this._moving=!1,he._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function cs(t,i,o){var s,l=[1,4,2,8],c,p,y,x,S,I,D,V;for(c=0,I=t.length;c<I;c++)t[c]._code=Me(t[c],i);for(y=0;y<4;y++){for(D=l[y],s=[],c=0,I=t.length,p=I-1;c<I;p=c++)x=t[c],S=t[p],x._code&D?S._code&D||(V=un(S,x,D,i,o),V._code=Me(V,i),s.push(V)):(S._code&D&&(V=un(S,x,D,i,o),V._code=Me(V,i),s.push(V)),s.push(x));t=s}return t}function hs(t,i){var o,s,l,c,p,y,x,S,I;if(!t||t.length===0)throw new Error("latlngs not passed");Rt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var D=$([0,0]),V=nt(t),Et=V.getNorthWest().distanceTo(V.getSouthWest())*V.getNorthEast().distanceTo(V.getNorthWest());Et<1700&&(D=Ar(t));var vt=t.length,Ft=[];for(o=0;o<vt;o++){var At=$(t[o]);Ft.push(i.project($([At.lat-D.lat,At.lng-D.lng])))}for(y=x=S=0,o=0,s=vt-1;o<vt;s=o++)l=Ft[o],c=Ft[s],p=l.y*c.x-c.y*l.x,x+=(l.x+c.x)*p,S+=(l.y+c.y)*p,y+=p*3;y===0?I=Ft[0]:I=[x/y,S/y];var $e=i.unproject(R(I));return $([$e.lat+D.lat,$e.lng+D.lng])}function Ar(t){for(var i=0,o=0,s=0,l=0;l<t.length;l++){var c=$(t[l]);i+=c.lat,o+=c.lng,s++}return $([i/s,o/s])}var rf={__proto__:null,clipPolygon:cs,polygonCenter:hs,centroid:Ar};function ds(t,i){if(!i||!t.length)return t.slice();var o=i*i;return t=af(t,o),t=sf(t,o),t}function ps(t,i,o){return Math.sqrt(Ci(t,i,o,!0))}function of(t,i,o){return Ci(t,i,o)}function sf(t,i){var o=t.length,s=typeof Uint8Array<"u"?Uint8Array:Array,l=new s(o);l[0]=l[o-1]=1,Mr(t,l,i,0,o-1);var c,p=[];for(c=0;c<o;c++)l[c]&&p.push(t[c]);return p}function Mr(t,i,o,s,l){var c=0,p,y,x;for(y=s+1;y<=l-1;y++)x=Ci(t[y],t[s],t[l],!0),x>c&&(p=y,c=x);c>o&&(i[p]=1,Mr(t,i,o,s,p),Mr(t,i,o,p,l))}function af(t,i){for(var o=[t[0]],s=1,l=0,c=t.length;s<c;s++)uf(t[s],t[l])>i&&(o.push(t[s]),l=s);return l<c-1&&o.push(t[c-1]),o}var ms;function _s(t,i,o,s,l){var c=s?ms:Me(t,o),p=Me(i,o),y,x,S;for(ms=p;;){if(!(c|p))return[t,i];if(c&p)return!1;y=c||p,x=un(t,i,y,o,l),S=Me(x,o),y===c?(t=x,c=S):(i=x,p=S)}}function un(t,i,o,s,l){var c=i.x-t.x,p=i.y-t.y,y=s.min,x=s.max,S,I;return o&8?(S=t.x+c*(x.y-t.y)/p,I=x.y):o&4?(S=t.x+c*(y.y-t.y)/p,I=y.y):o&2?(S=x.x,I=t.y+p*(x.x-t.x)/c):o&1&&(S=y.x,I=t.y+p*(y.x-t.x)/c),new F(S,I,l)}function Me(t,i){var o=0;return t.x<i.min.x?o|=1:t.x>i.max.x&&(o|=2),t.y<i.min.y?o|=4:t.y>i.max.y&&(o|=8),o}function uf(t,i){var o=i.x-t.x,s=i.y-t.y;return o*o+s*s}function Ci(t,i,o,s){var l=i.x,c=i.y,p=o.x-l,y=o.y-c,x=p*p+y*y,S;return x>0&&(S=((t.x-l)*p+(t.y-c)*y)/x,S>1?(l=o.x,c=o.y):S>0&&(l+=p*S,c+=y*S)),p=t.x-l,y=t.y-c,s?p*p+y*y:new F(l,c)}function Rt(t){return!O(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function gs(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rt(t)}function vs(t,i){var o,s,l,c,p,y,x,S;if(!t||t.length===0)throw new Error("latlngs not passed");Rt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var I=$([0,0]),D=nt(t),V=D.getNorthWest().distanceTo(D.getSouthWest())*D.getNorthEast().distanceTo(D.getNorthWest());V<1700&&(I=Ar(t));var Et=t.length,vt=[];for(o=0;o<Et;o++){var Ft=$(t[o]);vt.push(i.project($([Ft.lat-I.lat,Ft.lng-I.lng])))}for(o=0,s=0;o<Et-1;o++)s+=vt[o].distanceTo(vt[o+1])/2;if(s===0)S=vt[0];else for(o=0,c=0;o<Et-1;o++)if(p=vt[o],y=vt[o+1],l=p.distanceTo(y),c+=l,c>s){x=(c-s)/l,S=[y.x-x*(y.x-p.x),y.y-x*(y.y-p.y)];break}var At=i.unproject(R(S));return $([At.lat+I.lat,At.lng+I.lng])}var lf={__proto__:null,simplify:ds,pointToSegmentDistance:ps,closestPointOnSegment:of,clipSegment:_s,_getEdgeIntersection:un,_getBitCode:Me,_sqClosestPointOnSegment:Ci,isFlat:Rt,_flat:gs,polylineCenter:vs},Or={project:function(t){return new F(t.lng,t.lat)},unproject:function(t){return new tt(t.y,t.x)},bounds:new st([-180,-90],[180,90])},kr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new st([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,o=this.R,s=t.lat*i,l=this.R_MINOR/o,c=Math.sqrt(1-l*l),p=c*Math.sin(s),y=Math.tan(Math.PI/4-s/2)/Math.pow((1-p)/(1+p),c/2);return s=-o*Math.log(Math.max(y,1e-10)),new F(t.lng*i*o,s)},unproject:function(t){for(var i=180/Math.PI,o=this.R,s=this.R_MINOR/o,l=Math.sqrt(1-s*s),c=Math.exp(-t.y/o),p=Math.PI/2-2*Math.atan(c),y=0,x=.1,S;y<15&&Math.abs(x)>1e-7;y++)S=l*Math.sin(p),S=Math.pow((1-S)/(1+S),l/2),x=Math.PI/2-2*Math.atan(c*S)-p,p+=x;return new tt(p*i,t.x*i/o)}},ff={__proto__:null,LonLat:Or,Mercator:kr,SphericalMercator:mi},cf=u({},ct,{code:"EPSG:3395",projection:kr,transformation:function(){var t=.5/(Math.PI*kr.R);return Te(t,.5,-t,.5)}()}),ys=u({},ct,{code:"EPSG:4326",projection:Or,transformation:Te(1/180,1,-1/180,.5)}),hf=u({},Gt,{projection:Or,transformation:Te(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var o=i.lng-t.lng,s=i.lat-t.lat;return Math.sqrt(o*o+s*s)},infinite:!0});Gt.Earth=ct,Gt.EPSG3395=cf,Gt.EPSG3857=gi,Gt.EPSG900913=ar,Gt.EPSG4326=ys,Gt.Simple=hf;var jt=Se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[_(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[_(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var o=this.getEvents();i.on(o,this),this.once("remove",function(){i.off(o,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});X.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=_(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=_(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return _(t)in this._layers},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},_addLayers:function(t){t=t?O(t)?t:[t]:[];for(var i=0,o=t.length;i<o;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[_(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=_(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,o=this._getZoomSpan();for(var s in this._zoomBoundLayers){var l=this._zoomBoundLayers[s].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),i=l.maxZoom===void 0?i:Math.max(i,l.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var He=jt.extend({initialize:function(t,i){A(this,i),this._layers={};var o,s;if(t)for(o=0,s=t.length;o<s;o++)this.addLayer(t[o])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),o,s;for(o in this._layers)s=this._layers[o],s[t]&&s[t].apply(s,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return _(t)}}),df=function(t,i){return new He(t,i)},ie=He.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),He.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),He.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Pt;for(var i in this._layers){var o=this._layers[i];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),pf=function(t,i){return new ie(t,i)},We=Ot.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){A(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(o,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(s,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(t,i){var o=this.options,s=o[i+"Size"];typeof s=="number"&&(s=[s,s]);var l=R(s),c=R(i==="shadow"&&o.shadowAnchor||o.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(o.className||""),c&&(t.style.marginLeft=-c.x+"px",t.style.marginTop=-c.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return k.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function mf(t){return new We(t)}var Ei=We.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ei.imagePath!="string"&&(Ei.imagePath=this._detectIconPath()),(this.options.imagePath||Ei.imagePath)+We.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(o,s,l){var c=s.exec(o);return c&&c[l]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Q("div","leaflet-default-icon-path",document.body),i=xi(t,"background-image")||xi(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),ws=Jt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new he(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),W(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,o=i._map,s=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,c=Ee(i._icon),p=o.getPixelBounds(),y=o.getPixelOrigin(),x=_t(p.min._subtract(y).add(l),p.max._subtract(y).subtract(l));if(!x.contains(c)){var S=R((Math.max(x.max.x,c.x)-x.max.x)/(p.max.x-x.max.x)-(Math.min(x.min.x,c.x)-x.min.x)/(p.min.x-x.min.x),(Math.max(x.max.y,c.y)-x.max.y)/(p.max.y-x.max.y)-(Math.min(x.min.y,c.y)-x.min.y)/(p.min.y-x.min.y)).multiplyBy(s);o.panBy(S,{animate:!1}),this._draggable._newPos._add(S),this._draggable._startPos._add(S),dt(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ot(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(wt(this._panRequest),this._panRequest=ot(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,o=i._shadow,s=Ee(i._icon),l=i._map.layerPointToLatLng(s);o&&dt(o,s),i._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){wt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ln=jt.extend({options:{icon:new Ei,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){A(this,i),this._latlng=$(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=$(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),s=!1;o!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),W(o,i),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&H(o,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),c=!1;l!==this._shadow&&(this._removeShadow(),c=!0),l&&(W(l,i),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&c&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&at(this._icon,"focus",this._panOnFocus,this),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&dt(this._icon,t),this._shadow&&dt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(W(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ws)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ws(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&zt(this._icon,t),this._shadow&&zt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,o=i.iconSize?R(i.iconSize):R(0,0),s=i.iconAnchor?R(i.iconAnchor):R(0,0);t.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:o.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _f(t,i){return new ln(t,i)}var de=jt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return A(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fn=de.extend({options:{fill:!0,radius:10},initialize:function(t,i){A(this,i),this._latlng=$(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=$(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return de.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,o=this._clickTolerance(),s=[t+o,i+o];this._pxBounds=new st(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gf(t,i){return new fn(t,i)}var Dr=fn.extend({initialize:function(t,i,o){if(typeof i=="number"&&(i=u({},o,{radius:i})),A(this,i),this._latlng=$(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Pt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:de.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,o=this._map,s=o.options.crs;if(s.distance===ct.distance){var l=Math.PI/180,c=this._mRadius/ct.R/l,p=o.project([i+c,t]),y=o.project([i-c,t]),x=p.add(y).divideBy(2),S=o.unproject(x).lat,I=Math.acos((Math.cos(c*l)-Math.sin(i*l)*Math.sin(S*l))/(Math.cos(i*l)*Math.cos(S*l)))/l;(isNaN(I)||I===0)&&(I=c/Math.cos(Math.PI/180*i)),this._point=x.subtract(o.getPixelOrigin()),this._radius=isNaN(I)?0:x.x-o.project([S,t-I]).x,this._radiusY=x.y-p.y}else{var D=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(D).x}this._updateBounds()}});function vf(t,i,o){return new Dr(t,i,o)}var ne=de.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){A(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,o=null,s=Ci,l,c,p=0,y=this._parts.length;p<y;p++)for(var x=this._parts[p],S=1,I=x.length;S<I;S++){l=x[S-1],c=x[S];var D=s(t,l,c,!0);D<i&&(i=D,o=s(t,l,c))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vs(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=$(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Pt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Rt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],o=Rt(t),s=0,l=t.length;s<l;s++)o?(i[s]=$(t[s]),this._bounds.extend(i[s])):i[s]=this._convertLatLngs(t[s]);return i},_project:function(){var t=new st;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new F(t,t);this._rawPxBounds&&(this._pxBounds=new st([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,o){var s=t[0]instanceof tt,l=t.length,c,p;if(s){for(p=[],c=0;c<l;c++)p[c]=this._map.latLngToLayerPoint(t[c]),o.extend(p[c]);i.push(p)}else for(c=0;c<l;c++)this._projectLatlngs(t[c],i,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,o,s,l,c,p,y,x;for(o=0,l=0,c=this._rings.length;o<c;o++)for(x=this._rings[o],s=0,p=x.length;s<p-1;s++)y=_s(x[s],x[s+1],t,s,!0),y&&(i[l]=i[l]||[],i[l].push(y[0]),(y[1]!==x[s+1]||s===p-2)&&(i[l].push(y[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,o=0,s=t.length;o<s;o++)t[o]=ds(t[o],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var o,s,l,c,p,y,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,c=this._parts.length;o<c;o++)for(y=this._parts[o],s=0,p=y.length,l=p-1;s<p;l=s++)if(!(!i&&s===0)&&ps(t,y[l],y[s])<=x)return!0;return!1}});function yf(t,i){return new ne(t,i)}ne._flat=gs;var je=ne.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return hs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=ne.prototype._convertLatLngs.call(this,t),o=i.length;return o>=2&&i[0]instanceof tt&&i[0].equals(i[o-1])&&i.pop(),i},_setLatLngs:function(t){ne.prototype._setLatLngs.call(this,t),Rt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,o=new F(i,i);if(t=new st(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,l=this._rings.length,c;s<l;s++)c=cs(this._rings[s],t,!0),c.length&&this._parts.push(c)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,o,s,l,c,p,y,x,S;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,x=this._parts.length;c<x;c++)for(o=this._parts[c],p=0,S=o.length,y=S-1;p<S;y=p++)s=o[p],l=o[y],s.y>t.y!=l.y>t.y&&t.x<(l.x-s.x)*(t.y-s.y)/(l.y-s.y)+s.x&&(i=!i);return i||ne.prototype._containsPoint.call(this,t,!0)}});function wf(t,i){return new je(t,i)}var re=ie.extend({initialize:function(t,i){A(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=O(t)?t:t.features,o,s,l;if(i){for(o=0,s=i.length;o<s;o++)l=i[o],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var c=this.options;if(c.filter&&!c.filter(t))return this;var p=cn(t,c);return p?(p.feature=pn(t),p.defaultOptions=p.options,this.resetStyle(p),c.onEachFeature&&c.onEachFeature(t,p),this.addLayer(p)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function cn(t,i){var o=t.type==="Feature"?t.geometry:t,s=o?o.coordinates:null,l=[],c=i&&i.pointToLayer,p=i&&i.coordsToLatLng||Br,y,x,S,I;if(!s&&!o)return null;switch(o.type){case"Point":return y=p(s),xs(c,t,y,i);case"MultiPoint":for(S=0,I=s.length;S<I;S++)y=p(s[S]),l.push(xs(c,t,y,i));return new ie(l);case"LineString":case"MultiLineString":return x=hn(s,o.type==="LineString"?0:1,p),new ne(x,i);case"Polygon":case"MultiPolygon":return x=hn(s,o.type==="Polygon"?1:2,p),new je(x,i);case"GeometryCollection":for(S=0,I=o.geometries.length;S<I;S++){var D=cn({geometry:o.geometries[S],type:"Feature",properties:t.properties},i);D&&l.push(D)}return new ie(l);case"FeatureCollection":for(S=0,I=o.features.length;S<I;S++){var V=cn(o.features[S],i);V&&l.push(V)}return new ie(l);default:throw new Error("Invalid GeoJSON object.")}}function xs(t,i,o,s){return t?t(i,o):new ln(o,s&&s.markersInheritOptions&&s)}function Br(t){return new tt(t[1],t[0],t[2])}function hn(t,i,o){for(var s=[],l=0,c=t.length,p;l<c;l++)p=i?hn(t[l],i-1,o):(o||Br)(t[l]),s.push(p);return s}function Nr(t,i){return t=$(t),t.alt!==void 0?[w(t.lng,i),w(t.lat,i),w(t.alt,i)]:[w(t.lng,i),w(t.lat,i)]}function dn(t,i,o,s){for(var l=[],c=0,p=t.length;c<p;c++)l.push(i?dn(t[c],Rt(t[c])?0:i-1,o,s):Nr(t[c],s));return!i&&o&&l.length>0&&l.push(l[0].slice()),l}function Ve(t,i){return t.feature?u({},t.feature,{geometry:i}):pn(i)}function pn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var zr={toGeoJSON:function(t){return Ve(this,{type:"Point",coordinates:Nr(this.getLatLng(),t)})}};ln.include(zr),Dr.include(zr),fn.include(zr),ne.include({toGeoJSON:function(t){var i=!Rt(this._latlngs),o=dn(this._latlngs,i?1:0,!1,t);return Ve(this,{type:(i?"Multi":"")+"LineString",coordinates:o})}}),je.include({toGeoJSON:function(t){var i=!Rt(this._latlngs),o=i&&!Rt(this._latlngs[0]),s=dn(this._latlngs,o?2:i?1:0,!0,t);return i||(s=[s]),Ve(this,{type:(o?"Multi":"")+"Polygon",coordinates:s})}}),He.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(o){i.push(o.toGeoJSON(t).geometry.coordinates)}),Ve(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var o=i==="GeometryCollection",s=[];return this.eachLayer(function(l){if(l.toGeoJSON){var c=l.toGeoJSON(t);if(o)s.push(c.geometry);else{var p=pn(c);p.type==="FeatureCollection"?s.push.apply(s,p.features):s.push(p)}}}),o?Ve(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function bs(t,i){return new re(t,i)}var xf=bs,mn=jt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,o){this._url=t,this._bounds=nt(i),A(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(W(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ze(this._image),this},bringToBack:function(){return this._map&&Ge(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=nt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:Q("img");if(W(i,"leaflet-image-layer"),this._zoomAnimated&&W(i,"leaflet-zoom-animated"),this.options.className&&W(i,this.options.className),i.onselectstart=v,i.onmousemove=v,i.onload=h(this.fire,this,"load"),i.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ce(this._image,o,i)},_reset:function(){var t=this._image,i=new st(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=i.getSize();dt(t,i.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){zt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),bf=function(t,i,o){return new mn(t,i,o)},Ps=mn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:Q("video");if(W(i,"leaflet-image-layer"),this._zoomAnimated&&W(i,"leaflet-zoom-animated"),this.options.className&&W(i,this.options.className),i.onselectstart=v,i.onmousemove=v,i.onloadeddata=h(this.fire,this,"load"),t){for(var o=i.getElementsByTagName("source"),s=[],l=0;l<o.length;l++)s.push(o[l].src);this._url=o.length>0?s:[i.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var c=0;c<this._url.length;c++){var p=Q("source");p.src=this._url[c],i.appendChild(p)}}});function Pf(t,i,o){return new Ps(t,i,o)}var Ls=mn.extend({_initImage:function(){var t=this._image=this._url;W(t,"leaflet-image-layer"),this._zoomAnimated&&W(t,"leaflet-zoom-animated"),this.options.className&&W(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function Lf(t,i,o){return new Ls(t,i,o)}var Qt=jt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof tt||O(t))?(this._latlng=$(t),A(this,i)):(A(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&zt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&zt(this._container,1),this.bringToFront(),this.options.interactive&&(W(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(zt(this._container,0),this._removeTimeout=setTimeout(h(lt,void 0,this._container),200)):lt(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=$(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ze(this._container),this},bringToBack:function(){return this._map&&Ge(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof ie){i=null;var o=this._source._layers;for(var s in o)if(o[s]._map){i=o[s];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=R(this.options.offset),o=this._getAnchor();this._zoomAnimated?dt(this._container,t.add(o)):i=i.add(t).add(o);var s=this._containerBottom=-i.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=s+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});X.include({_initOverlay:function(t,i,o,s){var l=i;return l instanceof t||(l=new t(s).setContent(i)),o&&l.setLatLng(o),l}}),jt.include({_initOverlay:function(t,i,o,s){var l=o;return l instanceof t?(A(l,s),l._source=this):(l=i&&!s?i:new t(s,this),l.setContent(o)),l}});var _n=Qt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Qt.prototype.openOn.call(this,t)},onAdd:function(t){Qt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof de||this._source.on("preclick",Ie))},onRemove:function(t){Qt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof de||this._source.off("preclick",Ie))},getEvents:function(){var t=Qt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=Q("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=Q("div",t+"-content-wrapper",i);if(this._contentNode=Q("div",t+"-content",o),Si(i),Tr(this._contentNode),H(i,"contextmenu",Ie),this._tipContainer=Q("div",t+"-tip-container",i),this._tip=Q("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=Q("a",t+"-close-button",i);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',H(s,"click",function(l){xt(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),i.width=o+1+"px",i.whiteSpace="",i.height="";var s=t.offsetHeight,l=this.options.maxHeight,c="leaflet-popup-scrolled";l&&s>l?(i.height=l+"px",W(t,c)):ht(t,c),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();dt(this._container,i.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(xi(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+i,s=this._containerWidth,l=new F(this._containerLeft,-o-this._containerBottom);l._add(Ee(this._container));var c=t.layerPointToContainerPoint(l),p=R(this.options.autoPanPadding),y=R(this.options.autoPanPaddingTopLeft||p),x=R(this.options.autoPanPaddingBottomRight||p),S=t.getSize(),I=0,D=0;c.x+s+x.x>S.x&&(I=c.x+s-S.x+x.x),c.x-I-y.x<0&&(I=c.x-y.x),c.y+o+x.y>S.y&&(D=c.y+o-S.y+x.y),c.y-D-y.y<0&&(D=c.y-y.y),(I||D)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([I,D]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Sf=function(t,i){return new _n(t,i)};X.mergeOptions({closePopupOnClick:!0}),X.include({openPopup:function(t,i,o){return this._initOverlay(_n,t,i,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),jt.include({bindPopup:function(t,i){return this._popup=this._initOverlay(_n,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof ie||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Ae(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof de)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var gn=Qt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Qt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Qt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Qt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Q("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,o,s=this._map,l=this._container,c=s.latLngToContainerPoint(s.getCenter()),p=s.layerPointToContainerPoint(t),y=this.options.direction,x=l.offsetWidth,S=l.offsetHeight,I=R(this.options.offset),D=this._getAnchor();y==="top"?(i=x/2,o=S):y==="bottom"?(i=x/2,o=0):y==="center"?(i=x/2,o=S/2):y==="right"?(i=0,o=S/2):y==="left"?(i=x,o=S/2):p.x<c.x?(y="right",i=0,o=S/2):(y="left",i=x+(I.x+D.x)*2,o=S/2),t=t.subtract(R(i,o,!0)).add(I).add(D),ht(l,"leaflet-tooltip-right"),ht(l,"leaflet-tooltip-left"),ht(l,"leaflet-tooltip-top"),ht(l,"leaflet-tooltip-bottom"),W(l,"leaflet-tooltip-"+y),dt(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&zt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Tf=function(t,i){return new gn(t,i)};X.include({openTooltip:function(t,i,o){return this._initOverlay(gn,t,i,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),jt.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(gn,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[i](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof ie||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&(H(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),H(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,o,s;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(o),i=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(i)}});var Ss=We.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(nn(i),i.appendChild(o.html)):i.innerHTML=o.html!==!1?o.html:"",o.bgPos){var s=R(o.bgPos);i.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Cf(t){return new Ss(t)}We.Default=Ei;var Ii=jt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:k.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){A(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),lt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ze(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ge(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof F?t:new F(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,o=-t(-1/0,1/0),s=0,l=i.length,c;s<l;s++)c=i[s].style.zIndex,i[s]!==this._container&&c&&(o=t(o,+c));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!k.ielt9){zt(this._container,this.options.opacity);var t=+new Date,i=!1,o=!1;for(var s in this._tiles){var l=this._tiles[s];if(!(!l.current||!l.loaded)){var c=Math.min(1,(t-l.loaded)/200);zt(l.el,c),c<1?i=!0:(l.active?o=!0:this._onOpaqueTile(l),l.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),i&&(wt(this._fadeFrame),this._fadeFrame=ot(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Q("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=i-Math.abs(t-o),this._onUpdateLevel(o)):(lt(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var s=this._levels[t],l=this._map;return s||(s=this._levels[t]={},s.el=Q("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=i,s.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,l.getCenter(),l.getZoom()),v(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,i,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var s=i.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)lt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,o,s){var l=Math.floor(t/2),c=Math.floor(i/2),p=o-1,y=new F(+l,+c);y.z=+p;var x=this._tileCoordsToKey(y),S=this._tiles[x];return S&&S.active?(S.retain=!0,!0):(S&&S.loaded&&(S.retain=!0),p>s?this._retainParent(l,c,p,s):!1)},_retainChildren:function(t,i,o,s){for(var l=2*t;l<2*t+2;l++)for(var c=2*i;c<2*i+2;c++){var p=new F(l,c);p.z=o+1;var y=this._tileCoordsToKey(p),x=this._tiles[y];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);o+1<s&&this._retainChildren(l,c,o+1,s)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,o,s){var l=Math.round(i);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var c=this.options.updateWhenZooming&&l!==this._tileZoom;(!s||c)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,i)},_setZoomTransform:function(t,i,o){var s=this._map.getZoomScale(o,t.zoom),l=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(i,o)).round();k.any3d?Ce(t.el,l,s):dt(t.el,l)},_resetGrid:function(){var t=this._map,i=t.options.crs,o=this._tileSize=this.getTileSize(),s=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],s).x/o.x),Math.ceil(t.project([0,i.wrapLng[1]],s).x/o.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],s).y/o.x),Math.ceil(t.project([i.wrapLat[1],0],s).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,o=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),s=i.getZoomScale(o,this._tileZoom),l=i.project(t,this._tileZoom).floor(),c=i.getSize().divideBy(s*2);return new st(l.subtract(c),l.add(c))},_update:function(t){var i=this._map;if(i){var o=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(s),c=l.getCenter(),p=[],y=this.options.keepBuffer,x=new st(l.getBottomLeft().subtract([y,-y]),l.getTopRight().add([y,-y]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var S in this._tiles){var I=this._tiles[S].coords;(I.z!==this._tileZoom||!x.contains(new F(I.x,I.y)))&&(this._tiles[S].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var D=l.min.y;D<=l.max.y;D++)for(var V=l.min.x;V<=l.max.x;V++){var Et=new F(V,D);if(Et.z=this._tileZoom,!!this._isValidTile(Et)){var vt=this._tiles[this._tileCoordsToKey(Et)];vt?vt.current=!0:p.push(Et)}}if(p.sort(function(At,$e){return At.distanceTo(c)-$e.distanceTo(c)}),p.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ft=document.createDocumentFragment();for(V=0;V<p.length;V++)this._addTile(p[V],Ft);this._level.el.appendChild(Ft)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var o=this._globalTileRange;if(!i.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!i.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return nt(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,o=this.getTileSize(),s=t.scaleBy(o),l=s.add(o),c=i.unproject(s,t.z),p=i.unproject(l,t.z);return[c,p]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),o=new Pt(i[0],i[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),o=new F(+i[0],+i[1]);return o.z=+i[2],o},_removeTile:function(t){var i=this._tiles[t];i&&(lt(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){W(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=v,t.onmousemove=v,k.ielt9&&this.options.opacity<1&&zt(t,this.options.opacity)},_addTile:function(t,i){var o=this._getTilePos(t),s=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&ot(h(this._tileReady,this,t,null,l)),dt(l,o),this._tiles[s]={el:l,coords:t,current:!0},i.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,i,o){i&&this.fire("tileerror",{error:i,tile:o,coords:t});var s=this._tileCoordsToKey(t);o=this._tiles[s],o&&(o.loaded=+new Date,this._map._fadeAnimated?(zt(o.el,0),wt(this._fadeFrame),this._fadeFrame=ot(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),i||(W(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),k.ielt9||!this._map._fadeAnimated?ot(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new F(this._wrapX?g(t.x,this._wrapX):t.x,this._wrapY?g(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new st(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ef(t){return new Ii(t)}var qe=Ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=A(this,i),i.detectRetina&&k.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var o=document.createElement("img");return H(o,"load",h(this._tileOnLoad,this,i,o)),H(o,"error",h(this._tileOnError,this,i,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var i={r:k.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=o),i["-y"]=o}return N(this._url,u(i,this.options))},_tileOnLoad:function(t,i){k.ielt9?setTimeout(h(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,o){var s=this.options.errorTileUrl;s&&i.getAttribute("src")!==s&&(i.src=s),t(o,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,o=this.options.zoomReverse,s=this.options.zoomOffset;return o&&(t=i-t),t+s},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=v,i.onerror=v,!i.complete)){i.src=it;var o=this._tiles[t].coords;lt(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:o})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",it),Ii.prototype._removeTile.call(this,t)},_tileReady:function(t,i,o){if(!(!this._map||o&&o.getAttribute("src")===it))return Ii.prototype._tileReady.call(this,t,i,o)}});function Ts(t,i){return new qe(t,i)}var Cs=qe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var o=u({},this.defaultWmsParams);for(var s in i)s in this.options||(o[s]=i[s]);i=A(this,i);var l=i.detectRetina&&k.retina?2:1,c=this.getTileSize();o.width=c.x*l,o.height=c.y*l,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,qe.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),o=this._crs,s=_t(o.project(i[0]),o.project(i[1])),l=s.min,c=s.max,p=(this._wmsVersion>=1.3&&this._crs===ys?[l.y,l.x,c.y,c.x]:[l.x,l.y,c.x,c.y]).join(","),y=qe.prototype.getTileUrl.call(this,t);return y+M(this.wmsParams,y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+p},setParams:function(t,i){return u(this.wmsParams,t),i||this.redraw(),this}});function If(t,i){return new Cs(t,i)}qe.WMS=Cs,Ts.wms=If;var oe=jt.extend({options:{padding:.1},initialize:function(t){A(this,t),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),W(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var o=this._map.getZoomScale(i,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,i),c=s.multiplyBy(-o).add(l).subtract(this._map._getNewPixelOrigin(t,i));k.any3d?Ce(this._container,c,o):dt(this._container,c)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),o=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new st(o,o.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Es=oe.extend({options:{tolerance:0},getEvents:function(){var t=oe.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){oe.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");H(t,"mousemove",this._onMouseMove,this),H(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),H(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){wt(this._redrawRequest),delete this._ctx,lt(this._container),at(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){oe.prototype._update.call(this);var t=this._bounds,i=this._container,o=t.getSize(),s=k.retina?2:1;dt(i,t.min),i.width=s*o.x,i.height=s*o.y,i.style.width=o.x+"px",i.style.height=o.y+"px",k.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){oe.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[_(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,o=i.next,s=i.prev;o?o.prev=s:this._drawLast=s,s?s.next=o:this._drawFirst=o,delete t._order,delete this._layers[_(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),o=[],s,l;for(l=0;l<i.length;l++){if(s=Number(i[l]),isNaN(s))return;o.push(s)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ot(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new st,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var o=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var o,s,l,c,p=t._parts,y=p.length,x=this._ctx;if(y){for(x.beginPath(),o=0;o<y;o++){for(s=0,l=p[o].length;s<l;s++)c=p[o][s],x[s?"lineTo":"moveTo"](c.x,c.y);i&&x.closePath()}this._fillStroke(x,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,o=this._ctx,s=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||s)/s;l!==1&&(o.save(),o.scale(1,l)),o.beginPath(),o.arc(i.x,i.y/l,s,0,Math.PI*2,!1),l!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,i){var o=i.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),o,s,l=this._drawFirst;l;l=l.next)o=l.layer,o.options.interactive&&o._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(s=o);this._fireEvent(s?[s]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(ht(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var o,s,l=this._drawFirst;l;l=l.next)o=l.layer,o.options.interactive&&o._containsPoint(i)&&(s=o);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(W(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,o){this._map._fireDOMEvent(i,o||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var o=i.next,s=i.prev;if(o)o.prev=s;else return;s?s.next=o:o&&(this._drawFirst=o),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var o=i.next,s=i.prev;if(s)s.next=o;else return;o?o.prev=s:s&&(this._drawLast=s),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function Is(t){return k.canvas?new Es(t):null}var Ai=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Af={_initContainer:function(){this._container=Q("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(oe.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Ai("shape");W(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Ai("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;lt(i),t.removeInteractiveTarget(i),delete this._layers[_(t)]},_updateStyle:function(t){var i=t._stroke,o=t._fill,s=t.options,l=t._container;l.stroked=!!s.stroke,l.filled=!!s.fill,s.stroke?(i||(i=t._stroke=Ai("stroke")),l.appendChild(i),i.weight=s.weight+"px",i.color=s.color,i.opacity=s.opacity,s.dashArray?i.dashStyle=O(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=s.lineCap.replace("butt","flat"),i.joinstyle=s.lineJoin):i&&(l.removeChild(i),t._stroke=null),s.fill?(o||(o=t._fill=Ai("fill")),l.appendChild(o),o.color=s.fillColor||s.color,o.opacity=s.fillOpacity):o&&(l.removeChild(o),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),o=Math.round(t._radius),s=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+o+","+s+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){Ze(t._container)},_bringToBack:function(t){Ge(t._container)}},vn=k.vml?Ai:Ki,Mi=oe.extend({_initContainer:function(){this._container=vn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),at(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){oe.prototype._update.call(this);var t=this._bounds,i=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,o.setAttribute("width",i.x),o.setAttribute("height",i.y)),dt(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=vn("path");t.options.className&&W(i,t.options.className),t.options.interactive&&W(i,"leaflet-interactive"),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){lt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[_(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,o=t.options;i&&(o.stroke?(i.setAttribute("stroke",o.color),i.setAttribute("stroke-opacity",o.opacity),i.setAttribute("stroke-width",o.weight),i.setAttribute("stroke-linecap",o.lineCap),i.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?i.setAttribute("stroke-dasharray",o.dashArray):i.removeAttribute("stroke-dasharray"),o.dashOffset?i.setAttribute("stroke-dashoffset",o.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),o.fill?(i.setAttribute("fill",o.fillColor||o.color),i.setAttribute("fill-opacity",o.fillOpacity),i.setAttribute("fill-rule",o.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,Xi(t._parts,i))},_updateCircle:function(t){var i=t._point,o=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||o,l="a"+o+","+s+" 0 1,0 ",c=t._empty()?"M0 0":"M"+(i.x-o)+","+i.y+l+o*2+",0 "+l+-o*2+",0 ";this._setPath(t,c)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){Ze(t._path)},_bringToBack:function(t){Ge(t._path)}});k.vml&&Mi.include(Af);function As(t){return k.svg||k.vml?new Mi(t):null}X.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&Is(t)||As(t)}});var Ms=je.extend({initialize:function(t,i){je.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=nt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Mf(t,i){return new Ms(t,i)}Mi.create=vn,Mi.pointsToPath=Xi,re.geometryToLayer=cn,re.coordsToLatLng=Br,re.coordsToLatLngs=hn,re.latLngToCoords=Nr,re.latLngsToCoords=dn,re.getFeature=Ve,re.asFeature=pn,X.mergeOptions({boxZoom:!0});var Os=Jt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){H(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),bi(),vr(),this._startPoint=this._map.mouseEventToContainerPoint(t),H(document,{contextmenu:Ae,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Q("div","leaflet-zoom-box",this._container),W(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new st(this._point,this._startPoint),o=i.getSize();dt(this._box,i.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(lt(this._box),ht(this._container,"leaflet-crosshair")),Pi(),yr(),at(document,{contextmenu:Ae,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var i=new Pt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});X.addInitHook("addHandler","boxZoom",Os),X.mergeOptions({doubleClickZoom:!0});var ks=Jt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,o=i.getZoom(),s=i.options.zoomDelta,l=t.originalEvent.shiftKey?o-s:o+s;i.options.doubleClickZoom==="center"?i.setZoom(l):i.setZoomAround(t.containerPoint,l)}});X.addInitHook("addHandler","doubleClickZoom",ks),X.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ds=Jt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new he(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}W(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=nt(this._map.options.maxBounds);this._offsetLimit=_t(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),o=this._initialWorldOffset,s=this._draggable._newPos.x,l=(s-i+o)%t+i-o,c=(s+i+o)%t-i-o,p=Math.abs(l+o)<Math.abs(c+o)?l:c;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=p},_onDragEnd:function(t){var i=this._map,o=i.options,s=!o.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),s)i.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),c=(this._lastTime-this._times[0])/1e3,p=o.easeLinearity,y=l.multiplyBy(p/c),x=y.distanceTo([0,0]),S=Math.min(o.inertiaMaxSpeed,x),I=y.multiplyBy(S/x),D=S/(o.inertiaDeceleration*p),V=I.multiplyBy(-D/2).round();!V.x&&!V.y?i.fire("moveend"):(V=i._limitOffset(V,i.options.maxBounds),ot(function(){i.panBy(V,{duration:D,easeLinearity:p,noMoveStart:!0,animate:!0})}))}}});X.addInitHook("addHandler","dragging",Ds),X.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Bs=Jt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),H(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),at(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,o=t.scrollTop||i.scrollTop,s=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},o=this.keyCodes,s,l;for(s=0,l=o.left.length;s<l;s++)i[o.left[s]]=[-1*t,0];for(s=0,l=o.right.length;s<l;s++)i[o.right[s]]=[t,0];for(s=0,l=o.down.length;s<l;s++)i[o.down[s]]=[0,t];for(s=0,l=o.up.length;s<l;s++)i[o.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},o=this.keyCodes,s,l;for(s=0,l=o.zoomIn.length;s<l;s++)i[o.zoomIn[s]]=t;for(s=0,l=o.zoomOut.length;s<l;s++)i[o.zoomOut[s]]=-t},_addHooks:function(){H(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){at(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,o=this._map,s;if(i in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(s=this._panKeys[i],t.shiftKey&&(s=R(s).multiplyBy(3)),o.options.maxBounds&&(s=o._limitOffset(R(s),o.options.maxBounds)),o.options.worldCopyJump){var l=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(s)));o.panTo(l)}else o.panBy(s)}else if(i in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;Ae(t)}}});X.addInitHook("addHandler","keyboard",Bs),X.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ns=Jt.extend({addHooks:function(){H(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=ss(t),o=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),s),Ae(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,c=o?Math.ceil(l/o)*o:l,p=t._limitZoom(i+(this._delta>0?c:-c))-i;this._delta=0,this._startTime=null,p&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+p):t.setZoomAround(this._lastMousePos,i+p))}});X.addInitHook("addHandler","scrollWheelZoom",Ns);var Of=600;X.mergeOptions({tapHold:k.touchNative&&k.safari&&k.mobile,tapTolerance:15});var zs=Jt.extend({addHooks:function(){H(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new F(i.clientX,i.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(H(document,"touchend",xt),H(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),Of),H(document,"touchend touchcancel contextmenu",this._cancel,this),H(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){at(document,"touchend",xt),at(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),at(document,"touchend touchcancel contextmenu",this._cancel,this),at(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new F(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});o._simulated=!0,i.target.dispatchEvent(o)}});X.addInitHook("addHandler","tapHold",zs),X.mergeOptions({touchZoom:k.touch,bounceAtZoomLimits:!0});var Rs=Jt.extend({addHooks:function(){W(this._map._container,"leaflet-touch-zoom"),H(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var o=i.mouseEventToContainerPoint(t.touches[0]),s=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(o.add(s)._divideBy(2))),this._startDist=o.distanceTo(s),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),H(document,"touchmove",this._onTouchMove,this),H(document,"touchend touchcancel",this._onTouchEnd,this),xt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,o=i.mouseEventToContainerPoint(t.touches[0]),s=i.mouseEventToContainerPoint(t.touches[1]),l=o.distanceTo(s)/this._startDist;if(this._zoom=i.getScaleZoom(l,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&l<1||this._zoom>i.getMaxZoom()&&l>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var c=o._add(s)._divideBy(2)._subtract(this._centerPoint);if(l===1&&c.x===0&&c.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(c),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),wt(this._animRequest);var p=h(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ot(p,this,!0),xt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,wt(this._animRequest),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});X.addInitHook("addHandler","touchZoom",Rs),X.BoxZoom=Os,X.DoubleClickZoom=ks,X.Drag=Ds,X.Keyboard=Bs,X.ScrollWheelZoom=Ns,X.TapHold=zs,X.TouchZoom=Rs,r.Bounds=st,r.Browser=k,r.CRS=Gt,r.Canvas=Es,r.Circle=Dr,r.CircleMarker=fn,r.Class=Ot,r.Control=Wt,r.DivIcon=Ss,r.DivOverlay=Qt,r.DomEvent=Yl,r.DomUtil=ql,r.Draggable=he,r.Evented=Se,r.FeatureGroup=ie,r.GeoJSON=re,r.GridLayer=Ii,r.Handler=Jt,r.Icon=We,r.ImageOverlay=mn,r.LatLng=tt,r.LatLngBounds=Pt,r.Layer=jt,r.LayerGroup=He,r.LineUtil=lf,r.Map=X,r.Marker=ln,r.Mixin=nf,r.Path=de,r.Point=F,r.PolyUtil=rf,r.Polygon=je,r.Polyline=ne,r.Popup=_n,r.PosAnimation=as,r.Projection=ff,r.Rectangle=Ms,r.Renderer=oe,r.SVG=Mi,r.SVGOverlay=Ls,r.TileLayer=qe,r.Tooltip=gn,r.Transformation=_i,r.Util=Le,r.VideoOverlay=Ps,r.bind=h,r.bounds=_t,r.canvas=Is,r.circle=vf,r.circleMarker=gf,r.control=Ti,r.divIcon=Cf,r.extend=u,r.featureGroup=pf,r.geoJSON=bs,r.geoJson=xf,r.gridLayer=Ef,r.icon=mf,r.imageOverlay=bf,r.latLng=$,r.latLngBounds=nt,r.layerGroup=df,r.map=Kl,r.marker=_f,r.point=R,r.polygon=wf,r.polyline=yf,r.popup=Sf,r.rectangle=Mf,r.setOptions=A,r.stamp=_,r.svg=As,r.svgOverlay=Lf,r.tileLayer=Ts,r.tooltip=Tf,r.transformation=Te,r.version=a,r.videoOverlay=Pf;var kf=window.L;r.noConflict=function(){return window.L=kf,this},window.L=r})})(so,so.exports);var Gi=so.exports,Do={exports:{}};function Su(e,n=100,r={}){if(typeof e!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(n<0)throw new RangeError("`wait` must not be negative.");const{immediate:a}=typeof r=="boolean"?{immediate:r}:r;let u,f,h,m,_;function d(){const w=u,P=f;return u=void 0,f=void 0,_=e.apply(w,P),_}function g(){const w=Date.now()-m;w<n&&w>=0?h=setTimeout(g,n-w):(h=void 0,a||(_=d()))}const v=function(...w){if(u&&this!==u&&Object.getPrototypeOf(this)===Object.getPrototypeOf(u))throw new Error("Debounced method called with different contexts of the same prototype.");u=this,f=w,m=Date.now();const P=a&&!h;return h||(h=setTimeout(g,n)),P&&(_=d()),_};return Object.defineProperty(v,"isPending",{get(){return h!==void 0}}),v.clear=()=>{h&&(clearTimeout(h),h=void 0)},v.flush=()=>{h&&v.trigger()},v.trigger=()=>{_=d(),v.clear()},v}Do.exports.debounce=Su;Do.exports=Su;var bh=Do.exports;const Ph=xh(bh);var Tu=class{constructor(e){if(Lh(e))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=e,this.byteLength=this.buffer.length}getUint8(e){return this.buffer.readUInt8(e)}getUint16(e,n){return n?this.buffer.readUInt16LE(e):this.buffer.readUInt16BE(e)}getUint32(e,n){return n?this.buffer.readUInt32LE(e):this.buffer.readUInt32BE(e)}getInt32(e,n){return n?this.buffer.readInt32LE(e):this.buffer.readInt32BE(e)}};function Lh(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function ea(e,n,r){try{return new DataView(e,n,r)}catch{return new Tu(e,n,r)}}function G(e,n,r){let a=[];for(let u=0;u<r&&n+u<e.byteLength;u++)a.push(e.getUint8(n+u));return ai(a)}function Qe(e,n){let r=[],a=0;for(;n+a<e.byteLength;){let u=e.getUint8(n+a);if(u===0)break;r.push(u),a++}return ai(r)}function Sh(e,n,r){let a=[];for(let u=0;u<r&&n+u<e.byteLength;u+=2)a.push(e.getUint16(n+u));return a[a.length-1]===0&&a.pop(),ai(a)}function Cu(e,n){let r=e.getUint8(n),a=G(e,n+1,r);return[r,a]}function ai(e){return e.map(n=>String.fromCharCode(n)).join("")}function K(){for(let e=1;e<arguments.length;e++)for(let n in arguments[e])arguments[0][n]=arguments[e][n];return arguments[0]}function Eu(e,n,r){let a=!1;Object.defineProperty(e,n,{get(){return a||(a=!0,Object.defineProperty(e,n,{configurable:!0,enumerable:!0,value:r.apply(e),writable:!0})),e[n]},configurable:!0,enumerable:!0})}function Iu(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(n,r)=>n+String.fromCharCode(r),""));if(!(typeof Buffer>"u"))return typeof Buffer.from<"u"?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function Th(e){let n=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(n),a=>a.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from<"u"?Buffer.from(n,"base64"):new Buffer(n,"base64");let r=decodeURIComponent(n);return typeof Buffer<"u"?typeof Buffer.from<"u"?Buffer.from(r):new Buffer(r):Uint8Array.from(r,a=>a.charCodeAt(0)).buffer}function Ch(e,n,r){return Au(r,n-e.length)+e}function Eh(e,n){return parseInt(e.replace(".",""),n)/Math.pow(n,(e.split(".")[1]||"").length)}function Au(e,n){return new Array(n+1).join(e)}var Rn=void 0,Mu=0;function Ou(e,n,r,a="string"){if(n===Mu&&typeof DecompressionStream=="function"){let u=new DecompressionStream("deflate"),f=new Blob([e]).stream().pipeThrough(u);return a==="dataview"?new Response(f).arrayBuffer().then(h=>new DataView(h)):new Response(f).arrayBuffer().then(h=>new TextDecoder(r).decode(h))}return n!==void 0?Promise.reject(`Unknown compression method ${n}.`):e}var ia={USE_FILE:!0,USE_JFIF:!0,USE_PNG_FILE:!0,USE_EXIF:!0,USE_IPTC:!0,USE_XMP:!0,USE_ICC:!0,USE_MPF:!0,USE_PHOTOSHOP:!0,USE_THUMBNAIL:!0,USE_TIFF:!0,USE_JPEG:!0,USE_PNG:!0,USE_HEIC:!0,USE_AVIF:!0,USE_WEBP:!0,USE_GIF:!0};function mt(e){return e.map(n=>String.fromCharCode(n)).join("")}function ao(e){if(e.length>=8){let n=mt(e.slice(0,8));if(n==="ASCII\0\0\0")return mt(e.slice(8));if(n==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(n==="UNICODE\0")return"[Unicode encoded text]";if(n==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function Fn(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}var Re={BIG_ENDIAN:19789,LITTLE_ENDIAN:18761,getByteOrder:Ih};function Ih(e,n){if(e.getUint16(n)===18761)return 18761;if(e.getUint16(n)===19789)return 19789;throw new Error("Illegal byte order value. Faulty image.")}var na={isTiffFile:Ah,findTiffOffsets:Oh};function Ah(e){return!!e&&e.byteLength>=4&&Mh(e)}function Mh(e){let n=e.getUint16(0)===Re.LITTLE_ENDIAN;return e.getUint16(2,n)===42}function Oh(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}var ra={isJpegFile:$h,findJpegOffsets:Yh},kh=2,Dh=65496,oa=2,Zt=4,St=2,Bh=2,Nh=10,zh=18,sa=33,aa=79,ua=18,Rh=8,uo="ICC_PROFILE\0",ku=Zt+uo.length,Fh=ku+1,la="MPF\0",Du=65472,Bu=65474,Uh=65476,Zh=65499,Gh=65501,Hh=65498,Nu=65504,Bo=65505,zu=65506,Wh=65517,jh=65519,Vh=65534,qh=65535,fa="JFIF",ca="Exif",ha="http://ns.adobe.com/xap/1.0/\0",da="http://ns.adobe.com/xmp/extension/\0",pa="Photoshop 3.0";function $h(e){return!!e&&e.byteLength>=kh&&e.getUint16(0)===Dh}function Yh(e){let n=oa,r,a,u,f,h,m,_,d,g;for(;n+Zt+5<=e.byteLength;){if(Kh(e,n))r=e.getUint16(n+St),a=n+St;else if(Xh(e,n))r=e.getUint16(n+St),u=n+St;else if(td(e,n))r=e.getUint16(n+St),f=n+Bh;else if(ed(e,n))r=e.getUint16(n+St),h=n+Nh;else if(id(e,n))_||(_=[]),r=e.getUint16(n+St),_.push(sd(n,r));else if(rd(e,n))_||(_=[]),r=e.getUint16(n+St),_.push(ad(n,r));else if(ud(e,n))r=e.getUint16(n+St),m=n+zh;else if(Jh(e,n)){r=e.getUint16(n+St);let v=n+ua,w=r-(ua-St),P=e.getUint8(n+ku),E=e.getUint8(n+Fh);d||(d=[]),d.push({offset:v,length:w,chunkNumber:P,chunksTotal:E})}else if(Qh(e,n))r=e.getUint16(n+St),g=n+Rh;else if(ld(e,n))r=e.getUint16(n+St);else if(fd(e,n)){n++;continue}else break;n+=St+r}return{hasAppMarkers:n>oa,fileDataOffset:a||u,jfifDataOffset:f,tiffHeaderOffset:h,iptcDataOffset:m,xmpChunks:_,iccChunks:d,mpfDataOffset:g}}function Kh(e,n){return e.getUint16(n)===Du}function Xh(e,n){return e.getUint16(n)===Bu}function Jh(e,n){let r=uo.length;return e.getUint16(n)===zu&&G(e,n+Zt,r)===uo}function Qh(e,n){let r=la.length;return e.getUint16(n)===zu&&G(e,n+Zt,r)===la}function td(e,n){let r=fa.length;return e.getUint16(n)===Nu&&G(e,n+Zt,r)===fa&&e.getUint8(n+Zt+r)===0}function ed(e,n){let r=ca.length;return e.getUint16(n)===Bo&&G(e,n+Zt,r)===ca&&e.getUint8(n+Zt+r)===0}function id(e,n){return e.getUint16(n)===Bo&&nd(e,n)}function nd(e,n){let r=ha.length;return G(e,n+Zt,r)===ha}function rd(e,n){return e.getUint16(n)===Bo&&od(e,n)}function od(e,n){let r=da.length;return G(e,n+Zt,r)===da}function sd(e,n){return{dataOffset:e+sa,length:n-(sa-St)}}function ad(e,n){return{dataOffset:e+aa,length:n-(aa-St)}}function ud(e,n){let r=pa.length;return e.getUint16(n)===Wh&&G(e,n+Zt,r)===pa&&e.getUint8(n+Zt+r)===0}function ld(e,n){let r=e.getUint16(n);return r>=Nu&&r<=jh||r===Vh||r===Du||r===Bu||r===Uh||r===Zh||r===Gh||r===Hh}function fd(e,n){return e.getUint16(n)===qh}var ma={isPngFile:dd,findPngOffsets:pd},lo=`PNG\r

`,Un=4,qt=4,ti=0,Pe=Un,bt=Un+qt,fo="XML:com.adobe.xmp\0",No="tEXt",De="iTXt",tr="zTXt",Ru="pHYs",Fu="tIME",cd="eXIf",hd="iCCP";function dd(e){return!!e&&G(e,0,lo.length)===lo}function pd(e,n){let r={hasAppMarkers:!1},a=lo.length;for(;a+Un+qt<=e.byteLength;){if(md(e,a))r.hasAppMarkers=!0,r.pngHeaderOffset=a+bt;else if(_d(e,a)){let u=xd(e,a);u!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:u,length:e.getUint32(a+ti)-(u-(a+bt))}])}else if(gd(e,a,n)){r.hasAppMarkers=!0;let u=G(e,a+Pe,qt);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(a+ti),type:u,offset:a+bt})}else if(vd(e,a))r.hasAppMarkers=!0,r.tiffHeaderOffset=a+bt;else if(n&&yd(e,a)){r.hasAppMarkers=!0;let u=e.getUint32(a+ti),f=a+bt,{profileName:h,compressionMethod:m,compressedProfileOffset:_}=bd(e,f);r.iccChunks||(r.iccChunks=[]),r.iccChunks.push({offset:_,length:u-(_-f),chunkNumber:1,chunksTotal:1,profileName:h,compressionMethod:m})}else wd(e,a)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(a+ti));a+=e.getUint32(a+ti)+Un+qt+4}return r}function md(e,n){return G(e,n+Pe,qt)==="IHDR"}function _d(e,n){return G(e,n+Pe,qt)===De&&G(e,n+bt,fo.length)===fo}function gd(e,n,r){let a=G(e,n+Pe,qt);return a===No||a===De||a===tr&&r}function vd(e,n){return G(e,n+Pe,qt)===cd}function yd(e,n){return G(e,n+Pe,qt)===hd}function wd(e,n){let r=[Ru,Fu],a=G(e,n+Pe,qt);return r.includes(a)}function xd(e,n){n+=bt+fo.length+1+1;let r=0;for(;r<2&&n<e.byteLength;)e.getUint8(n)===0&&r++,n++;if(!(r<2))return n}function bd(e,n){let r=Qe(e,n);n+=r.length+1;let a=e.getUint8(n);return n+=1,{profileName:r,compressionMethod:a,compressedProfileOffset:n}}function Pd(e,n){return e.getUint32(n+4)}function Ld(e,n,r,a){let{offsets:u,sizes:f}=Sd(n,r+3),h=e.getUint8(u.offsetSize)>>4;f.item.extent.extentOffset=h;let m=e.getUint8(u.lengthSize)&15;f.item.extent.extentLength=m;let _=e.getUint8(u.baseOffsetSize)>>4;f.item.baseOffset=_;let d=Td(e,u.indexSize,n);f.item.extent.extentIndex=d!==void 0?d:0;let g=Cd(e,u.itemCount,n);return{type:"iloc",items:Ed(e,n,u,f,h,m,d,g),length:a}}function Sd(e,n){let r={item:{dataReferenceIndex:2,extentCount:2,extent:{}}};e<2?(r.itemCount=2,r.item.itemId=2):e===2&&(r.itemCount=4,r.item.itemId=4),e===1||e===2?r.item.constructionMethod=2:r.item.constructionMethod=0;let a={offsetSize:n,lengthSize:n,baseOffsetSize:n+1,indexSize:n+1};return a.itemCount=n+2,a.items=a.itemCount+r.itemCount,a.item={itemId:0},a.item.constructionMethod=a.item.itemId+r.item.itemId,a.item.dataReferenceIndex=a.item.constructionMethod+r.item.constructionMethod,{offsets:a,sizes:r}}function Td(e,n,r){if(r===1||r===2)return e.getUint8(n)&15}function Cd(e,n,r){if(r<2)return e.getUint16(n);if(r===2)return e.getUint32(n)}function Ed(e,n,r,a,u,f,h,m){if(m===void 0)return[];let _=[],d=r.items;for(let g=0;g<m;g++){let v={extents:[]};v.itemId=Id(e,d,n),d+=a.item.itemId,v.constructionMethod=n===1||n===2?e.getUint16(d)&15:void 0,d+=a.item.constructionMethod,v.dataReferenceIndex=e.getUint16(d),d+=a.item.dataReferenceIndex,v.baseOffset=Mn(e,d,a.item.baseOffset),d+=a.item.baseOffset,v.extentCount=e.getUint16(d),d+=a.item.extentCount;for(let w=0;w<v.extentCount;w++){let P={};P.extentIndex=Ad(e,n,d,h),d+=a.item.extent.extentIndex,P.extentOffset=Mn(e,d,u),d+=a.item.extent.extentOffset,P.extentLength=Mn(e,d,f),d+=a.item.extent.extentLength,v.extents.push(P)}_.push(v)}return _}function Id(e,n,r){if(r<2)return e.getUint16(n);if(r===2)return e.getUint32(n)}function Ad(e,n,r,a){if((n===1||n===2)&&a>0)return Mn(e,r,a)}function Mn(e,n,r){return r===4?e.getUint32(n):r===8?(console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),Pd(e,n)):0}var Md=1718909296,Od=1768977008,kd=1835365473,Dd=1768714083,Bd=1768517222,Nd=1768842853,zd=1768973167,Rd=1668246642,Uu=1165519206,zo=1835625829,Fd=1970432288;function er(e,n){let{length:r,contentOffset:a}=Ud(e,n);if(r<8)return;let u=e.getUint32(n+4);if(u===Md)return Xd(e,a,r);if(u===Od)return Jd(e,n,a,r);if(u===zd)return Qd(e,n,a,r);if(u===Rd)return tp(e,a,r);let f=e.getUint8(a);return u===kd?ip(e,n,a+1,r):u===Dd?Ld(e,f,a+1,r):u===Bd?np(e,n,f,a+1,r):u===Nd?op(e,n,f,a+1,r):{type:void 0,length:r}}function Ud(e,n){let r=e.getUint32(n);return Zd(r)?{length:e.byteLength-n,contentOffset:n+4+4}:Gd(r)&&Hd(e,n)?{length:e.getUint32(n+12),contentOffset:n+4+4+8}:{length:r,contentOffset:n+4+4}}function Zd(e){return e===0}function Gd(e){return e===1}function Hd(e,n){return e.getUint32(n+8)===0}function Zu(e){{let n={},r=Wd(e);return r?(n.tiffHeaderOffset=jd(e,r),n.xmpChunks=$d(r),n.iccChunks=Kd(r),n.hasAppMarkers=n.tiffHeaderOffset!==void 0||n.xmpChunks!==void 0||n.iccChunks!==void 0,n):{hasAppMarkers:!1}}}function Wd(e){let n=0;for(;n+4+4<=e.byteLength;){let r=er(e,n);if(r===void 0)break;if(r.type==="meta")return r;n+=r.length}}function jd(e,n){try{let r=Vd(n).itemId,a=co(n,r),u=a.baseOffset+a.extents[0].extentOffset;return qd(e,u)}catch{return}}function Vd(e){return e.subBoxes.find(n=>n.type==="iinf").itemInfos.find(n=>n.itemType===Uu)}function co(e,n){return e.subBoxes.find(r=>r.type==="iloc").items.find(r=>r.itemId===n)}function qd(e,n){return n+4+e.getUint32(n)}function $d(e){try{let n=Yd(e).itemId,r=co(e,n),a=co(e,n).extents[0];return[{dataOffset:r.baseOffset+a.extentOffset,length:a.extentLength}]}catch{return}}function Yd(e){return e.subBoxes.find(n=>n.type==="iinf").itemInfos.find(n=>n.itemType===zo&&n.contentType==="application/rdf+xml")}function Kd(e){try{let n=e.subBoxes.find(r=>r.type==="iprp").subBoxes.find(r=>r.type==="ipco").properties.find(r=>r.type==="colr").icc;if(n)return[n]}catch{}}function Xd(e,n,r){return{type:"ftyp",majorBrand:G(e,n,4),length:r}}function Jd(e,n,r,a){return{type:"iprp",subBoxes:ir(e,r,a-(r-n)),length:a}}function Qd(e,n,r,a){return{type:"ipco",properties:ir(e,r,a-(r-n)),length:a}}function tp(e,n,r){return{type:"colr",icc:ep(e,n),length:r}}function ep(e,n){let r=G(e,n,4);if(!(r!=="prof"&&r!=="rICC"))return{offset:n+4,length:e.getUint32(n+4),chunkNumber:1,chunksTotal:1}}function ip(e,n,r,a){return{type:"meta",subBoxes:ir(e,r+3,a-(r+3-n)),length:a}}function ir(e,n,r){let a=[Uu,zo],u=[],f=n;for(;f<n+r;){let h=er(e,f);if(h===void 0)break;h.type!==void 0&&(h.itemType===void 0||a.indexOf(h.itemType)!==-1)&&u.push(h),f+=h.length}return u}function np(e,n,r,a,u){let{offsets:f}=rp(r,a);return{type:"iinf",itemInfos:ir(e,f.itemInfos,u-(f.itemInfos-n)),length:u}}function rp(e,n){let r={entryCount:n+3},a={};return e===0?a.entryCount=2:a.entryCount=4,r.itemInfos=r.entryCount+a.entryCount,{offsets:r}}function op(e,n,r,a,u){a+=3;let f={type:"infe",length:u};return(r===0||r===1)&&(f.itemId=e.getUint16(a),a+=2,f.itemProtectionIndex=e.getUint16(a),a+=2,f.itemName=Qe(e,a),a+=f.itemName.length+1),r>=2&&(r===2?(f.itemId=e.getUint16(a),a+=2):r===3&&(f.itemId=e.getUint32(a),a+=4),f.itemProtectionIndex=e.getUint16(a),a+=2,f.itemType=e.getUint32(a),a+=4,f.itemName=Qe(e,a),a+=f.itemName.length+1,f.itemType===zo?(f.contentType=Qe(e,a),a+=f.contentType.length+1,n+u>a&&(f.contentEncoding=Qe(e,a),a+=f.contentEncoding.length+1)):f.itemType===Fd&&(f.itemUri=Qe(e,a),a+=f.itemUri.length+1)),f}var _a={isHeicFile:sp,findHeicOffsets:ap};function sp(e){if(!e)return!1;let n=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"];try{let r=er(e,0);return r&&n.indexOf(r.majorBrand)!==-1}catch{return!1}}function ap(e){return Zu(e)}var ga={isAvifFile:up,findAvifOffsets:lp};function up(e){if(!e)return!1;try{let n=er(e,0);return n&&n.majorBrand==="avif"}catch{return!1}}function lp(e){return Zu(e)}var va={isWebpFile:fp,findOffsets:cp};function fp(e){let n="RIFF",r="WEBP";return!!e&&G(e,0,n.length)===n&&G(e,8,r.length)===r}function cp(e){let n="Exif\0\0",r=12,a=!1,u,f,h,m;for(;r+8<e.byteLength;){let _=G(e,r,4),d=e.getUint32(r+4,!0);_==="EXIF"?(a=!0,G(e,r+8,n.length)===n?u=r+8+n.length:u=r+8):_==="XMP "?(a=!0,f=[{dataOffset:r+8,length:d}]):_==="ICCP"?(a=!0,h=[{offset:r+8,length:d,chunkNumber:1,chunksTotal:1}]):_==="VP8X"&&(a=!0,m=r+8),r+=8+(d%2===0?d:d+1)}return{hasAppMarkers:a,tiffHeaderOffset:u,xmpChunks:f,iccChunks:h,vp8xChunkOffset:m}}var ya={isGifFile:pp,findOffsets:mp},hp=6,dp=["GIF87a","GIF89a"];function pp(e){return!!e&&dp.includes(G(e,0,hp))}function mp(){return{gifHeaderOffset:0}}var wa={isXMLFile:_p,findOffsets:gp},Gu=0,xa="<?xpacket begin";function _p(e){return!!e&&G(e,Gu,xa.length)===xa}function gp(e){let n=[];return n.push({dataOffset:Gu,length:e.byteLength}),{xmpChunks:n}}var vp={parseAppMarkers:yp};function yp(e,n){if(na.isTiffFile(e))return me(na.findTiffOffsets(),"tiff","TIFF");if(ra.isJpegFile(e))return me(ra.findJpegOffsets(e),"jpeg","JPEG");if(ma.isPngFile(e))return me(ma.findPngOffsets(e,n),"png","PNG");if(_a.isHeicFile(e))return me(_a.findHeicOffsets(e),"heic","HEIC");if(ga.isAvifFile(e))return me(ga.findAvifOffsets(e),"avif","AVIF");if(va.isWebpFile(e))return me(va.findOffsets(e),"webp","WebP");if(ya.isGifFile(e))return me(ya.findOffsets(e),"gif","GIF");if(wa.isXMLFile(e))return me(wa.findOffsets(e),"xml","XML");throw new Error("Invalid image format")}function me(e,n,r){return K({},e,{fileType:{value:n,description:r}})}var Z={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(n=>{if(n===49)return"Y";if(n===50)return"Cb";if(n===51)return"Cr";if(n===52)return"R";if(n===53)return"G";if(n===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){if(e[0]/e[1]>.25){let n=e[0]/e[1];return Number.isInteger(n)?""+n:n.toFixed(1)}return e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700  7100K)":e===13?"Day white fluorescent (N 4600  5400K)":e===14?"Cool white fluorescent (W 3900  4500K)":e===15?"White fluorescent (WW 3200  3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){let n=Math.pow(2,e[0]/e[1]);return n<=1?`${Math.round(1/n)}`:`1/${Math.round(n)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},Hu={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:Z.XResolution},283:{name:"YResolution",description:Z.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:Z.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(n=>`${n[0]}/${n[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(n=>`${n[0]}/${n[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{let n={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(r=>n[r]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(n=>""+n[0]/n[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(n=>""+n[0]/n[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:Z.LightSource},50779:{name:"CalibrationIlluminant2",description:Z.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},wp={33434:{name:"ExposureTime",description:Z.ExposureTime},33437:{name:"FNumber",description:Z.FNumber},34850:{name:"ExposureProgram",description:Z.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>mt(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:Z.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:Z.ShutterSpeedValue},37378:{name:"ApertureValue",description:Z.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:Z.MeteringMode},37384:{name:"LightSource",description:Z.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:Z.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:ao},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" "},40960:{name:"FlashpixVersion",description:e=>e.map(n=>String.fromCharCode(n)).join("")},40961:{name:"ColorSpace",description:Z.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:Z.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,n])=>`X: ${e}, Y: ${n}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:Z.CustomRendered},41986:{name:"ExposureMode",description:Z.ExposureMode},41987:{name:"WhiteBalance",description:Z.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:Z.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:Z.Contrast},41993:{name:"Saturation",description:Z.Saturation},41994:{name:"Sharpness",description:Z.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{let n=parseFloat((e[0][0]/e[0][1]).toFixed(5)),r=parseFloat((e[1][0]/e[1][1]).toFixed(5)),a=`${n}-${r} mm`;if(e[3][1]===0)return`${a} f/?`;let u=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return`${a} f/${parseFloat(u.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},xp={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{let n=e.join("");return n==="N"?"North latitude":n==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:Fn},3:{name:"GPSLongitudeRef",description:e=>{let n=e.join("");return n==="E"?"East longitude":n==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:Fn},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([n,r])=>{let a=n/r;return/^\d(\.|$)/.test(`${a}`)?`0${a}`:a}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{let n=e.join("");return n==="A"?"Measurement in progress":n==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{let n=e.join("");return n==="2"?"2-dimensional measurement":n==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{let n=e.join("");return n==="K"?"Kilometers per hour":n==="M"?"Miles per hour":n==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{let n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{let n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{let n=e.join("");return n==="N"?"North latitude":n==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{let n=e.join("");return n==="E"?"East longitude":n==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{let n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{let n=e.join("");return n==="K"?"Kilometers":n==="M"?"Miles":n==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:ao},28:{name:"GPSAreaInformation",description:ao},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},bp={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>mt(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},Pp={45056:{name:"MPFVersion",description:e=>mt(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},ba=K({},Hu,wp),Ro="0th",Wu="1st",ju="exif",Vu="gps",qu="interoperability",$u="mpf",_e={[Ro]:ba,[Wu]:Hu,[ju]:ba,[Vu]:xp,[qu]:bp,[$u]:Pp},Yu={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},ho={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},T={getAsciiValue:Lp,getByteAt:Ku,getAsciiAt:Sp,getShortAt:Tp,getLongAt:Zn,getRationalAt:Cp,getUndefinedAt:Ep,getSlongAt:po,getSrationalAt:Ip,getIfdPointerAt:Ap,typeSizes:Yu,tagTypes:ho,getTypeSize:Mp};function Lp(e){return e.map(n=>String.fromCharCode(n))}function Ku(e,n){return e.getUint8(n)}function Sp(e,n){return e.getUint8(n)}function Tp(e,n,r){return e.getUint16(n,r===Re.LITTLE_ENDIAN)}function Zn(e,n,r){return e.getUint32(n,r===Re.LITTLE_ENDIAN)}function Cp(e,n,r){return[Zn(e,n,r),Zn(e,n+4,r)]}function Ep(e,n){return Ku(e,n)}function po(e,n,r){return e.getInt32(n,r===Re.LITTLE_ENDIAN)}function Ip(e,n,r){return[po(e,n,r),po(e,n+4,r)]}function Ap(e,n,r){return Zn(e,n,r)}function Mp(e){if(ho[e]===void 0)throw new Error("No such type found.");return Yu[ho[e]]}var Op={1:T.getByteAt,2:T.getAsciiAt,3:T.getShortAt,4:T.getLongAt,5:T.getRationalAt,7:T.getUndefinedAt,9:T.getSlongAt,10:T.getSrationalAt,13:T.getIfdPointerAt};function Xu(e,n,r){return n+T.getLongAt(e,n+4,r)}function hi(e,n,r,a,u,f){let h=T.getTypeSize("SHORT"),m=12,_={},d=kp(e,a,u);a+=h;for(let g=0;g<d&&!(a+m>e.byteLength);g++){let v=Dp(e,n,r,a,u,f);v!==void 0&&(_[v.name]={id:v.id,value:v.value,description:v.description}),a+=m}if(a<e.byteLength-T.getTypeSize("LONG")){let g=T.getLongAt(e,a,u);g!==0&&n===Ro&&(_.Thumbnail=hi(e,Wu,r,r+g,u,!0))}return _}function kp(e,n,r){return n+T.getTypeSize("SHORT")<=e.byteLength?T.getShortAt(e,n,r):0}function Dp(e,n,r,a,u,f){let h=T.getTypeSize("SHORT"),m=h+T.getTypeSize("SHORT"),_=m+T.getTypeSize("LONG"),d=T.getShortAt(e,a,u),g=T.getShortAt(e,a+h,u),v=T.getLongAt(e,a+m,u),w;if(T.typeSizes[g]===void 0||!f&&_e[n][d]===void 0)return;if(Bp(g,v))w=Pa(e,a+_,g,v,u);else{let A=T.getLongAt(e,a+_,u);if(Np(e,r,A,g,v)){let M=d===33723;w=Pa(e,r+A,g,v,u,M)}else w="<faulty value>"}g===T.tagTypes.ASCII&&(w=zp(w),w=Rp(w));let P=`undefined-${d}`,E=w;if(_e[n][d]!==void 0)if(_e[n][d].name!==void 0&&_e[n][d].description!==void 0){P=_e[n][d].name;try{E=_e[n][d].description(w)}catch{E=La(w)}}else g===T.tagTypes.RATIONAL||g===T.tagTypes.SRATIONAL?(P=_e[n][d],E=""+w[0]/w[1]):(P=_e[n][d],E=La(w));return{id:d,name:P,value:w,description:E}}function Bp(e,n){return T.typeSizes[e]*n<=T.getTypeSize("LONG")}function Pa(e,n,r,a,u,f=!1){let h=[];f&&(a=a*T.typeSizes[r],r=T.tagTypes.BYTE);for(let m=0;m<a;m++)h.push(Op[r](e,n,u)),n+=T.typeSizes[r];return r===T.tagTypes.ASCII?h=T.getAsciiValue(h):h.length===1&&(h=h[0]),h}function Np(e,n,r,a,u){return n+r+T.typeSizes[a]*u<=e.byteLength}function zp(e){let n=[],r=0;for(let a=0;a<e.length;a++){if(e[a]==="\0"){r++;continue}n[r]===void 0&&(n[r]=""),n[r]+=e[a]}return n}function Rp(e){try{return e.map(n=>decodeURIComponent(escape(n)))}catch{return e}}function La(e){return e instanceof Array?e.join(", "):e}var Sa="Exif IFD Pointer",Ta="GPS Info IFD Pointer",Ca="Interoperability IFD Pointer",Ju={read:Fp};function Fp(e,n,r){let a=Re.getByteOrder(e,n),u=Up(e,n,a,r);return u=Zp(u,e,n,a,r),u=Gp(u,e,n,a,r),u=Hp(u,e,n,a,r),u}function Up(e,n,r,a){return hi(e,Ro,n,Xu(e,n,r),r,a)}function Zp(e,n,r,a,u){return e[Sa]!==void 0?K(e,hi(n,ju,r,r+e[Sa].value,a,u)):e}function Gp(e,n,r,a,u){return e[Ta]!==void 0?K(e,hi(n,Vu,r,r+e[Ta].value,a,u)):e}function Hp(e,n,r,a,u){return e[Ca]!==void 0?K(e,hi(n,qu,r,r+e[Ca].value,a,u)):e}var Wp={read:jp},ei=16;function jp(e,n,r){let a=Re.getByteOrder(e,n),u=hi(e,$u,n,Xu(e,n,a),a,r);return Vp(e,n,u,a)}function Vp(e,n,r,a){if(!r.MPEntry)return r;let u=[];for(let f=0;f<Math.ceil(r.MPEntry.value.length/ei);f++){u[f]={};let h=zi(r.MPEntry.value,f*ei,T.getTypeSize("LONG"),a);u[f].ImageFlags=qp(h),u[f].ImageFormat=$p(h),u[f].ImageType=Yp(h);let m=zi(r.MPEntry.value,f*ei+4,T.getTypeSize("LONG"),a);u[f].ImageSize={value:m,description:""+m};let _=Kp(f,r.MPEntry,a,n);u[f].ImageOffset={value:_,description:""+_};let d=zi(r.MPEntry.value,f*ei+12,T.getTypeSize("SHORT"),a);u[f].DependentImage1EntryNumber={value:d,description:""+d};let g=zi(r.MPEntry.value,f*ei+14,T.getTypeSize("SHORT"),a);u[f].DependentImage2EntryNumber={value:g,description:""+g},u[f].image=e.buffer.slice(_,_+m),Eu(u[f],"base64",function(){return Iu(this.image)})}return r.Images=u,r}function zi(e,n,r,a){if(a===Re.LITTLE_ENDIAN){let f=0;for(let h=0;h<r;h++)f+=e[n+h]<<8*h;return f}let u=0;for(let f=0;f<r;f++)u+=e[n+f]<<8*(r-1-f);return u}function qp(e){let n=[e>>31&1,e>>30&1,e>>29&1],r=[];return n[0]&&r.push("Dependent Parent Image"),n[1]&&r.push("Dependent Child Image"),n[2]&&r.push("Representative Image"),{value:n,description:r.join(", ")||"None"}}function $p(e){let n=e>>24&7;return{value:n,description:n===0?"JPEG":"Unknown"}}function Yp(e){let n=e&16777215;return{value:n,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[n]||"Unknown"}}function Kp(e,n,r,a){return Xp(e)?0:zi(n.value,e*ei+8,T.getTypeSize("LONG"),r)+a}function Xp(e){return e===0}var Jp={read:Qp};function Qp(e,n){let r=tm(e,n),a=rm(e,n,r);return{"Bits Per Sample":em(e,n,r),"Image Height":im(e,n,r),"Image Width":nm(e,n,r),"Color Components":a,Subsampling:a&&om(e,n,a.value,r)}}function tm(e,n){return T.getShortAt(e,n)}function em(e,n,r){if(3>r)return;let a=T.getByteAt(e,n+2);return{value:a,description:""+a}}function im(e,n,r){if(5>r)return;let a=T.getShortAt(e,n+3);return{value:a,description:`${a}px`}}function nm(e,n,r){if(7>r)return;let a=T.getShortAt(e,n+5);return{value:a,description:`${a}px`}}function rm(e,n,r){if(8>r)return;let a=T.getByteAt(e,n+7);return{value:a,description:""+a}}function om(e,n,r,a){if(8+3*r>a)return;let u=[];for(let f=0;f<r;f++){let h=n+8+f*3;u.push([T.getByteAt(e,h),T.getByteAt(e,h+1),T.getByteAt(e,h+2)])}return{value:u,description:u.length>1?sm(u)+am(u):""}}function sm(e){let n={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(r=>n[r[0]]).join("")}function am(e){let n={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||n[e[0][1]]===void 0?"":n[e[0][1]]}var um={read:lm};function lm(e,n){let r=fm(e,n),a=_m(e,n,r),u=gm(e,n,r),f={"JFIF Version":cm(e,n,r),"Resolution Unit":hm(e,n,r),XResolution:pm(e,n,r),YResolution:mm(e,n,r),"JFIF Thumbnail Width":a,"JFIF Thumbnail Height":u};if(a!==void 0&&u!==void 0){let h=vm(e,n,3*a.value*u.value,r);h&&(f["JFIF Thumbnail"]=h)}for(let h in f)f[h]===void 0&&delete f[h];return f}function fm(e,n){return T.getShortAt(e,n)}function cm(e,n,r){if(9>r)return;let a=T.getByteAt(e,n+7),u=T.getByteAt(e,n+7+1);return{value:a*256+u,description:a+"."+u}}function hm(e,n,r){if(10>r)return;let a=T.getByteAt(e,n+9);return{value:a,description:dm(a)}}function dm(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function pm(e,n,r){if(12>r)return;let a=T.getShortAt(e,n+10);return{value:a,description:""+a}}function mm(e,n,r){if(14>r)return;let a=T.getShortAt(e,n+12);return{value:a,description:""+a}}function _m(e,n,r){if(15>r)return;let a=T.getByteAt(e,n+14);return{value:a,description:`${a}px`}}function gm(e,n,r){if(16>r)return;let a=T.getByteAt(e,n+15);return{value:a,description:`${a}px`}}function vm(e,n,r,a){return r===0||16+r>a?void 0:{value:e.buffer.slice(n+16,n+16+r),description:"<24-bit RGB pixel data>"}}var ve={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:Zr},336:{name:"Time Sent",description:Gr},346:{name:"Coded Character Set",description:Ea,encoding_name:Ea},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>mt(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{let n=mt(e).split(":");return n[2]+(n[3]?"/"+n[3]:"")+(n[4]?"/"+n[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{let n=mt(e);return n==="01"?"Object Kill":n==="02"?"Object Replace":n==="03"?"Object Append":n==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:Zr},572:{name:"Time Created",description:Gr},574:{name:"Digital Creation Date",description:Zr},575:{name:"Digital Creation Time",description:Gr},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{let n=mt(e);return n==="a"?"morning":n==="p"?"evening":n==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{let n=mt(e);return n==="P"?"Portrait":n==="L"?"Landscape":n==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{let n=mt(e),r=n.charAt(0),a=n.charAt(1),u="";return r==="1"?u+="Mono":r==="2"&&(u+="Stereo"),a==="A"?u+=", actuality":a==="C"?u+=", question and answer session":a==="M"?u+=", music, transmitted by itself":a==="Q"?u+=", response to a question":a==="R"?u+=", raw sound":a==="S"?u+=", scener":a==="V"?u+=", voicer":a==="W"&&(u+=", wrap"),u!==""?u:n}},663:{name:"Audio Sampling Rate",description:e=>parseInt(mt(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{let n=parseInt(mt(e),10);return n+(n===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{let n=mt(e);return n.length>=6?n.substr(0,2)+":"+n.substr(2,2)+":"+n.substr(4,2):n}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){let n=(e[0]<<8)+e[1];return n===0?"No ObjectData":n===1?"IPTC-NAA Digital Newsphoto Parameter Record":n===2?"IPTC7901 Recommended Message Format":n===3?"Tagged Image File Format (Adobe/Aldus Image data)":n===4?"Illustrator (Adobe Graphics data)":n===5?"AppleSingle (Apple Computer Inc)":n===6?"NAA 89-3 (ANPA 1312)":n===7?"MacBinary II":n===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":n===9?"United Press International ANPA 1312 variant":n===10?"United Press International Down-Load Message":n===11?"JPEG File Interchange (JFIF)":n===12?"Photo-CD Image-Pac (Eastman Kodak)":n===13?"Microsoft Bit Mapped Graphics File [*.BMP]":n===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":n===15?"Audio plus Moving Video [*.AVI] (Microsoft)":n===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":n===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":n===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":n===19?"RIFF Wave (Microsoft Corporation)":n===20?"Freehand (Macromedia/Aldus)":n===21?'Hypertext Markup Language "HTML" (The Internet Society)':n===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":n===23?"MPEG 2 Audio Layer 3, ISO/IEC":n===24?"Portable Document File (*.PDF) Adobe":n===25?"News Industry Text Format (NITF)":n===26?"Tape Archive (*.TAR)":n===27?"Tidningarnas Telegrambyr NITF version (TTNITF DTD)":n===28?"Ritzaus Bureau NITF version (RBNITF DTD)":n===29?"Corel Draw [*.CDR]":`Unknown format ${n}`}return mt(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,n)=>{let r={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},a=mt(e);if(n["ObjectData Preview File Format"]){let u=mt(n["ObjectData Preview File Format"].value);if(r[u]&&r[u][a])return r[u][a]}return a}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let n=0;for(let r=0;r<e.length;r++)n=(n<<8)+e[r];return n.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let n=0;for(let r=0;r<e.length;r++)n=(n<<8)+e[r];return n.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let n=0;for(let r=0;r<e.length;r++)n=(n<<8)+e[r];return n.toString()}}}};function Zr(e){let n=mt(e);return n.length>=8?n.substr(0,4)+"-"+n.substr(4,2)+"-"+n.substr(6,2):n}function Gr(e){let n=mt(e),r=n;return n.length>=6&&(r=n.substr(0,2)+":"+n.substr(2,2)+":"+n.substr(4,2),n.length===11&&(r+=n.substr(6,1)+n.substr(7,2)+":"+n.substr(9,2))),r}function Ea(e){let n=mt(e);return n==="\x1B%G"?"UTF-8":n==="\x1B%5"?"Windows-1252":n==="\x1B%/G"?"UTF-8 Level 1":n==="\x1B%/H"?"UTF-8 Level 2":n==="\x1B%/I"?"UTF-8 Level 3":n==="\x1B/A"?"ISO-8859-1":n==="\x1B/B"?"ISO-8859-2":n==="\x1B/C"?"ISO-8859-3":n==="\x1B/D"?"ISO-8859-4":n==="\x1B/@"?"ISO-8859-5":n==="\x1B/G"?"ISO-8859-6":n==="\x1B/F"?"ISO-8859-7":n==="\x1B/H"?"ISO-8859-8":"Unknown"}var ym={get:wm};function wm(){if(typeof TextDecoder<"u")return TextDecoder}var xm=5,Qu={decode:bm,TAG_HEADER_SIZE:xm};function bm(e,n){let r=ym.get();if(typeof r<"u"&&e!==void 0)try{return new r(e).decode(n instanceof DataView?n.buffer:Uint8Array.from(n))}catch{}let a=n.map(u=>String.fromCharCode(u)).join("");return Pm(a)}function Pm(e){try{return decodeURIComponent(escape(e))}catch{return e}}var Lm=943868237,tl=4,Hr=tl+8,Sm=1028,el=5,mo={read:Tm};function Tm(e,n,r){try{if(Array.isArray(e))return Ia(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,r);let{naaBlock:a,dataOffset:u}=Cm(e,n);return Ia(e,a,u,r)}catch{return{}}}function Cm(e,n){for(;n+Hr<=e.byteLength;){let r=Em(e,n);if(Im(r))return{naaBlock:r,dataOffset:n+Hr};n+=Hr+r.size+Am(r)}throw new Error("No IPTC NAA resource block.")}function Em(e,n){if(e.getUint32(n,!1)!==Lm)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(n+tl),size:e.getUint16(n+10)}}function Im(e){return e.type===Sm}function Am(e){return e.size%2!==0?1:0}function Ia(e,n,r,a){let u={},f,h=r+n.size;for(;r<h&&r<e.byteLength;){let{tag:m,tagSize:_}=Mm(e,r,u,f,a);if(m===null)break;m&&("encoding"in m&&(f=m.encoding),u[m.name]===void 0||m.repeatable===void 0?u[m.name]={id:m.id,value:m.value,description:m.description}:(u[m.name]instanceof Array||(u[m.name]=[{id:u[m.name].id,value:u[m.name].value,description:u[m.name].description}]),u[m.name].push({id:m.id,value:m.value,description:m.description}))),r+=el+_}return u}function Mm(e,n,r,a,u){if(Om(e,n))return{tag:null,tagSize:0};let f=e.getUint16(n+1),h=e.getUint16(n+3);if(!u&&!ve.iptc[f])return{tag:void 0,tagSize:h};let m=km(e,n+el,h),_={id:f,name:Dm(ve.iptc[f],f,m),value:m,description:zm(ve.iptc[f],m,r,a)};return Um(f)&&(_.repeatable=!0),Zm(f)&&(_.encoding=ve.iptc[f].encoding_name(m)),{tag:_,tagSize:h}}function Om(e,n){return e.getUint8(n)!==28}function km(e,n,r){let a=[];for(let u=0;u<r;u++)a.push(e.getUint8(n+u));return a}function Dm(e,n,r){return e?Bm(e)?e:Nm(e)?e.name(r):e.name:`undefined-${n}`}function Bm(e){return typeof e=="string"}function Nm(e){return typeof e.name=="function"}function zm(e,n,r,a){if(Fm(e))try{return e.description(n,r)}catch{}return Rm(e,n)?Qu.decode(a,n):n}function Rm(e,n){return e&&n instanceof Array}function Fm(e){return e&&e.description!==void 0}function Um(e){return ve.iptc[e]&&ve.iptc[e].repeatable}function Zm(e){return ve.iptc[e]&&ve.iptc[e].encoding_name!==void 0}var Ln={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>Z.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>Ke(Z.XResolution,e),"tiff:YResolution":e=>Ke(Z.YResolution,e),"exif:ApertureValue":e=>Ke(Z.ApertureValue,e),"exif:GPSLatitude":Aa,"exif:GPSLongitude":Aa,"exif:FNumber":e=>Ke(Z.FNumber,e),"exif:FocalLength":e=>Ke(Z.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>Z.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>Z.ColorSpace(Gm(e)),"exif:ComponentsConfiguration"(e,n){if(/^\d, \d, \d, \d$/.test(n)){let r=n.split(", ").map(a=>a.charCodeAt(0));return Z.ComponentsConfiguration(r)}return n},"exif:Contrast":e=>Z.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>Z.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>Z.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>Z.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return il(e)?Z.ExposureTime(e.split("/").map(n=>parseInt(n,10))):e},"exif:MeteringMode":e=>Z.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>Z.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>Z.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>Z.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>Ke(Z.ShutterSpeedValue,e),"exif:WhiteBalance":e=>Z.WhiteBalance(parseInt(e,10))};function Ke(e,n){return il(n)?e(n.split("/")):n}function Gm(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function il(e){return/^-?\d+\/-?\d+$/.test(e)}function Aa(e){let[n,r]=e.split(",");if(n!==void 0&&r!==void 0){let a=parseFloat(n),u=parseFloat(r),f=r.charAt(r.length-1);if(!Number.isNaN(a)&&!Number.isNaN(u))return""+(a+u/60)+f}return e}var Hm={get:Wm};function Wm(){if(typeof DOMParser<"u")return new DOMParser;try{return new(__non_webpack_require__("@xmldom/xmldom")).DOMParser({errorHandler:{error:()=>{throw new Error("Faulty XML")}}})}catch{return}}var Ma={read:jm};function jm(e,n){let r={};if(typeof e=="string")return Sn(r,e),r;let[a,u]=Vm(e,n),f=Sn(r,a);if(u){let h=Sn(r,u);!f&&!h&&(delete r._raw,Sn(r,_o(e,n)))}return r}function Vm(e,n){if(n.length===0)return[];let r=[_o(e,n.slice(0,1))];return n.length>1&&r.push(_o(e,n.slice(1))),r}function _o(e,n){let r=n.reduce((f,h)=>f+h.length,0),a=new Uint8Array(r),u=0;for(let f=0;f<n.length;f++){let h=n[f],m=e.buffer.slice(h.dataOffset,h.dataOffset+h.length);a.set(new Uint8Array(m),u),u+=h.length}return new DataView(a.buffer)}function Sn(e,n){try{let{doc:r,raw:a}=qm(n);e._raw=(e._raw||"")+a;let u=nl(r);return K(e,ol(rl(u,!0))),!0}catch{return!1}}function qm(e){let n=Hm.get();if(!n)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;let r=typeof e=="string"?e:G(e,0,e.byteLength),a=n.parseFromString($m(r),"application/xml");if(a.documentElement.nodeName==="parsererror")throw new Error(a.documentElement.textContent);return{doc:a,raw:r}}function $m(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function nl(e){for(let n=0;n<e.childNodes.length;n++){if(e.childNodes[n].tagName==="x:xmpmeta")return nl(e.childNodes[n]);if(e.childNodes[n].tagName==="rdf:RDF")return e.childNodes[n]}throw new Error}function rl(e,n=!1){let r=Ym(e);return Km(r)?n?{}:Xm(r[0]):Jm(r)}function Ym(e){let n=[];for(let r=0;r<e.childNodes.length;r++)n.push(e.childNodes[r]);return n}function Km(e){return e.length===1&&e[0].nodeName==="#text"}function Xm(e){return e.nodeValue}function Jm(e){let n={};return e.forEach(r=>{if(Qm(r)){let a=t_(r);n[r.nodeName]!==void 0?(Array.isArray(n[r.nodeName])||(n[r.nodeName]=[n[r.nodeName]]),n[r.nodeName].push(a)):n[r.nodeName]=a}}),n}function Qm(e){return e.nodeName&&e.nodeName!=="#text"}function t_(e){return{attributes:e_(e),value:rl(e)}}function e_(e){let n={};for(let r=0;r<e.attributes.length;r++)n[e.attributes[r].nodeName]=decodeURIComponent(escape(e.attributes[r].value));return n}function ol(e){let n={};if(typeof e=="string")return e;for(let r in e){let a=e[r];Array.isArray(a)||(a=[a]),a.forEach(u=>{K(n,Fo(u.attributes)),typeof u.value=="object"&&K(n,sl(u.value))})}return n}function Fo(e){let n={};for(let r in e)try{i_(r)&&(n[rr(r)]={value:e[r],attributes:{},description:fe(e[r],r)})}catch{}return n}function i_(e){return e!=="rdf:parseType"&&!nr(e)}function nr(e){return e.split(":")[0]==="xmlns"}function rr(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function fe(e,n=void 0){if(Array.isArray(e)){let r=n_(e);return n&&typeof Ln[n]=="function"?Ln[n](e,r):r}if(typeof e=="object")return r_(e);try{return n&&typeof Ln[n]=="function"?Ln[n](e):decodeURIComponent(escape(e))}catch{return e}}function n_(e){return e.map(n=>n.value!==void 0?fe(n.value):fe(n)).join(", ")}function r_(e){let n=[];for(let r in e)n.push(`${o_(r)}: ${fe(e[r].value)}`);return n.join("; ")}function o_(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function sl(e){let n={};for(let r in e)try{nr(r)||(n[rr(r)]=s_(e[r],r))}catch{}return n}function s_(e,n){return u_(e)?l_(e,n):a_(e)?{value:"",attributes:{},description:""}:al(e)?ul(e,n):ll(e)?fl(e,n):cl(e)?hl(e,n):h_(e)?d_(e,n):Uo(e,n)}function a_(e){return e.attributes["rdf:parseType"]==="Resource"&&typeof e.value=="string"&&e.value.trim()===""}function u_(e){return Array.isArray(e)}function l_(e,n){return Uo(e[e.length-1],n)}function al(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function ul(e,n){let r=Hi(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),K(r,Hi(e),f_(e));let a=c_(e);return{value:a,attributes:r,description:fe(a,n)}}function Hi(e){let n={};for(let r in e.attributes)r!=="rdf:parseType"&&r!=="rdf:resource"&&!nr(r)&&(n[rr(r)]=e.attributes[r]);return n}function f_(e){let n={};for(let r in e.value)r!=="rdf:value"&&!nr(r)&&(n[rr(r)]=e.value[r].value);return n}function c_(e){return pl(e.value["rdf:value"])||e.value["rdf:value"].value}function ll(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function fl(e,n){let r={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(K(r.value,Fo(e.value["rdf:Description"].attributes)),K(r.attributes,Hi(e)),e=e.value["rdf:Description"]),K(r.value,sl(e.value)),r.description=fe(r.value,n),r}function cl(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function hl(e,n){let r=Fo(e.attributes);return{value:r,attributes:{},description:fe(r,n)}}function h_(e){return dl(e.value)!==void 0}function dl(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function d_(e,n){let r=dl(e.value).value["rdf:li"],a=Hi(e),u=[];return r===void 0?r=[]:Array.isArray(r)||(r=[r]),r.forEach(f=>{u.push(p_(f))}),{value:u,attributes:a,description:fe(u,n)}}function p_(e){return al(e)?ul(e):ll(e)?fl(e).value:cl(e)?hl(e).value:Uo(e)}function Uo(e,n){let r=pl(e)||ol(e.value);return{value:r,attributes:Hi(e),description:fe(r,n)}}function pl(e){return e.attributes&&e.attributes["rdf:resource"]}var se={CLOSED_SUBPATH_LENGTH:0,CLOSED_SUBPATH_BEZIER_LINKED:1,CLOSED_SUBPATH_BEZIER_UNLINKED:2,OPEN_SUBPATH_LENGTH:3,OPEN_SUBPATH_BEZIER_LINKED:4,OPEN_SUBPATH_BEZIER_UNLINKED:5,FILL_RULE:6,CLIPBOARD:7,INITIAL_FILL_RULE:8},ml=24,Wr={2e3:{name:"PathInformation",description:m_},2999:{name:"ClippingPathName",description(e){let[,n]=Cu(e,0);return n}}};function m_(e){let n={},r=[];for(let a=0;a<e.byteLength;a+=2+ml){let u=T.getShortAt(e,a);jr[u]&&(n[u]||(n[u]=jr[u].description),r.push({type:u,path:jr[u].path(e,a+2)}))}return JSON.stringify({types:n,paths:r})}var jr={[se.CLOSED_SUBPATH_LENGTH]:{description:"Closed subpath length",path:(e,n)=>[T.getShortAt(e,n)]},[se.CLOSED_SUBPATH_BEZIER_LINKED]:{description:"Closed subpath Bezier knot, linked",path:Tn},[se.CLOSED_SUBPATH_BEZIER_UNLINKED]:{description:"Closed subpath Bezier knot, unlinked",path:Tn},[se.OPEN_SUBPATH_LENGTH]:{description:"Open subpath length",path:(e,n)=>[T.getShortAt(e,n)]},[se.OPEN_SUBPATH_BEZIER_LINKED]:{description:"Open subpath Bezier knot, linked",path:Tn},[se.OPEN_SUBPATH_BEZIER_UNLINKED]:{description:"Open subpath Bezier knot, unlinked",path:Tn},[se.FILL_RULE]:{description:"Path fill rule",path:()=>[]},[se.INITIAL_FILL_RULE]:{description:"Initial fill rule",path:(e,n)=>[T.getShortAt(e,n)]},[se.CLIPBOARD]:{description:"Clipboard",path:g_}};function Tn(e,n){let r=[];for(let a=0;a<ml;a+=8)r.push(__(e,n+a));return r}function __(e,n){let r=ke(e,n,8);return[ke(e,n+4,8),r]}function g_(e,n){return[[ke(e,n,8),ke(e,n+4,8),ke(e,n+8,8),ke(e,n+12,8)],ke(e,n+16,8)]}function ke(e,n,r){let a=T.getLongAt(e,n),u=a>>>31?-1:1,f=(a&2130706432)>>>32-r,h=a&parseInt(Au("1",32-r),2);return u*Eh(f.toString(2)+"."+Ch(h.toString(2),32-r,"0"),2)}var v_={read:x_},_l="8BIM",y_=2,w_=4,Oa=_l.length;function x_(e,n){let r=ea(new Uint8Array(e).buffer),a={},u=0;for(;u<e.length;){let f=G(r,u,Oa);u+=Oa;let h=T.getShortAt(r,u);u+=y_;let{tagName:m,tagNameSize:_}=b_(r,u);u+=_;let d=T.getLongAt(r,u);if(u+=w_,f===_l){let g=ea(r.buffer,u,d),v={id:h,value:G(g,0,d)};if(Wr[h]){try{v.description=Wr[h].description(g)}catch{v.description="<no description formatter>"}a[m||Wr[h].name]=v}else n&&(a[`undefined-${h}`]=v)}u+=d+d%2}return a}function b_(e,n){let[r,a]=Cu(e,n);return{tagName:a,tagNameSize:1+r+(r%2===0?1:0)}}var ka={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},Da={4:{name:"Preferred CMM type",value:(e,n)=>G(e,n,4),description:e=>e!==null?Vr(e):""},8:{name:"Profile Version",value:(e,n)=>e.getUint8(n).toString(10)+"."+(e.getUint8(n+1)>>4).toString(10)+"."+(e.getUint8(n+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,n)=>G(e,n,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,n)=>G(e,n,4)},20:{name:"Connection Space",value:(e,n)=>G(e,n,4)},24:{name:"ICC Profile Date",value:(e,n)=>P_(e,n).toISOString()},36:{name:"ICC Signature",value:(e,n)=>L_(e.buffer.slice(n,n+4))},40:{name:"Primary Platform",value:(e,n)=>G(e,n,4),description:e=>Vr(e)},48:{name:"Device Manufacturer",value:(e,n)=>G(e,n,4),description:e=>Vr(e)},52:{name:"Device Model Number",value:(e,n)=>G(e,n,4)},64:{name:"Rendering Intent",value:(e,n)=>e.getUint32(n),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,n)=>G(e,n,4)}};function P_(e,n){let r=e.getUint16(n),a=e.getUint16(n+2)-1,u=e.getUint16(n+4),f=e.getUint16(n+6),h=e.getUint16(n+8),m=e.getUint16(n+10);return new Date(Date.UTC(r,a,u,f,h,m))}function L_(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Vr(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}var Ba={read:k_},S_=84,T_=128,C_="acsp",E_="desc",I_="mluc",A_="text",M_="sig ",O_=12;function k_(e,n,r){return r&&n[0].compressionMethod!==Rn?D_(e,n):N_(e,n)}function D_(e,n){if(!B_(n[0].compressionMethod))return{};let r=new DataView(e.buffer.slice(n[0].offset,n[0].offset+n[0].length));return Ou(r,n[0].compressionMethod,"utf-8","dataview").then(gl).catch(()=>({}))}function B_(e){return e===Mu}function N_(e,n){try{let r=n.reduce((h,m)=>h+m.length,0),a=new Uint8Array(r),u=0,f=z_(e);for(let h=1;h<=n.length;h++){let m=n.find(g=>g.chunkNumber===h);if(!m)throw new Error(`ICC chunk ${h} not found`);let _=f.slice(m.offset,m.offset+m.length),d=new Uint8Array(_);a.set(d,u),u+=d.length}return gl(new DataView(a.buffer))}catch{return{}}}function z_(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function R_(e){return e.length<T_+4}function F_(e,n){return e.length<n+O_}function gl(e){let n=e.buffer,r=e.getUint32();if(e.byteLength!==r)throw new Error("ICC profile length not matching");if(e.length<S_)throw new Error("ICC profile too short");let a={},u=Object.keys(Da);for(let m=0;m<u.length;m++){let _=u[m],d=Da[_],g=d.value(e,parseInt(_,10)),v=g;d.description&&(v=d.description(g)),a[d.name]={value:g,description:v}}if(Cn(n.slice(36,40))!==C_)throw new Error("ICC profile: missing signature");if(R_(n))return a;let f=e.getUint32(128),h=132;for(let m=0;m<f;m++){if(F_(n,h))return a;let _=G(e,h,4),d=e.getUint32(h+4),g=e.getUint32(h+8);if(d>n.length)return a;let v=G(e,d,4);if(v===E_){let w=e.getUint32(d+8);if(w>g)return a;let P=Cn(n.slice(d+12,d+w+11));ki(a,_,P)}else if(v===I_){let w=e.getUint32(d+8),P=e.getUint32(d+12),E=d+16,A=[];for(let M=0;M<w;M++){let U=G(e,E+0,2),N=G(e,E+2,2),O=e.getUint32(E+4),q=e.getUint32(E+8),it=Sh(e,d+q,O);A.push({languageCode:U,countryCode:N,text:it}),E+=P}if(w===1)ki(a,_,A[0].text);else{let M={};for(let U=0;U<A.length;U++)M[`${A[U].languageCode}-${A[U].countryCode}`]=A[U].text;ki(a,_,M)}}else if(v===A_){let w=Cn(n.slice(d+8,d+g-7));ki(a,_,w)}else if(v===M_){let w=Cn(n.slice(d+8,d+12));ki(a,_,w)}h=h+12}return a}function Cn(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function ki(e,n,r){ka[n]?e[ka[n].name]={value:r,description:r}:e[n]={value:r,description:r}}var U_={read:Z_};function Z_(e,n){return{"Image Width":G_(e,n),"Image Height":H_(e,n),"Bit Depth":W_(e,n),"Color Type":j_(e,n),Compression:V_(e,n),Filter:q_(e,n),Interlace:$_(e,n)}}function G_(e,n){if(n+0+4>e.byteLength)return;let r=T.getLongAt(e,n);return{value:r,description:`${r}px`}}function H_(e,n){if(n+4+4>e.byteLength)return;let r=T.getLongAt(e,n+4);return{value:r,description:`${r}px`}}function W_(e,n){if(n+8+1>e.byteLength)return;let r=T.getByteAt(e,n+8);return{value:r,description:`${r}`}}function j_(e,n){let r={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(n+9+1>e.byteLength)return;let a=T.getByteAt(e,n+9);return{value:a,description:r[a]||"Unknown"}}function V_(e,n){if(n+10+1>e.byteLength)return;let r=T.getByteAt(e,n+10);return{value:r,description:r===0?"Deflate/Inflate":"Unknown"}}function q_(e,n){if(n+11+1>e.byteLength)return;let r=T.getByteAt(e,n+11);return{value:r,description:r===0?"Adaptive":"Unknown"}}function $_(e,n){let r={0:"Noninterlaced",1:"Adam7 Interlace"};if(n+12+1>e.byteLength)return;let a=T.getByteAt(e,n+12);return{value:a,description:r[a]||"Unknown"}}var Y_={read:Q_},go="STATE_KEYWORD",vo="STATE_COMPRESSION",yo="STATE_LANG",vl="STATE_TRANSLATED_KEYWORD",wo="STATE_TEXT",K_=1,X_=1,J_=6;function Q_(e,n,r,a){let u={},f=[];for(let h=0;h<n.length;h++){let{offset:m,length:_,type:d}=n[h],g=tg(e,m,_,d,r);if(g instanceof Promise)f.push(g.then(({name:v,value:w,description:P})=>{try{if(ia.USE_EXIF&&sg(v,w))return{__exif:Ju.read(za(w),J_,a)};if(ia.USE_IPTC&&ag(v,w))return{__iptc:mo.read(za(w),0,a)};if(v)return{[v]:{value:w,description:P}}}catch{}return{}}));else{let{name:v,value:w,description:P}=g;v&&(u[v]={value:w,description:P})}}return{readTags:u,readTagsPromise:f.length>0?Promise.all(f):void 0}}function tg(e,n,r,a,u){let f=[],h=[],m=[],_,d=go,g=Rn;for(let w=0;w<r&&n+w<e.byteLength;w++){if(d===vo){g=eg({type:a,dataView:e,offset:n+w}),a===De&&(w+=K_),d=Na(a,d);continue}else if(d===wo){_=new DataView(e.buffer.slice(n+w,n+r));break}let P=e.getUint8(n+w);P===0?d=Na(a,d):d===go?f.push(P):d===yo?h.push(P):d===vl&&m.push(P)}if(g!==Rn&&!u)return{};let v=Ou(_,g,ig(a));return v instanceof Promise?v.then(w=>qr(w,a,h,f)).catch(()=>qr("<text using unknown compression>".split(""),a,h,f)):qr(v,a,h,f)}function eg({type:e,dataView:n,offset:r}){if(e===De){if(n.getUint8(r)===X_)return n.getUint8(r+1)}else if(e===tr)return n.getUint8(r);return Rn}function Na(e,n){return n===go&&[De,tr].includes(e)?vo:n===vo?e===De?yo:wo:n===yo?vl:wo}function ig(e){return e===No||e===tr?"latin1":"utf-8"}function qr(e,n,r,a){let u=rg(e);return{name:ng(n,r,a),value:u,description:n===De?og(e):u}}function ng(e,n,r){let a=ai(r);if(e===No||n.length===0)return a;let u=ai(n);return`${a} (${u})`}function rg(e){return e instanceof DataView?G(e,0,e.byteLength):e}function og(e){return Qu.decode("UTF-8",e)}function sg(e,n){return e.toLowerCase()==="raw profile type exif"&&n.substring(1,5)==="exif"}function ag(e,n){return e.toLowerCase()==="raw profile type iptc"&&n.substring(1,5)==="iptc"}function za(e){let n=e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/);return ug(n[2].replace(/\n/g,""))}function ug(e){let n=new DataView(new ArrayBuffer(e.length/2));for(let r=0;r<e.length;r+=2)n.setUint8(r/2,parseInt(e.substring(r,r+2),16));return n}var lg={read:fg};function fg(e,n){let r={};for(let a=0;a<n.length;a++){let u=T.getLongAt(e,n[a]+ti),f=G(e,n[a]+Pe,qt);f===Ru?(r["Pixels Per Unit X"]=cg(e,n[a],u),r["Pixels Per Unit Y"]=hg(e,n[a],u),r["Pixel Units"]=dg(e,n[a],u)):f===Fu&&(r["Modify Date"]=pg(e,n[a],u))}return r}function cg(e,n,r){if(!or(e,n,r,0,4))return;let a=T.getLongAt(e,n+bt+0);return{value:a,description:""+a}}function hg(e,n,r){if(!or(e,n,r,4,4))return;let a=T.getLongAt(e,n+bt+4);return{value:a,description:""+a}}function dg(e,n,r){if(!or(e,n,r,8,1))return;let a=T.getByteAt(e,n+bt+8);return{value:a,description:a===1?"meters":"Unknown"}}function pg(e,n,r){if(!or(e,n,r,0,7))return;let a=T.getShortAt(e,n+bt),u=T.getByteAt(e,n+bt+2),f=T.getByteAt(e,n+bt+3),h=T.getByteAt(e,n+bt+4),m=T.getByteAt(e,n+bt+5),_=T.getByteAt(e,n+bt+6);return{value:[a,u,f,h,m,_],description:`${Xe(a,4)}-${Xe(u,2)}-${Xe(f,2)} ${Xe(h,2)}:${Xe(m,2)}:${Xe(_,2)}`}}function or(e,n,r,a,u){return a+u<=r&&n+bt+a+u<=e.byteLength}function Xe(e,n){return`${"0".repeat(n-(""+e).length)}${e}`}var mg={read:vg},_g=4,gg=7;function vg(e,n){let r={},a=T.getByteAt(e,n);return r.Alpha=yg(a),r.Animation=wg(a),r.ImageWidth=Ra(e,n+_g),r.ImageHeight=Ra(e,n+gg),r}function yg(e){let n=e&16;return{value:n?1:0,description:n?"Yes":"No"}}function wg(e){let n=e&2;return{value:n?1:0,description:n?"Yes":"No"}}function Ra(e,n){let r=T.getByteAt(e,n)+256*T.getByteAt(e,n+1)+65536*T.getByteAt(e,n+2)+1;return{value:r,description:r+"px"}}var xg={read:bg};function bg(e){return{"GIF Version":Pg(e),"Image Width":Lg(e),"Image Height":Sg(e),"Global Color Map":Tg(e),"Bits Per Pixel":Eg(e),"Color Resolution Depth":Cg(e)}}function Pg(e){if(6>e.byteLength)return;let n=G(e,3,3);return{value:n,description:n}}function Lg(e){if(8>e.byteLength)return;let n=e.getUint16(6,!0);return{value:n,description:`${n}px`}}function Sg(e){if(10>e.byteLength)return;let n=e.getUint16(8,!0);return{value:n,description:`${n}px`}}function Tg(e){if(11>e.byteLength)return;let n=(e.getUint8(10)&128)>>>7;return{value:n,description:n===1?"Yes":"No"}}function Cg(e){if(11>e.byteLength)return;let n=((e.getUint8(10)&112)>>>4)+1;return{value:n,description:`${n} ${n===1?"bit":"bits"}`}}function Eg(e){if(11>e.byteLength)return;let n=(e.getUint8(10)&7)+1;return{value:n,description:`${n} ${n===1?"bit":"bits"}`}}var Ig=[6,7,99],Ag={get:Mg};function Mg(e,n,r){if(Og(n)){n.type="image/jpeg";let a=r+n.JPEGInterchangeFormat.value;n.image=e.buffer.slice(a,a+n.JPEGInterchangeFormatLength.value),Eu(n,"base64",function(){return Iu(this.image)})}return n}function Og(e){return e&&(e.Compression===void 0||Ig.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function yl(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}yl.prototype=new Error;var kg={MetadataMissingError:yl};function Dg(e,n={}){return Bg(e)?(n.async=!0,Ng(e,n).then(r=>$r(r,n))):Hg(e)?(n.async=!0,Wg(e).then(r=>$r(r,n))):$r(e,n)}function Bg(e){return typeof e=="string"}function Ng(e,n){return/^\w+:\/\//.test(e)?typeof fetch<"u"?zg(e,n):Rg(e,n):Ug(e)?Promise.resolve(Th(e)):Zg(e,n)}function zg(e,{length:n}={}){let r={method:"GET"};return Number.isInteger(n)&&n>=0&&(r.headers={range:`bytes=0-${n-1}`}),fetch(e,r).then(a=>a.arrayBuffer())}function Rg(e,{length:n}={}){return new Promise((r,a)=>{let u={};Number.isInteger(n)&&n>=0&&(u.headers={range:`bytes=0-${n-1}`}),Fg(e)(e,u,f=>{if(f.statusCode>=200&&f.statusCode<=299){let h=[];f.on("data",m=>h.push(Buffer.from(m))),f.on("error",m=>a(m)),f.on("end",()=>r(Buffer.concat(h)))}else a(`Could not fetch file: ${f.statusCode} ${f.statusMessage}`),f.resume()}).on("error",f=>a(f))})}function Fg(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function Ug(e){return/^data:[^;,]*(;base64)?,/.test(e)}function Zg(e,{length:n}={}){return new Promise((r,a)=>{let u=Gg();u.open(e,(f,h)=>{f?a(f):u.stat(e,(m,_)=>{if(m)a(m);else{let d=Math.min(_.size,n!==void 0?n:_.size),g=Buffer.alloc(d),v={buffer:g,length:d};u.read(h,v,w=>{w?a(w):u.close(h,P=>{P&&console.warn(`Could not close file ${e}:`,P),r(g)})})}})})})}function Gg(){try{return __non_webpack_require__("fs")}catch{return}}function Hg(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function Wg(e){return new Promise((n,r)=>{let a=new FileReader;a.onload=u=>n(u.target.result),a.onerror=()=>r(a.error),a.readAsArrayBuffer(e)})}function $r(e,n){return jg(e)&&(e=new Uint8Array(e).buffer),qg(Vg(e),n)}function jg(e){try{return Buffer.isBuffer(e)}catch{return!1}}function Vg(e){try{return new DataView(e)}catch{return new Tu(e)}}function qg(e,{expanded:n=!1,async:r=!1,includeUnknown:a=!1}={expanded:!1,async:!1,includeUnknown:!1}){let u=!1,f={},h=[],{fileType:m,fileDataOffset:_,jfifDataOffset:d,tiffHeaderOffset:g,iptcDataOffset:v,xmpChunks:w,iccChunks:P,mpfDataOffset:E,pngHeaderOffset:A,pngTextChunks:M,pngChunkOffsets:U,vp8xChunkOffset:N,gifHeaderOffset:O}=vp.parseAppMarkers(e,r);if($g(_)){u=!0;let b=Jp.read(e,_);n?f.file=b:f=K({},f,b)}if(Yg(d)){u=!0;let b=um.read(e,d);n?f.jfif=b:f=K({},f,b)}if(Kg(g)){u=!0;let b=Ju.read(e,g,a);if(b.Thumbnail&&(f.Thumbnail=b.Thumbnail,delete b.Thumbnail),n?(f.exif=b,Xg(f)):f=K({},f,b),b["IPTC-NAA"]&&!Fa(v)){let Y=mo.read(b["IPTC-NAA"].value,0,a);n?f.iptc=Y:f=K({},f,Y)}if(b.ApplicationNotes&&!Ua(w)){let Y=Ma.read(ai(b.ApplicationNotes.value));n?f.xmp=Y:(delete Y._raw,f=K({},f,Y))}if(b.ImageSourceData){let Y=v_.read(b.PhotoshopSettings.value,a);n?f.photoshop=Y:f=K({},f,Y)}if(b.ICC_Profile&&!Za(P)){let Y=Ba.read(b.ICC_Profile.value,[{offset:0,length:b.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);n?f.icc=Y:f=K({},f,Y)}}if(Fa(v)){u=!0;let b=mo.read(e,v,a);n?f.iptc=b:f=K({},f,b)}if(Ua(w)){u=!0;let b=Ma.read(e,w);n?f.xmp=b:(delete b._raw,f=K({},f,b))}if(Za(P)){u=!0;let b=Ba.read(e,P,r);b instanceof Promise?h.push(b.then(it)):it(b)}if(Jg(E)){u=!0;let b=Wp.read(e,E,a);n?f.mpf=b:f=K({},f,b)}if(Qg(A)){u=!0;let b=U_.read(e,A);n?(f.png=f.png?K({},f.png,b):b,f.pngFile=b):f=K({},f,b)}if(tv(M)){u=!0;let{readTags:b,readTagsPromise:Y}=Y_.read(e,M,r,a);z(b),Y&&h.push(Y.then(et=>et.forEach(z)))}if(ev(U)){u=!0;let b=lg.read(e,U);n?f.png=f.png?K({},f.png,b):b:f=K({},f,b)}if(iv(N)){u=!0;let b=mg.read(e,N);n?f.riff=f.riff?K({},f.riff,b):b:f=K({},f,b)}if(nv(O)){u=!0;let b=xg.read(e,O);n?f.gif=f.gif?K({},f.gif,b):b:f=K({},f,b)}let q=Ag.get(e,f.Thumbnail,g);if(q?(u=!0,f.Thumbnail=q):delete f.Thumbnail,m&&(n?(f.file||(f.file={}),f.file.FileType=m):f.FileType=m,u=!0),!u)throw new kg.MetadataMissingError;if(r)return Promise.all(h).then(()=>f);return f;function it(b){n?f.icc=b:f=K({},f,b)}function z(b){if(n){for(let Y of["exif","iptc"]){let et=`__${Y}`;b[et]&&(f[Y]=f[Y]?K({},f.exif,b[et]):b[et],delete b[et])}f.png=f.png?K({},f.png,b):b,f.pngText=f.pngText?K({},f.png,b):b}else f=K({},f,b.__exif?b.__exif:{},b.__iptc?b.__iptc:{},b),delete f.__exif,delete f.__iptc}}function $g(e){return e!==void 0}function Yg(e){return e!==void 0}function Kg(e){return e!==void 0}function Xg(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=Fn(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=Fn(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function Fa(e){return e!==void 0}function Ua(e){return Array.isArray(e)&&e.length>0}function Za(e){return Array.isArray(e)&&e.length>0}function Jg(e){return e!==void 0}function Qg(e){return e!==void 0}function tv(e){return e!==void 0}function ev(e){return e!==void 0}function iv(e){return e!==void 0}function nv(e){return e!==void 0}var rv=["1","true"].includes("0");function ov(e=36,n=24){return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function sv(e,n,r="4:3"){let a=e/n,u=ov()/a,[f,h]=r.split(":").map(Number),m=Math.sqrt(Math.pow(f,2)+Math.pow(h,2)),_=u*(f/m),d=u*(h/m);return{width:parseFloat(_.toFixed(2)),height:parseFloat(d.toFixed(2))}}function av(e,n){let{width:r}=sv(n,e),a=2*Math.atan(r/(2*e))*(180/Math.PI);return parseFloat(a.toFixed(4))}var Ga=e=>e.reduce((n,r)=>n/r);async function uv(e){var A,M,U,N,O,q,it,z,b,Y,et,ft,ot,wt;let n=await Dg(e),r=null,a=null,u=null,f="landscape";if("GPSLongitude"in n){let Le=((A=n.GPSLongitudeRef)==null?void 0:A.value)[0]==="E"?1:-1,Ot=((M=n.GPSLatitudeRef)==null?void 0:M.value)[0]==="N"?1:-1;r=((U=n.GPSLongitude)==null?void 0:U.description)*Le,a=((N=n.GPSLatitude)==null?void 0:N.description)*Ot,u=Ga((O=n.GPSImgDirection)==null?void 0:O.value),u=parseFloat(u.toFixed(2)),a=parseFloat(a.toFixed(7)),r=parseFloat(r.toFixed(7))}let h=Ga((q=n.FocalLength)==null?void 0:q.value),m=(it=n.FocalLengthIn35mmFilm)==null?void 0:it.value,_=(z=n["Image Width"])==null?void 0:z.value,d=(b=n["Image Height"])==null?void 0:b.value,g=!!((et=(Y=n.Lens)==null?void 0:Y.value)!=null&&et.includes(" front ")),v=["right-top","left-top"].includes(((ft=n.Orientation)==null?void 0:ft.description)??""),w=((ot=n.Make)==null?void 0:ot.description)??null,P=((wt=n.Model)==null?void 0:wt.description)??null;_===d?f="square":(d>_||v)&&(f="portrait");let E={make:w,model:P,angleOfView:av(h,m),focalLength:parseFloat(h.toFixed(2)),focalLengthIn35mm:m,position:a&&r?[a,r]:null,bearing:u,width:_,height:d,orientation:f,frontCamera:g};return rv&&(console.log("EXIF data",n),console.log("Extracted data",E)),E}function lv(e,n,r=200){let a=e/2*(Math.PI/180),u=Math.tan(a)*r;return`
    <svg width="${r}" height="${r}"
         viewBox="-${r/2} -${r/2} ${r} ${r}">
      <defs>
        <radialGradient id="fade-gradient" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="white" stop-opacity="1"/>
          <stop offset="80%" stop-color="white" stop-opacity="0"/>
        </radialGradient>

        <mask id="circle-mask">
          <rect x="-${r/2}" y="-${r/2}" width="${r}"
                height="${r}" fill="url(#fade-gradient)"/>
        </mask>
      </defs>

      <g transform="rotate(${n} 0 0)">
        <polygon
            points="0,0 ${-u/2},${-r/2} ${u/2},${-r/2}"
            fill="lightblue"
            stroke="white"
            stroke-width="1"
            mask="url(#circle-mask)"/>
      </g>

      <circle cx="0" cy="0" r="5" fill="blue" stroke="white" stroke-width="2"/>
    </svg>
    `}function fv(e=10){return`
    <svg width="${e}" height="${e}" viewBox="0 0 ${e} ${e}">
      <circle cx="0" cy="0" r="${e/2}" fill="blue" stroke="white" stroke-width="2"/>
    </svg>
  `}const cv=[{name:"Esri Satellite",urlTemplate:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",layerOptions:{attribution:'&copy; <a href="http://www.esri.com/">Esri</a> i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',maxZoom:19}}],Gn=ko([]);async function hv(e){const{angleOfView:n,bearing:r,position:a}=await uv(e);Gn.set([...Gn.get(),{file:e,angleOfView:n,bearing:r,position:a}])}const dv=[51.505,-.09],pv=14,Hn=ko(null),mv=yh(Gn,e=>e.filter(n=>!!n.position).map(gv));function _v(e){const n=Gi.map(e,{preferCanvas:!0}).setView(dv,pv);return Hn.set(n),cv.forEach(({urlTemplate:r,layerOptions:a})=>Gi.tileLayer(r,a).addTo(n)),n}function gv({position:e,angleOfView:n,bearing:r,size:a=300}){const u=Gi.divIcon({className:"fov-marker",html:n&&r?lv(n,r,a):fv(a/10),iconSize:[a,a],iconAnchor:[a/2,a/2]});return Gi.marker(e,{icon:u})}function vv(e){var n;(n=Hn.get())==null||n.flyTo(e,18,{duration:2.5,easeLinearity:.3})}const yv=Ph(e=>{var r;if(e.length===0)return;const n=Gi.featureGroup([...e]);n.addTo(Hn.get()),(r=Hn.get())==null||r.flyToBounds(n.getBounds(),{duration:2.5,easeLinearity:.3})},500);mv.subscribe(yv);var wv=be('<div class="map svelte-140iclz"></div>');function xv(e,n){Jn(n,!1);function r(u){const f=_v(u);return{destroy:()=>{f.remove()}}}Lu();var a=wv();eh(a,u=>r(u)),te(e,a),Qn()}function di(e,n,r,a){function u(f){return f instanceof r?f:new r(function(h){h(f)})}return new(r||(r=Promise))(function(f,h){function m(g){try{d(a.next(g))}catch(v){h(v)}}function _(g){try{d(a.throw(g))}catch(v){h(v)}}function d(g){g.done?f(g.value):u(g.value).then(m,_)}d((a=a.apply(e,n||[])).next())})}function pi(e,n){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=m(0),h.throw=m(1),h.return=m(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(d){return function(g){return _([d,g])}}function _(d){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,d[0]&&(r=0)),r;)try{if(a=1,u&&(f=d[0]&2?u.return:d[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,d[1])).done)return f;switch(u=0,f&&(d=[d[0]&2,f.value]),d[0]){case 0:case 1:f=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,u=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!f||d[1]>f[0]&&d[1]<f[3])){r.label=d[1];break}if(d[0]===6&&r.label<f[1]){r.label=f[1],f=d;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(d);break}f[2]&&r.ops.pop(),r.trys.pop();continue}d=n.call(e,r)}catch(g){d=[6,g],u=0}finally{a=f=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Ha(e,n){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),u,f=[],h;try{for(;(n===void 0||n-- >0)&&!(u=a.next()).done;)f.push(u.value)}catch(m){h={error:m}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(h)throw h.error}}return f}function Wa(e,n,r){if(r||arguments.length===2)for(var a=0,u=n.length,f;a<u;a++)(f||!(a in n))&&(f||(f=Array.prototype.slice.call(n,0,a)),f[a]=n[a]);return e.concat(f||Array.prototype.slice.call(n))}var bv=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function qi(e,n){var r=Pv(e);if(typeof r.path!="string"){var a=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof n=="string"?n:typeof a=="string"&&a.length>0?a:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function Pv(e){var n=e.name,r=n&&n.lastIndexOf(".")!==-1;if(r&&!e.type){var a=n.split(".").pop().toLowerCase(),u=bv.get(a);u&&Object.defineProperty(e,"type",{value:u,writable:!1,configurable:!1,enumerable:!0})}return e}var Lv=[".DS_Store","Thumbs.db"];function Sv(e){return di(this,void 0,void 0,function(){return pi(this,function(n){return Wn(e)&&Tv(e.dataTransfer)?[2,Av(e.dataTransfer,e.type)]:Cv(e)?[2,Ev(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,Iv(e)]:[2,[]]})})}function Tv(e){return Wn(e)}function Cv(e){return Wn(e)&&Wn(e.target)}function Wn(e){return typeof e=="object"&&e!==null}function Ev(e){return xo(e.target.files).map(function(n){return qi(n)})}function Iv(e){return di(this,void 0,void 0,function(){var n;return pi(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(a){return a.getFile()}))];case 1:return n=r.sent(),[2,n.map(function(a){return qi(a)})]}})})}function Av(e,n){return di(this,void 0,void 0,function(){var r,a;return pi(this,function(u){switch(u.label){case 0:return e.items?(r=xo(e.items).filter(function(f){return f.kind==="file"}),n!=="drop"?[2,r]:[4,Promise.all(r.map(Mv))]):[3,2];case 1:return a=u.sent(),[2,ja(wl(a))];case 2:return[2,ja(xo(e.files).map(function(f){return qi(f)}))]}})})}function ja(e){return e.filter(function(n){return Lv.indexOf(n.name)===-1})}function xo(e){if(e===null)return[];for(var n=[],r=0;r<e.length;r++){var a=e[r];n.push(a)}return n}function Mv(e){if(typeof e.webkitGetAsEntry!="function")return Va(e);var n=e.webkitGetAsEntry();return n&&n.isDirectory?xl(n):Va(e)}function wl(e){return e.reduce(function(n,r){return Wa(Wa([],Ha(n),!1),Ha(Array.isArray(r)?wl(r):[r]),!1)},[])}function Va(e){var n=e.getAsFile();if(!n)return Promise.reject("".concat(e," is not a File"));var r=qi(n);return Promise.resolve(r)}function Ov(e){return di(this,void 0,void 0,function(){return pi(this,function(n){return[2,e.isDirectory?xl(e):kv(e)]})})}function xl(e){var n=e.createReader();return new Promise(function(r,a){var u=[];function f(){var h=this;n.readEntries(function(m){return di(h,void 0,void 0,function(){var _,d,g;return pi(this,function(v){switch(v.label){case 0:if(m.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(u)];case 2:return _=v.sent(),r(_),[3,4];case 3:return d=v.sent(),a(d),[3,4];case 4:return[3,6];case 5:g=Promise.all(m.map(Ov)),u.push(g),f(),v.label=6;case 6:return[2]}})})},function(m){a(m)})}f()})}function kv(e){return di(this,void 0,void 0,function(){return pi(this,function(n){return[2,new Promise(function(r,a){e.file(function(u){var f=qi(u,e.fullPath);r(f)},function(u){a(u)})})]})})}function Dv(e,n){if(e&&n){const r=Array.isArray(n)?n:n.split(","),a=e.name||"",u=(e.type||"").toLowerCase(),f=u.replace(/\/.*$/,"");return r.some(h=>{const m=h.trim().toLowerCase();return m.charAt(0)==="."?a.toLowerCase().endsWith(m):m.endsWith("/*")?f===m.replace(/\/.*$/,""):u===m})}return!0}const Bv="file-invalid-type",Nv="file-too-large",zv="file-too-small",Rv="too-many-files",Fv=e=>{e=Array.isArray(e)&&e.length===1?e[0]:e;const n=Array.isArray(e)?`one of ${e.join(", ")}`:e;return{code:Bv,message:`File type must be ${n}`}},qa=e=>({code:Nv,message:`File is larger than ${e} bytes`}),$a=e=>({code:zv,message:`File is smaller than ${e} bytes`}),Uv={code:Rv,message:"Too many files"};function Zv(e,n){const r=e.type==="application/x-moz-file"||Dv(e,n);return[r,r?null:Fv(n)]}function Gv(e,n,r){if(Di(e.size))if(Di(n)&&Di(r)){if(e.size>r)return[!1,qa(r)];if(e.size<n)return[!1,$a(n)]}else{if(Di(n)&&e.size<n)return[!1,$a(n)];if(Di(r)&&e.size>r)return[!1,qa(r)]}return[!0,null]}function Di(e){return e!=null}function Ya(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function En(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,n=>n==="Files"||n==="application/x-moz-file"):!!e.target&&!!e.target.files}function Hv(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Wv(e){return e.indexOf("Edge/")!==-1}function jv(e=window.navigator.userAgent){return Hv(e)||Wv(e)}var Vv=be("<p> </p>"),qv=be('<div><input type="file" autocomplete="off" tabindex="-1" style="display: none;"> <!></div>');function $v(e,n){const r=Qs(n,["children","$$slots","$$events","$$legacy"]),a=Qs(r,["accept","disabled","getFilesFromEvent","maxSize","minSize","multiple","preventDropOnDocument","noClick","noKeyboard","noDrag","noDragEventsBubbling","containerClasses","containerStyles","disableDefaultStyles","name","inputElement","required"]);Jn(n,!1);const u=Oi(),f=Oi(),h=Oi(),m=Oi();let _=yt(n,"accept",8,void 0),d=yt(n,"disabled",8,!1),g=yt(n,"getFilesFromEvent",8,Sv),v=yt(n,"maxSize",8,1/0),w=yt(n,"minSize",8,0),P=yt(n,"multiple",8,!0),E=yt(n,"preventDropOnDocument",8,!0),A=yt(n,"noClick",8,!1),M=yt(n,"noKeyboard",8,!1),U=yt(n,"noDrag",8,!1),N=yt(n,"noDragEventsBubbling",8,!1),O=yt(n,"containerClasses",8,""),q=yt(n,"containerStyles",8,""),it=yt(n,"disableDefaultStyles",8,!1),z=yt(n,"name",8,""),b=yt(n,"inputElement",12,void 0),Y=yt(n,"required",8,!1);const et=ch();let ft={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]},ot=Oi();function wt(){ft.isFileDialogActive=!1,ft.isDragActive=!1,ft.draggedFiles=[],ft.acceptedFiles=[],ft.fileRejections=[]}function Le(){b()&&(b(b().value=null,!0),ft.isFileDialogActive=!0,b().click())}function Ot(C){!B(ot)||!B(ot).isEqualNode(C.target)||(C.keyCode===32||C.keyCode===13)&&(C.preventDefault(),Le())}function sr(){ft.isFocused=!0}function Ct(){ft.isFocused=!1}function Se(){A()||(jv()?setTimeout(Le,0):Le())}function F(C){C.preventDefault(),_t(C),nt=[...nt,C.target],En(C)&&Promise.resolve(g()(C)).then(j=>{Ya(C)&&!N()||(ft.draggedFiles=j,ft.isDragActive=!0,et("dragenter",{dragEvent:C}))})}function $i(C){if(C.preventDefault(),_t(C),C.dataTransfer)try{C.dataTransfer.dropEffect="copy"}catch{}return En(C)&&et("dragover",{dragEvent:C}),!1}function R(C){C.preventDefault(),_t(C);const j=nt.filter(Ht=>B(ot)&&B(ot).contains(Ht)),Lt=j.indexOf(C.target);Lt!==-1&&j.splice(Lt,1),nt=j,!(j.length>0)&&(ft.isDragActive=!1,ft.draggedFiles=[],En(C)&&et("dragleave",{dragEvent:C}))}function st(C){C.preventDefault(),_t(C),nt=[],En(C)&&(et("filedropped",{event:C}),Promise.resolve(g()(C)).then(j=>{if(Ya(C)&&!N())return;const Lt=[],Ht=[];j.forEach(ce=>{const[lr,vi]=Zv(ce,_()),[Ji,Qi]=Gv(ce,w(),v());if(lr&&Ji)Lt.push(ce);else{const fr=[vi,Qi].filter(tn=>tn);Ht.push({file:ce,errors:fr})}}),!P()&&Lt.length>1&&(Lt.forEach(ce=>{Ht.push({file:ce,errors:[Uv]})}),Lt.splice(0)),C.dataTransfer&&b(b().files=C.dataTransfer.files,!0),ft.acceptedFiles=Lt,ft.fileRejections=Ht,et("drop",{acceptedFiles:Lt,fileRejections:Ht,event:C}),Ht.length>0&&et("droprejected",{fileRejections:Ht,event:C}),Lt.length>0&&et("dropaccepted",{acceptedFiles:Lt,event:C})})),wt()}function _t(C){N()&&C.stopPropagation()}function Pt(C){E()&&C.preventDefault()}let nt=[];function tt(C){E()&&(B(ot)&&B(ot).contains(C.target)||(C.preventDefault(),nt=[]))}function $(){ft.isFileDialogActive&&setTimeout(()=>{if(b()){const{files:C}=b();C.length||(ft.isFileDialogActive=!1,et("filedialogcancel"))}},300)}lh(()=>{b(null)});function Gt(C){C.stopPropagation()}wn(()=>Bi(d()),()=>{gt(u,C=>d()?null:C)}),wn(()=>(Bi(M()),B(u)),()=>{gt(f,C=>M()?null:B(u)(C))}),wn(()=>(Bi(U()),B(u)),()=>{gt(h,C=>U()?null:B(u)(C))}),wn(()=>Bi(P()),()=>{gt(m,P()?"Drag 'n' drop some files here, or click to select files":"Drag 'n' drop a file here, or click to select a file")}),Sc(),Lu();var ct=qv();Bt("focus",Ri,$),Bt("dragover",Ri,Pt),Bt("drop",Ri,tt),Xs(ct,C=>gt(ot,C),()=>B(ot));var Yi=Ut(()=>B(f)(Ot)),mi=Ut(()=>B(f)(sr)),_i=Ut(()=>B(f)(Ct)),Te=Ut(()=>B(u)(Se)),gi=Ut(()=>B(h)(F)),ar=Ut(()=>B(h)($i)),Ki=Ut(()=>B(h)(R)),Xi=Ut(()=>B(h)(st));let Fe;var kt=ae(ct);Xs(kt,C=>b(C),()=>b()),In(()=>{var C;return zn(kt,"accept",(C=_())==null?void 0:C.toString())});var ur=Oe(kt,2);th(ur,n,"default",{},C=>{var j=Vv(),Lt=ae(j);In(()=>jc(Lt,B(m))),te(C,j)}),In(()=>{Fe=nh(ct,Fe,{tabindex:"0",role:"button",class:`${(it()?"":"dropzone")??""}
  ${O()??""}`,style:q(),...a},"svelte-817dg2"),kt.multiple=P(),kt.required=Y(),zn(kt,"name",z())}),Bt("change",kt,st),Bt("click",kt,Gt),Bt("keydown",ct,function(...C){var j;(j=B(Yi))==null||j.apply(this,C)}),Bt("focus",ct,function(...C){var j;(j=B(mi))==null||j.apply(this,C)}),Bt("blur",ct,function(...C){var j;(j=B(_i))==null||j.apply(this,C)}),Bt("click",ct,function(...C){var j;(j=B(Te))==null||j.apply(this,C)}),Bt("dragenter",ct,function(...C){var j;(j=B(gi))==null||j.apply(this,C)}),Bt("dragover",ct,function(...C){var j;(j=B(ar))==null||j.apply(this,C)}),Bt("dragleave",ct,function(...C){var j;(j=B(Ki))==null||j.apply(this,C)}),Bt("drop",ct,function(...C){var j;(j=B(Xi))==null||j.apply(this,C)}),te(e,ct),Qn()}var Yv=(e,n)=>gt(n,!0),Kv=be('<div class="add-photos svelte-d7oex9"><button class="svelte-d7oex9">Add Photos</button></div>'),Xv=(e,n)=>gt(n,!1),Jv=(e,n)=>B(n).position&&vv(B(n).position),Qv=be('<li><button class="svelte-d7oex9"><img alt="" class="image-preview svelte-d7oex9"> <span class="location svelte-d7oex9"><!></span></button></li>'),ty=be('<div class="photo-list svelte-d7oex9"><header class="svelte-d7oex9"><h2 class="svelte-d7oex9">Photos</h2> <button class="svelte-d7oex9">Close</button></header> <ul class="svelte-d7oex9"></ul> <!></div>'),ey=be("<!> <!>",1);function iy(e,n){Jn(n,!0);const r=ah(),a=()=>sh(Gn,"$photos",r);let u=ac(!1);async function f(d){const{acceptedFiles:g}=d.detail;for(const v of g)await hv(v)}var h=ey(),m=yc(h);Fr(m,()=>!B(u),d=>{var g=Kv(),v=ae(g);v.__click=[Yv,u],te(d,g)});var _=Oe(m,2);Fr(_,()=>B(u),d=>{var g=ty(),v=ae(g),w=Oe(ae(v),2);w.__click=[Xv,u];var P=Oe(v,2);Kc(P,5,a,$c,(A,M)=>{var U=Qv(),N=ae(U);N.__click=[Jv,M];var O=ae(N);In(()=>zn(O,"src",URL.createObjectURL(B(M).file)));var q=Oe(O,2),it=ae(q);Fr(it,()=>B(M).position,z=>{var b=Vs("");te(z,b)},z=>{var b=Vs("no location data");te(z,b)}),te(A,U)});var E=Oe(P,2);$v(E,{$$events:{drop:f}}),te(d,g)}),te(e,h),Qn()}bu(["click"]);var ny=be("<main><!> <!></main>");function ry(e){var n=ny(),r=ae(n);xv(r,{});var a=Oe(r,2);iy(a,{}),te(e,n)}Vc(ry,{target:document.getElementById("app")});
